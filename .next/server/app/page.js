/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/page";
exports.ids = ["app/page"];
exports.modules = {

/***/ "./action-async-storage.external":
/*!****************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external" ***!
  \****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external":
/*!***************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external" ***!
  \***************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-page/module.compiled */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/module.compiled.js?d969\");\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/client/components/error-boundary */ \"(rsc)/./node_modules/next/dist/client/components/error-boundary.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/./node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"originalPathname\",\"__next_app__\",\"routeModule\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\"TURBOPACK { transition: next-ssr }\";\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: ['__PAGE__', {}, {\n          page: [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/page.tsx */ \"(rsc)/./src/app/page.tsx\")), \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/app/page.tsx\"],\n          \n        }]\n      },\n        {\n        'layout': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/layout.tsx */ \"(rsc)/./src/app/layout.tsx\")), \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/app/layout.tsx\"],\n'not-found': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/not-found-error */ \"(rsc)/./node_modules/next/dist/client/components/not-found-error.js\", 23)), \"next/dist/client/components/not-found-error\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/app/page.tsx\"];\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst originalPathname = \"/page\";\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/page\",\n        pathname: \"/\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\",\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZwYWdlJnBhZ2U9JTJGcGFnZSZhcHBQYXRocz0lMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGcGFnZS50c3gmYXBwRGlyPSUyRlVzZXJzJTJGbWlsb2Rhdmlkc29uJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGZmlyZWJpcmQtaW50ZXJhY3RpdmUtYXR0ZW1wdDIlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbWlsb2Rhdmlkc29uJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGZmlyZWJpcmQtaW50ZXJhY3RpdmUtYXR0ZW1wdDImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxhQUFhLHNCQUFzQjtBQUNpRTtBQUNyQztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakMsdUJBQXVCLGdKQUF3SDtBQUMvSTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSx5QkFBeUIsb0pBQTBIO0FBQ25KLG9CQUFvQiwwTkFBZ0Y7QUFDcEc7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ3VCO0FBQzZEO0FBQ3BGLDZCQUE2QixtQkFBbUI7QUFDaEQ7QUFDTztBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ3VEO0FBQ3ZEO0FBQ08sd0JBQXdCLDhHQUFrQjtBQUNqRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXJlYmlyZC1pbnRlcmFjdGl2ZS8/M2ZmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcIlRVUkJPUEFDSyB7IHRyYW5zaXRpb246IG5leHQtc3NyIH1cIjtcbmltcG9ydCB7IEFwcFBhZ2VSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1wYWdlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbi8vIFdlIGluamVjdCB0aGUgdHJlZSBhbmQgcGFnZXMgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IHRyZWUgPSB7XG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICcnLFxuICAgICAgICB7XG4gICAgICAgIGNoaWxkcmVuOiBbJ19fUEFHRV9fJywge30sIHtcbiAgICAgICAgICBwYWdlOiBbKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMvbWlsb2Rhdmlkc29uL0RvY3VtZW50cy9HaXRIdWIvZmlyZWJpcmQtaW50ZXJhY3RpdmUtYXR0ZW1wdDIvc3JjL2FwcC9wYWdlLnRzeFwiKSwgXCIvVXNlcnMvbWlsb2Rhdmlkc29uL0RvY3VtZW50cy9HaXRIdWIvZmlyZWJpcmQtaW50ZXJhY3RpdmUtYXR0ZW1wdDIvc3JjL2FwcC9wYWdlLnRzeFwiXSxcbiAgICAgICAgICBcbiAgICAgICAgfV1cbiAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgJ2xheW91dCc6IFsoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9taWxvZGF2aWRzb24vRG9jdW1lbnRzL0dpdEh1Yi9maXJlYmlyZC1pbnRlcmFjdGl2ZS1hdHRlbXB0Mi9zcmMvYXBwL2xheW91dC50c3hcIiksIFwiL1VzZXJzL21pbG9kYXZpZHNvbi9Eb2N1bWVudHMvR2l0SHViL2ZpcmViaXJkLWludGVyYWN0aXZlLWF0dGVtcHQyL3NyYy9hcHAvbGF5b3V0LnRzeFwiXSxcbidub3QtZm91bmQnOiBbKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbm90LWZvdW5kLWVycm9yXCIpLCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9ub3QtZm91bmQtZXJyb3JcIl0sXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfS5jaGlsZHJlbjtcbmNvbnN0IHBhZ2VzID0gW1wiL1VzZXJzL21pbG9kYXZpZHNvbi9Eb2N1bWVudHMvR2l0SHViL2ZpcmViaXJkLWludGVyYWN0aXZlLWF0dGVtcHQyL3NyYy9hcHAvcGFnZS50c3hcIl07XG5leHBvcnQgeyB0cmVlLCBwYWdlcyB9O1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBHbG9iYWxFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvZXJyb3ItYm91bmRhcnlcIjtcbmNvbnN0IF9fbmV4dF9hcHBfcmVxdWlyZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfX1xuY29uc3QgX19uZXh0X2FwcF9sb2FkX2NodW5rX18gPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKVxuZXhwb3J0IGNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9wYWdlXCI7XG5leHBvcnQgY29uc3QgX19uZXh0X2FwcF9fID0ge1xuICAgIHJlcXVpcmU6IF9fbmV4dF9hcHBfcmVxdWlyZV9fLFxuICAgIGxvYWRDaHVuazogX19uZXh0X2FwcF9sb2FkX2NodW5rX19cbn07XG5leHBvcnQgKiBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9hcHAtcmVuZGVyL2VudHJ5LWJhc2VcIjtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFBhZ2VSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1BBR0UsXG4gICAgICAgIHBhZ2U6IFwiL3BhZ2VcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiLFxuICAgICAgICBhcHBQYXRoczogW11cbiAgICB9LFxuICAgIHVzZXJsYW5kOiB7XG4gICAgICAgIGxvYWRlclRyZWU6IHRyZWVcbiAgICB9XG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXBhZ2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/app-router.js */ \"(ssr)/./node_modules/next/dist/client/components/app-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/client-page.js */ \"(ssr)/./node_modules/next/dist/client/components/client-page.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/error-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/./node_modules/next/dist/client/components/layout-router.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/not-found-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/not-found-boundary.js\", 23));\n;\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGbWlsb2Rhdmlkc29uJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGZmlyZWJpcmQtaW50ZXJhY3RpdmUtYXR0ZW1wdDIlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZhcHAtcm91dGVyLmpzJTIyJTJDJTIyaWRzJTIyJTNBJTVCJTVEJTdEJm1vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGbWlsb2Rhdmlkc29uJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGZmlyZWJpcmQtaW50ZXJhY3RpdmUtYXR0ZW1wdDIlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZjbGllbnQtcGFnZS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZVc2VycyUyRm1pbG9kYXZpZHNvbiUyRkRvY3VtZW50cyUyRkdpdEh1YiUyRmZpcmViaXJkLWludGVyYWN0aXZlLWF0dGVtcHQyJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGZXJyb3ItYm91bmRhcnkuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGVXNlcnMlMkZtaWxvZGF2aWRzb24lMkZEb2N1bWVudHMlMkZHaXRIdWIlMkZmaXJlYmlyZC1pbnRlcmFjdGl2ZS1hdHRlbXB0MiUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRmxheW91dC1yb3V0ZXIuanMlMjIlMkMlMjJpZHMlMjIlM0ElNUIlNUQlN0QmbW9kdWxlcz0lN0IlMjJyZXF1ZXN0JTIyJTNBJTIyJTJGVXNlcnMlMkZtaWxvZGF2aWRzb24lMkZEb2N1bWVudHMlMkZHaXRIdWIlMkZmaXJlYmlyZC1pbnRlcmFjdGl2ZS1hdHRlbXB0MiUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRm5vdC1mb3VuZC1ib3VuZGFyeS5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZtb2R1bGVzPSU3QiUyMnJlcXVlc3QlMjIlM0ElMjIlMkZVc2VycyUyRm1pbG9kYXZpZHNvbiUyRkRvY3VtZW50cyUyRkdpdEh1YiUyRmZpcmViaXJkLWludGVyYWN0aXZlLWF0dGVtcHQyJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGcmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qcyUyMiUyQyUyMmlkcyUyMiUzQSU1QiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsa09BQThKO0FBQzlKO0FBQ0Esb09BQStKO0FBQy9KO0FBQ0EsME9BQWtLO0FBQ2xLO0FBQ0Esd09BQWlLO0FBQ2pLO0FBQ0Esa1BBQXNLO0FBQ3RLO0FBQ0Esc1FBQWdMIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmlyZWJpcmQtaW50ZXJhY3RpdmUvPzY1ZTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMvbWlsb2Rhdmlkc29uL0RvY3VtZW50cy9HaXRIdWIvZmlyZWJpcmQtaW50ZXJhY3RpdmUtYXR0ZW1wdDIvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9hcHAtcm91dGVyLmpzXCIpO1xuO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMvbWlsb2Rhdmlkc29uL0RvY3VtZW50cy9HaXRIdWIvZmlyZWJpcmQtaW50ZXJhY3RpdmUtYXR0ZW1wdDIvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9jbGllbnQtcGFnZS5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL1VzZXJzL21pbG9kYXZpZHNvbi9Eb2N1bWVudHMvR2l0SHViL2ZpcmViaXJkLWludGVyYWN0aXZlLWF0dGVtcHQyL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvZXJyb3ItYm91bmRhcnkuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9taWxvZGF2aWRzb24vRG9jdW1lbnRzL0dpdEh1Yi9maXJlYmlyZC1pbnRlcmFjdGl2ZS1hdHRlbXB0Mi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2xheW91dC1yb3V0ZXIuanNcIik7XG47XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9taWxvZGF2aWRzb24vRG9jdW1lbnRzL0dpdEh1Yi9maXJlYmlyZC1pbnRlcmFjdGl2ZS1hdHRlbXB0Mi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL25vdC1mb3VuZC1ib3VuZGFyeS5qc1wiKTtcbjtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL1VzZXJzL21pbG9kYXZpZHNvbi9Eb2N1bWVudHMvR2l0SHViL2ZpcmViaXJkLWludGVyYWN0aXZlLWF0dGVtcHQyL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvcmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qc1wiKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fclient-page.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js%22%2C%22ids%22%3A%5B%5D%7D&modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js%22%2C%22ids%22%3A%5B%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fsrc%2Fcomponents%2FInteractiveListeningMap.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&server=true!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fsrc%2Fcomponents%2FInteractiveListeningMap.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&server=true! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/components/InteractiveListeningMap.tsx */ \"(ssr)/./src/components/InteractiveListeningMap.tsx\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTdCJTIycmVxdWVzdCUyMiUzQSUyMiUyRlVzZXJzJTJGbWlsb2Rhdmlkc29uJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGZmlyZWJpcmQtaW50ZXJhY3RpdmUtYXR0ZW1wdDIlMkZzcmMlMkZjb21wb25lbnRzJTJGSW50ZXJhY3RpdmVMaXN0ZW5pbmdNYXAudHN4JTIyJTJDJTIyaWRzJTIyJTNBJTVCJTIyZGVmYXVsdCUyMiU1RCU3RCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsb01BQStLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmlyZWJpcmQtaW50ZXJhY3RpdmUvP2Y1YTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIsIHdlYnBhY2tFeHBvcnRzOiBbXCJkZWZhdWx0XCJdICovIFwiL1VzZXJzL21pbG9kYXZpZHNvbi9Eb2N1bWVudHMvR2l0SHViL2ZpcmViaXJkLWludGVyYWN0aXZlLWF0dGVtcHQyL3NyYy9jb21wb25lbnRzL0ludGVyYWN0aXZlTGlzdGVuaW5nTWFwLnRzeFwiKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%7B%22request%22%3A%22%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fsrc%2Fcomponents%2FInteractiveListeningMap.tsx%22%2C%22ids%22%3A%5B%22default%22%5D%7D&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./src/components/AssignedInstrument.tsx":
/*!***********************************************!*\
  !*** ./src/components/AssignedInstrument.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AssignedInstrument)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/audio/AudioService */ \"(ssr)/./src/lib/audio/AudioService.ts\");\n/* harmony import */ var _hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/hooks/usePartsStore */ \"(ssr)/./src/hooks/usePartsStore.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\nfunction AssignedInstrument({ inst }) {\n    const { soloInstanceId, setParts, setSoloInstanceId, parts } = (0,_hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_2__.usePartsStore)();\n    const isSoloed = soloInstanceId === inst.id;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        \"data-inst-id\": inst.id,\n        \"data-queued\": !!inst.isLoading,\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: 8\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        \"data-testid\": \"inst-name\",\n                        children: [\n                            inst.name,\n                            \" \",\n                            inst.hasError ? \"(File missing)\" : \"\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/AssignedInstrument.tsx\",\n                        lineNumber: 14,\n                        columnNumber: 9\n                    }, this),\n                    inst.isLoading && inst.queueScheduleTime != null && inst.queueStartTime != null && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(QueuedProgress, {\n                        scheduleTime: inst.queueScheduleTime,\n                        startTime: inst.queueStartTime\n                    }, void 0, false, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/AssignedInstrument.tsx\",\n                        lineNumber: 16,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/AssignedInstrument.tsx\",\n                lineNumber: 13,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: 8,\n                    marginTop: 4\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                        style: {\n                            fontSize: 12\n                        },\n                        children: \"Balance\"\n                    }, void 0, false, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/AssignedInstrument.tsx\",\n                        lineNumber: 20,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                        type: \"range\",\n                        min: 0,\n                        max: 100,\n                        value: inst.volumeBalance,\n                        onChange: (e)=>{\n                            const val = Number(e.target.value);\n                            _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.setBaseGainValues(inst.id, val, inst.isMuted);\n                            setParts((prev)=>prev.map((p)=>({\n                                        ...p,\n                                        assignedInstruments: p.assignedInstruments.map((ai)=>ai.id === inst.id ? {\n                                                ...ai,\n                                                volumeBalance: val\n                                            } : ai)\n                                    })));\n                        }\n                    }, void 0, false, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/AssignedInstrument.tsx\",\n                        lineNumber: 21,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        \"data-testid\": \"solo-toggle\",\n                        onClick: ()=>{\n                            const nextSolo = isSoloed ? null : inst.id;\n                            setSoloInstanceId(nextSolo);\n                            // Update base gains mute state for all instruments based on solo\n                            const all = parts.flatMap((p)=>p.assignedInstruments);\n                            for (const ai of all){\n                                const muted = nextSolo ? ai.id !== nextSolo : ai.isMuted;\n                                _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.setBaseGainValues(ai.id, ai.volumeBalance, muted);\n                            }\n                        },\n                        children: isSoloed ? \"Unsolo\" : \"Solo\"\n                    }, void 0, false, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/AssignedInstrument.tsx\",\n                        lineNumber: 32,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        \"data-testid\": \"mute-toggle\",\n                        onClick: ()=>setParts((prev)=>prev.map((p)=>({\n                                        ...p,\n                                        assignedInstruments: p.assignedInstruments.map((ai)=>ai.id === inst.id ? {\n                                                ...ai,\n                                                isMuted: !ai.isMuted\n                                            } : ai)\n                                    }))),\n                        children: inst.isMuted ? \"Unmute\" : \"Mute\"\n                    }, void 0, false, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/AssignedInstrument.tsx\",\n                        lineNumber: 46,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/AssignedInstrument.tsx\",\n                lineNumber: 19,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/AssignedInstrument.tsx\",\n        lineNumber: 12,\n        columnNumber: 5\n    }, this);\n}\nfunction QueuedProgress({ scheduleTime, startTime }) {\n    const pct = (()=>{\n        const ctx = _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.audioCtx;\n        if (!ctx) return 0;\n        const now = ctx.currentTime;\n        const total = Math.max(0.001, scheduleTime - startTime);\n        const elapsed = Math.max(0, now - startTime);\n        const p = Math.min(1, elapsed / total);\n        return Math.round(p * 100);\n    })();\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n        \"aria-label\": \"Queued\",\n        title: \"Queued\",\n        \"data-testid\": \"queued-progress\",\n        style: {\n            display: \"inline-block\",\n            width: 60,\n            height: 6,\n            background: \"#eee\",\n            borderRadius: 4,\n            overflow: \"hidden\"\n        },\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n            style: {\n                display: \"block\",\n                width: `${pct}%`,\n                height: \"100%\",\n                background: \"#999\"\n            }\n        }, void 0, false, {\n            fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/AssignedInstrument.tsx\",\n            lineNumber: 68,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/AssignedInstrument.tsx\",\n        lineNumber: 67,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9Bc3NpZ25lZEluc3RydW1lbnQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUd1RDtBQUNGO0FBRXRDLFNBQVNFLG1CQUFtQixFQUFFQyxJQUFJLEVBQW9DO0lBQ25GLE1BQU0sRUFBRUMsY0FBYyxFQUFFQyxRQUFRLEVBQUVDLGlCQUFpQixFQUFFQyxLQUFLLEVBQUUsR0FBR04sbUVBQWFBO0lBQzVFLE1BQU1PLFdBQVdKLG1CQUFtQkQsS0FBS00sRUFBRTtJQUUzQyxxQkFDRSw4REFBQ0M7UUFBSUMsZ0JBQWNSLEtBQUtNLEVBQUU7UUFBRUcsZUFBYSxDQUFDLENBQUNULEtBQUtVLFNBQVM7OzBCQUN2RCw4REFBQ0g7Z0JBQUlJLE9BQU87b0JBQUVDLFNBQVM7b0JBQVFDLFlBQVk7b0JBQVVDLEtBQUs7Z0JBQUU7O2tDQUMxRCw4REFBQ0M7d0JBQUtDLGVBQVk7OzRCQUFhaEIsS0FBS2lCLElBQUk7NEJBQUM7NEJBQUVqQixLQUFLa0IsUUFBUSxHQUFHLG1CQUFtQjs7Ozs7OztvQkFDN0VsQixLQUFLVSxTQUFTLElBQUlWLEtBQUttQixpQkFBaUIsSUFBSSxRQUFRbkIsS0FBS29CLGNBQWMsSUFBSSxzQkFDMUUsOERBQUNDO3dCQUFlQyxjQUFjdEIsS0FBS21CLGlCQUFpQjt3QkFBRUksV0FBV3ZCLEtBQUtvQixjQUFjOzs7Ozs7Ozs7Ozs7MEJBR3hGLDhEQUFDYjtnQkFBSUksT0FBTztvQkFBRUMsU0FBUztvQkFBUUMsWUFBWTtvQkFBVUMsS0FBSztvQkFBR1UsV0FBVztnQkFBRTs7a0NBQ3hFLDhEQUFDQzt3QkFBTWQsT0FBTzs0QkFBRWUsVUFBVTt3QkFBRztrQ0FBRzs7Ozs7O2tDQUNoQyw4REFBQ0M7d0JBQ0NDLE1BQUs7d0JBQ0xDLEtBQUs7d0JBQ0xDLEtBQUs7d0JBQ0xDLE9BQU8vQixLQUFLZ0MsYUFBYTt3QkFDekJDLFVBQVVDLENBQUFBOzRCQUNSLE1BQU1DLE1BQU1DLE9BQU9GLEVBQUVHLE1BQU0sQ0FBQ04sS0FBSzs0QkFDakNsQyxpRUFBWUEsQ0FBQ3lDLGlCQUFpQixDQUFDdEMsS0FBS00sRUFBRSxFQUFFNkIsS0FBS25DLEtBQUt1QyxPQUFPOzRCQUN6RHJDLFNBQVNzQyxDQUFBQSxPQUFRQSxLQUFLQyxHQUFHLENBQUNDLENBQUFBLElBQU07d0NBQUUsR0FBR0EsQ0FBQzt3Q0FBRUMscUJBQXFCRCxFQUFFQyxtQkFBbUIsQ0FBQ0YsR0FBRyxDQUFDRyxDQUFBQSxLQUFPQSxHQUFHdEMsRUFBRSxLQUFLTixLQUFLTSxFQUFFLEdBQUc7Z0RBQUUsR0FBR3NDLEVBQUU7Z0RBQUVaLGVBQWVHOzRDQUFJLElBQUlTO29DQUFLO3dCQUN6Sjs7Ozs7O2tDQUVGLDhEQUFDQzt3QkFBTzdCLGVBQVk7d0JBQ2xCOEIsU0FBUzs0QkFDUCxNQUFNQyxXQUFXMUMsV0FBVyxPQUFPTCxLQUFLTSxFQUFFOzRCQUMxQ0gsa0JBQWtCNEM7NEJBQ2xCLGlFQUFpRTs0QkFDakUsTUFBTUMsTUFBTTVDLE1BQU02QyxPQUFPLENBQUNQLENBQUFBLElBQUtBLEVBQUVDLG1CQUFtQjs0QkFDcEQsS0FBSyxNQUFNQyxNQUFNSSxJQUFLO2dDQUNwQixNQUFNRSxRQUFRSCxXQUFXSCxHQUFHdEMsRUFBRSxLQUFLeUMsV0FBV0gsR0FBR0wsT0FBTztnQ0FDeEQxQyxpRUFBWUEsQ0FBQ3lDLGlCQUFpQixDQUFDTSxHQUFHdEMsRUFBRSxFQUFFc0MsR0FBR1osYUFBYSxFQUFFa0I7NEJBQzFEO3dCQUNGO2tDQUVDN0MsV0FBVyxXQUFXOzs7Ozs7a0NBRXpCLDhEQUFDd0M7d0JBQU83QixlQUFZO3dCQUNsQjhCLFNBQVMsSUFBTTVDLFNBQVNzQyxDQUFBQSxPQUFRQSxLQUFLQyxHQUFHLENBQUNDLENBQUFBLElBQU07d0NBQUUsR0FBR0EsQ0FBQzt3Q0FBRUMscUJBQXFCRCxFQUFFQyxtQkFBbUIsQ0FBQ0YsR0FBRyxDQUFDRyxDQUFBQSxLQUFPQSxHQUFHdEMsRUFBRSxLQUFLTixLQUFLTSxFQUFFLEdBQUc7Z0RBQUUsR0FBR3NDLEVBQUU7Z0RBQUVMLFNBQVMsQ0FBQ0ssR0FBR0wsT0FBTzs0Q0FBQyxJQUFJSztvQ0FBSztrQ0FFdks1QyxLQUFLdUMsT0FBTyxHQUFHLFdBQVc7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUtyQztBQUVBLFNBQVNsQixlQUFlLEVBQUVDLFlBQVksRUFBRUMsU0FBUyxFQUErQztJQUM5RixNQUFNNEIsTUFBTSxDQUFDO1FBQ1gsTUFBTUMsTUFBTXZELGlFQUFZQSxDQUFDd0QsUUFBUTtRQUNqQyxJQUFJLENBQUNELEtBQUssT0FBTztRQUNqQixNQUFNRSxNQUFNRixJQUFJRyxXQUFXO1FBQzNCLE1BQU1DLFFBQVFDLEtBQUszQixHQUFHLENBQUMsT0FBT1IsZUFBZUM7UUFDN0MsTUFBTW1DLFVBQVVELEtBQUszQixHQUFHLENBQUMsR0FBR3dCLE1BQU0vQjtRQUNsQyxNQUFNbUIsSUFBSWUsS0FBSzVCLEdBQUcsQ0FBQyxHQUFHNkIsVUFBVUY7UUFDaEMsT0FBT0MsS0FBS0UsS0FBSyxDQUFDakIsSUFBSTtJQUN4QjtJQUNBLHFCQUNFLDhEQUFDM0I7UUFBSzZDLGNBQVc7UUFBU0MsT0FBTTtRQUFTN0MsZUFBWTtRQUFrQkwsT0FBTztZQUFFQyxTQUFTO1lBQWdCa0QsT0FBTztZQUFJQyxRQUFRO1lBQUdDLFlBQVk7WUFBUUMsY0FBYztZQUFHQyxVQUFVO1FBQVM7a0JBQ3JMLDRFQUFDbkQ7WUFBS0osT0FBTztnQkFBRUMsU0FBUztnQkFBU2tELE9BQU8sQ0FBQyxFQUFFWCxJQUFJLENBQUMsQ0FBQztnQkFBRVksUUFBUTtnQkFBUUMsWUFBWTtZQUFPOzs7Ozs7Ozs7OztBQUc1RiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZpcmViaXJkLWludGVyYWN0aXZlLy4vc3JjL2NvbXBvbmVudHMvQXNzaWduZWRJbnN0cnVtZW50LnRzeD84NDAwIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgdHlwZSB7IEFzc2lnbmVkSW5zdHJ1bWVudCBhcyBBc3NpZ25lZEluc3RydW1lbnRUeXBlIH0gZnJvbSAnQC9saWIvdHlwZXMnXG5pbXBvcnQgeyBhdWRpb1NlcnZpY2UgfSBmcm9tICdAL2xpYi9hdWRpby9BdWRpb1NlcnZpY2UnXG5pbXBvcnQgeyB1c2VQYXJ0c1N0b3JlIH0gZnJvbSAnQC9ob29rcy91c2VQYXJ0c1N0b3JlJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBc3NpZ25lZEluc3RydW1lbnQoeyBpbnN0IH06IHsgaW5zdDogQXNzaWduZWRJbnN0cnVtZW50VHlwZSB9KSB7XG4gIGNvbnN0IHsgc29sb0luc3RhbmNlSWQsIHNldFBhcnRzLCBzZXRTb2xvSW5zdGFuY2VJZCwgcGFydHMgfSA9IHVzZVBhcnRzU3RvcmUoKVxuICBjb25zdCBpc1NvbG9lZCA9IHNvbG9JbnN0YW5jZUlkID09PSBpbnN0LmlkXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGRhdGEtaW5zdC1pZD17aW5zdC5pZH0gZGF0YS1xdWV1ZWQ9eyEhaW5zdC5pc0xvYWRpbmd9PlxuICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6IDggfX0+XG4gICAgICAgIDxzcGFuIGRhdGEtdGVzdGlkPVwiaW5zdC1uYW1lXCI+e2luc3QubmFtZX0ge2luc3QuaGFzRXJyb3IgPyAnKEZpbGUgbWlzc2luZyknIDogJyd9PC9zcGFuPlxuICAgICAgICB7aW5zdC5pc0xvYWRpbmcgJiYgaW5zdC5xdWV1ZVNjaGVkdWxlVGltZSAhPSBudWxsICYmIGluc3QucXVldWVTdGFydFRpbWUgIT0gbnVsbCAmJiAoXG4gICAgICAgICAgPFF1ZXVlZFByb2dyZXNzIHNjaGVkdWxlVGltZT17aW5zdC5xdWV1ZVNjaGVkdWxlVGltZX0gc3RhcnRUaW1lPXtpbnN0LnF1ZXVlU3RhcnRUaW1lfSAvPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogOCwgbWFyZ2luVG9wOiA0IH19PlxuICAgICAgICA8bGFiZWwgc3R5bGU9e3sgZm9udFNpemU6IDEyIH19PkJhbGFuY2U8L2xhYmVsPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICB0eXBlPVwicmFuZ2VcIlxuICAgICAgICAgIG1pbj17MH1cbiAgICAgICAgICBtYXg9ezEwMH1cbiAgICAgICAgICB2YWx1ZT17aW5zdC52b2x1bWVCYWxhbmNlfVxuICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IE51bWJlcihlLnRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIGF1ZGlvU2VydmljZS5zZXRCYXNlR2FpblZhbHVlcyhpbnN0LmlkLCB2YWwsIGluc3QuaXNNdXRlZClcbiAgICAgICAgICAgIHNldFBhcnRzKHByZXYgPT4gcHJldi5tYXAocCA9PiAoeyAuLi5wLCBhc3NpZ25lZEluc3RydW1lbnRzOiBwLmFzc2lnbmVkSW5zdHJ1bWVudHMubWFwKGFpID0+IChhaS5pZCA9PT0gaW5zdC5pZCA/IHsgLi4uYWksIHZvbHVtZUJhbGFuY2U6IHZhbCB9IDogYWkpKSB9KSkpXG4gICAgICAgICAgfX1cbiAgICAgICAgLz5cbiAgICAgICAgPGJ1dHRvbiBkYXRhLXRlc3RpZD1cInNvbG8tdG9nZ2xlXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXh0U29sbyA9IGlzU29sb2VkID8gbnVsbCA6IGluc3QuaWRcbiAgICAgICAgICAgIHNldFNvbG9JbnN0YW5jZUlkKG5leHRTb2xvKVxuICAgICAgICAgICAgLy8gVXBkYXRlIGJhc2UgZ2FpbnMgbXV0ZSBzdGF0ZSBmb3IgYWxsIGluc3RydW1lbnRzIGJhc2VkIG9uIHNvbG9cbiAgICAgICAgICAgIGNvbnN0IGFsbCA9IHBhcnRzLmZsYXRNYXAocCA9PiBwLmFzc2lnbmVkSW5zdHJ1bWVudHMpXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFpIG9mIGFsbCkge1xuICAgICAgICAgICAgICBjb25zdCBtdXRlZCA9IG5leHRTb2xvID8gYWkuaWQgIT09IG5leHRTb2xvIDogYWkuaXNNdXRlZFxuICAgICAgICAgICAgICBhdWRpb1NlcnZpY2Uuc2V0QmFzZUdhaW5WYWx1ZXMoYWkuaWQsIGFpLnZvbHVtZUJhbGFuY2UsIG11dGVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICB7aXNTb2xvZWQgPyAnVW5zb2xvJyA6ICdTb2xvJ31cbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxidXR0b24gZGF0YS10ZXN0aWQ9XCJtdXRlLXRvZ2dsZVwiXG4gICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0UGFydHMocHJldiA9PiBwcmV2Lm1hcChwID0+ICh7IC4uLnAsIGFzc2lnbmVkSW5zdHJ1bWVudHM6IHAuYXNzaWduZWRJbnN0cnVtZW50cy5tYXAoYWkgPT4gKGFpLmlkID09PSBpbnN0LmlkID8geyAuLi5haSwgaXNNdXRlZDogIWFpLmlzTXV0ZWQgfSA6IGFpKSkgfSkpKX1cbiAgICAgICAgPlxuICAgICAgICAgIHtpbnN0LmlzTXV0ZWQgPyAnVW5tdXRlJyA6ICdNdXRlJ31cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKVxufVxuXG5mdW5jdGlvbiBRdWV1ZWRQcm9ncmVzcyh7IHNjaGVkdWxlVGltZSwgc3RhcnRUaW1lIH06IHsgc2NoZWR1bGVUaW1lOiBudW1iZXI7IHN0YXJ0VGltZTogbnVtYmVyIH0pIHtcbiAgY29uc3QgcGN0ID0gKCgpID0+IHtcbiAgICBjb25zdCBjdHggPSBhdWRpb1NlcnZpY2UuYXVkaW9DdHhcbiAgICBpZiAoIWN0eCkgcmV0dXJuIDBcbiAgICBjb25zdCBub3cgPSBjdHguY3VycmVudFRpbWVcbiAgICBjb25zdCB0b3RhbCA9IE1hdGgubWF4KDAuMDAxLCBzY2hlZHVsZVRpbWUgLSBzdGFydFRpbWUpXG4gICAgY29uc3QgZWxhcHNlZCA9IE1hdGgubWF4KDAsIG5vdyAtIHN0YXJ0VGltZSlcbiAgICBjb25zdCBwID0gTWF0aC5taW4oMSwgZWxhcHNlZCAvIHRvdGFsKVxuICAgIHJldHVybiBNYXRoLnJvdW5kKHAgKiAxMDApXG4gIH0pKClcbiAgcmV0dXJuIChcbiAgICA8c3BhbiBhcmlhLWxhYmVsPVwiUXVldWVkXCIgdGl0bGU9XCJRdWV1ZWRcIiBkYXRhLXRlc3RpZD1cInF1ZXVlZC1wcm9ncmVzc1wiIHN0eWxlPXt7IGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLCB3aWR0aDogNjAsIGhlaWdodDogNiwgYmFja2dyb3VuZDogJyNlZWUnLCBib3JkZXJSYWRpdXM6IDQsIG92ZXJmbG93OiAnaGlkZGVuJyB9fT5cbiAgICAgIDxzcGFuIHN0eWxlPXt7IGRpc3BsYXk6ICdibG9jaycsIHdpZHRoOiBgJHtwY3R9JWAsIGhlaWdodDogJzEwMCUnLCBiYWNrZ3JvdW5kOiAnIzk5OScgfX0gLz5cbiAgICA8L3NwYW4+XG4gIClcbn1cbiJdLCJuYW1lcyI6WyJhdWRpb1NlcnZpY2UiLCJ1c2VQYXJ0c1N0b3JlIiwiQXNzaWduZWRJbnN0cnVtZW50IiwiaW5zdCIsInNvbG9JbnN0YW5jZUlkIiwic2V0UGFydHMiLCJzZXRTb2xvSW5zdGFuY2VJZCIsInBhcnRzIiwiaXNTb2xvZWQiLCJpZCIsImRpdiIsImRhdGEtaW5zdC1pZCIsImRhdGEtcXVldWVkIiwiaXNMb2FkaW5nIiwic3R5bGUiLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsImdhcCIsInNwYW4iLCJkYXRhLXRlc3RpZCIsIm5hbWUiLCJoYXNFcnJvciIsInF1ZXVlU2NoZWR1bGVUaW1lIiwicXVldWVTdGFydFRpbWUiLCJRdWV1ZWRQcm9ncmVzcyIsInNjaGVkdWxlVGltZSIsInN0YXJ0VGltZSIsIm1hcmdpblRvcCIsImxhYmVsIiwiZm9udFNpemUiLCJpbnB1dCIsInR5cGUiLCJtaW4iLCJtYXgiLCJ2YWx1ZSIsInZvbHVtZUJhbGFuY2UiLCJvbkNoYW5nZSIsImUiLCJ2YWwiLCJOdW1iZXIiLCJ0YXJnZXQiLCJzZXRCYXNlR2FpblZhbHVlcyIsImlzTXV0ZWQiLCJwcmV2IiwibWFwIiwicCIsImFzc2lnbmVkSW5zdHJ1bWVudHMiLCJhaSIsImJ1dHRvbiIsIm9uQ2xpY2siLCJuZXh0U29sbyIsImFsbCIsImZsYXRNYXAiLCJtdXRlZCIsInBjdCIsImN0eCIsImF1ZGlvQ3R4Iiwibm93IiwiY3VycmVudFRpbWUiLCJ0b3RhbCIsIk1hdGgiLCJlbGFwc2VkIiwicm91bmQiLCJhcmlhLWxhYmVsIiwidGl0bGUiLCJ3aWR0aCIsImhlaWdodCIsImJhY2tncm91bmQiLCJib3JkZXJSYWRpdXMiLCJvdmVyZmxvdyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/components/AssignedInstrument.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/BeatDebug.tsx":
/*!**************************************!*\
  !*** ./src/components/BeatDebug.tsx ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ BeatDebug)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/hooks/usePartsStore */ \"(ssr)/./src/hooks/usePartsStore.ts\");\n/* harmony import */ var _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/audio/AudioService */ \"(ssr)/./src/lib/audio/AudioService.ts\");\n/* harmony import */ var _lib_audio_audioUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/audio/audioUtils */ \"(ssr)/./src/lib/audio/audioUtils.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\nfunction beatInLoop(beatIndex, tempo) {\n    const spb = (0,_lib_audio_audioUtils__WEBPACK_IMPORTED_MODULE_4__.secondsPerBeat)(tempo);\n    const bpl = Math.round((0,_lib_audio_audioUtils__WEBPACK_IMPORTED_MODULE_4__.loopDuration)(tempo) / spb);\n    const mod = (beatIndex % bpl + bpl) % bpl;\n    return {\n        beatInLoop: mod,\n        beatsPerLoop: bpl\n    };\n}\nfunction BeatDebug({ scheduler }) {\n    const store = (0,_hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_2__.usePartsStore)();\n    const [now, setNow] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let raf = 0;\n        const tick = ()=>{\n            const ctx = _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_3__.audioService.audioCtx;\n            setNow(ctx ? ctx.currentTime : 0);\n            raf = requestAnimationFrame(tick);\n        };\n        raf = requestAnimationFrame(tick);\n        return ()=>cancelAnimationFrame(raf);\n    }, []);\n    const data = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        const tempo = store.currentTempoRef.current;\n        const playing = store.playStateRef.current;\n        // use audible loop anchor rather than nominal transport start\n        const transport = store.loopAnchorRef?.current ?? store.transportStartRef.current;\n        const spb = (0,_lib_audio_audioUtils__WEBPACK_IMPORTED_MODULE_4__.secondsPerBeat)(tempo);\n        let currentBeat = null;\n        if (playing && transport != null) {\n            currentBeat = (0,_lib_audio_audioUtils__WEBPACK_IMPORTED_MODULE_4__.computeCurrentBeatIndex)(now, transport, tempo);\n        }\n        const sched = scheduler?.getScheduledTempoSwitch() || null;\n        let nextBeatIdx = null;\n        let targetBeatIdx = null;\n        let targetTempo = null;\n        let etaMs = null;\n        let currentInLoop = null;\n        let targetInLoop = null;\n        if (playing && transport != null) {\n            // what would be the next beat on current grid\n            nextBeatIdx = Math.floor((now - transport) / spb) + 1;\n            currentInLoop = beatInLoop(nextBeatIdx, tempo);\n        }\n        if (sched && sched.scheduleTime && playing && transport != null) {\n            targetTempo = sched.targetTempo;\n            targetBeatIdx = nextBeatIdx;\n            const tspb = (0,_lib_audio_audioUtils__WEBPACK_IMPORTED_MODULE_4__.secondsPerBeat)(targetTempo);\n            targetInLoop = targetBeatIdx != null ? beatInLoop(targetBeatIdx, targetTempo) : null;\n            etaMs = Math.max(0, sched.scheduleTime - now) * 1000;\n        }\n        return {\n            tempo,\n            now,\n            spb,\n            currentBeat,\n            nextBeatIdx,\n            currentInLoop,\n            targetTempo,\n            targetBeatIdx,\n            targetInLoop,\n            etaMs\n        };\n    }, [\n        now,\n        scheduler,\n        store\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            marginTop: 8,\n            padding: 8,\n            border: \"1px dashed #ccc\",\n            borderRadius: 8\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    fontWeight: 600,\n                    marginBottom: 4\n                },\n                children: \"Beat Debug\"\n            }, void 0, false, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/BeatDebug.tsx\",\n                lineNumber: 69,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                children: [\n                    \"Now: tempo=\",\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                        children: _hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_2__.usePartsStore.getState().tempo\n                    }, void 0, false, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/BeatDebug.tsx\",\n                        lineNumber: 71,\n                        columnNumber: 20\n                    }, this),\n                    \", currentBeat=\",\n                    data.currentBeat ?? \"-\"\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/BeatDebug.tsx\",\n                lineNumber: 70,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                children: [\n                    \"Next beat (current grid): \",\n                    data.nextBeatIdx ?? \"-\",\n                    data.currentInLoop && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: [\n                            \" (in-loop \",\n                            data.currentInLoop.beatInLoop + 1,\n                            \")\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/BeatDebug.tsx\",\n                        lineNumber: 76,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/BeatDebug.tsx\",\n                lineNumber: 73,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                children: [\n                    \"Scheduled switch: \",\n                    data.targetTempo ?? \"-\",\n                    \" \",\n                    data.etaMs != null ? `(in ${Math.round(data.etaMs)}ms)` : \"\"\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/BeatDebug.tsx\",\n                lineNumber: 79,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                children: [\n                    \"Target beat on switch: \",\n                    data.targetBeatIdx ?? \"-\",\n                    data.targetInLoop && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        children: [\n                            \" (in-loop \",\n                            data.targetInLoop.beatInLoop + 1,\n                            \")\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/BeatDebug.tsx\",\n                        lineNumber: 85,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/BeatDebug.tsx\",\n                lineNumber: 82,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/BeatDebug.tsx\",\n        lineNumber: 68,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFBVTtvQkFBZW1CLEtBQUtRLFdBQVcsSUFBSTs7Ozs7OzswQkFFakcsOERBQUNhOztvQkFBSTtvQkFDd0JyQixLQUFLVyxXQUFXLElBQUk7b0JBQzlDWCxLQUFLZSxhQUFhLGtCQUNqQiw4REFBQ2dCOzs0QkFBSzs0QkFBVy9CLEtBQUtlLGFBQWEsQ0FBQ3BDLFVBQVUsR0FBRzs0QkFBRTs7Ozs7Ozs7Ozs7OzswQkFHdkQsOERBQUMwQzs7b0JBQUk7b0JBQ2dCckIsS0FBS2EsV0FBVyxJQUFJO29CQUFJO29CQUFFYixLQUFLYyxLQUFLLElBQUksT0FBTyxDQUFDLElBQUksRUFBRTlCLEtBQUtDLEtBQUssQ0FBQ2UsS0FBS2MsS0FBSyxFQUFFLEdBQUcsQ0FBQyxHQUFHOzs7Ozs7OzBCQUV6Ryw4REFBQ087O29CQUFJO29CQUNxQnJCLEtBQUtZLGFBQWEsSUFBSTtvQkFDN0NaLEtBQUtnQixZQUFZLGtCQUNoQiw4REFBQ2U7OzRCQUFLOzRCQUFXL0IsS0FBS2dCLFlBQVksQ0FBQ3JDLFVBQVUsR0FBRzs0QkFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUs1RCIsInNvdXJjZXMiOlsid2VicGFjazovL2ZpcmViaXJkLWludGVyYWN0aXZlLy4vc3JjL2NvbXBvbmVudHMvQmVhdERlYnVnLnRzeD82ZmIzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VQYXJ0c1N0b3JlIH0gZnJvbSAnQC9ob29rcy91c2VQYXJ0c1N0b3JlJ1xuaW1wb3J0IHsgYXVkaW9TZXJ2aWNlIH0gZnJvbSAnQC9saWIvYXVkaW8vQXVkaW9TZXJ2aWNlJ1xuaW1wb3J0IHsgc2Vjb25kc1BlckJlYXQsIGxvb3BEdXJhdGlvbiwgY29tcHV0ZUN1cnJlbnRCZWF0SW5kZXggfSBmcm9tICdAL2xpYi9hdWRpby9hdWRpb1V0aWxzJ1xuaW1wb3J0IHR5cGUgeyBUZW1wbyB9IGZyb20gJ0AvbGliL3R5cGVzJ1xuaW1wb3J0IHR5cGUgeyBBdWRpb1NjaGVkdWxlciB9IGZyb20gJ0AvbGliL2F1ZGlvL0F1ZGlvU2NoZWR1bGVyJ1xuXG5mdW5jdGlvbiBiZWF0SW5Mb29wKGJlYXRJbmRleDogbnVtYmVyLCB0ZW1wbzogVGVtcG8pIHtcbiAgY29uc3Qgc3BiID0gc2Vjb25kc1BlckJlYXQodGVtcG8pXG4gIGNvbnN0IGJwbCA9IE1hdGgucm91bmQobG9vcER1cmF0aW9uKHRlbXBvKSAvIHNwYilcbiAgY29uc3QgbW9kID0gKChiZWF0SW5kZXggJSBicGwpICsgYnBsKSAlIGJwbFxuICByZXR1cm4geyBiZWF0SW5Mb29wOiBtb2QsIGJlYXRzUGVyTG9vcDogYnBsIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQmVhdERlYnVnKHsgc2NoZWR1bGVyIH06IHsgc2NoZWR1bGVyPzogQXVkaW9TY2hlZHVsZXIgfSkge1xuICBjb25zdCBzdG9yZSA9IHVzZVBhcnRzU3RvcmUoKVxuICBjb25zdCBbbm93LCBzZXROb3ddID0gdXNlU3RhdGU8bnVtYmVyPigwKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IHJhZiA9IDBcbiAgICBjb25zdCB0aWNrID0gKCkgPT4ge1xuICAgICAgY29uc3QgY3R4ID0gYXVkaW9TZXJ2aWNlLmF1ZGlvQ3R4XG4gICAgICBzZXROb3coY3R4ID8gY3R4LmN1cnJlbnRUaW1lIDogMClcbiAgICAgIHJhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKVxuICAgIH1cbiAgICByYWYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljaylcbiAgICByZXR1cm4gKCkgPT4gY2FuY2VsQW5pbWF0aW9uRnJhbWUocmFmKVxuICB9LCBbXSlcblxuICBjb25zdCBkYXRhID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgdGVtcG8gPSBzdG9yZS5jdXJyZW50VGVtcG9SZWYuY3VycmVudFxuICAgIGNvbnN0IHBsYXlpbmcgPSBzdG9yZS5wbGF5U3RhdGVSZWYuY3VycmVudFxuICAgIC8vIHVzZSBhdWRpYmxlIGxvb3AgYW5jaG9yIHJhdGhlciB0aGFuIG5vbWluYWwgdHJhbnNwb3J0IHN0YXJ0XG4gICAgY29uc3QgdHJhbnNwb3J0ID0gKHN0b3JlIGFzIGFueSkubG9vcEFuY2hvclJlZj8uY3VycmVudCA/PyBzdG9yZS50cmFuc3BvcnRTdGFydFJlZi5jdXJyZW50XG4gICAgY29uc3Qgc3BiID0gc2Vjb25kc1BlckJlYXQodGVtcG8pXG4gICAgbGV0IGN1cnJlbnRCZWF0ID0gbnVsbCBhcyBudW1iZXIgfCBudWxsXG4gICAgaWYgKHBsYXlpbmcgJiYgdHJhbnNwb3J0ICE9IG51bGwpIHtcbiAgICAgIGN1cnJlbnRCZWF0ID0gY29tcHV0ZUN1cnJlbnRCZWF0SW5kZXgobm93LCB0cmFuc3BvcnQsIHRlbXBvKVxuICAgIH1cblxuICAgIGNvbnN0IHNjaGVkID0gc2NoZWR1bGVyPy5nZXRTY2hlZHVsZWRUZW1wb1N3aXRjaCgpIHx8IG51bGxcbiAgICBsZXQgbmV4dEJlYXRJZHggPSBudWxsIGFzIG51bWJlciB8IG51bGxcbiAgICBsZXQgdGFyZ2V0QmVhdElkeCA9IG51bGwgYXMgbnVtYmVyIHwgbnVsbFxuICAgIGxldCB0YXJnZXRUZW1wbzogVGVtcG8gfCBudWxsID0gbnVsbFxuICAgIGxldCBldGFNcyA9IG51bGwgYXMgbnVtYmVyIHwgbnVsbFxuICAgIGxldCBjdXJyZW50SW5Mb29wOiB7IGJlYXRJbkxvb3A6IG51bWJlcjsgYmVhdHNQZXJMb29wOiBudW1iZXIgfSB8IG51bGwgPSBudWxsXG4gICAgbGV0IHRhcmdldEluTG9vcDogeyBiZWF0SW5Mb29wOiBudW1iZXI7IGJlYXRzUGVyTG9vcDogbnVtYmVyIH0gfCBudWxsID0gbnVsbFxuXG4gICAgaWYgKHBsYXlpbmcgJiYgdHJhbnNwb3J0ICE9IG51bGwpIHtcbiAgICAgIC8vIHdoYXQgd291bGQgYmUgdGhlIG5leHQgYmVhdCBvbiBjdXJyZW50IGdyaWRcbiAgICAgIG5leHRCZWF0SWR4ID0gTWF0aC5mbG9vcigobm93IC0gdHJhbnNwb3J0KSAvIHNwYikgKyAxXG4gICAgICBjdXJyZW50SW5Mb29wID0gYmVhdEluTG9vcChuZXh0QmVhdElkeCwgdGVtcG8pXG4gICAgfVxuICAgIGlmIChzY2hlZCAmJiBzY2hlZC5zY2hlZHVsZVRpbWUgJiYgcGxheWluZyAmJiB0cmFuc3BvcnQgIT0gbnVsbCkge1xuICAgICAgdGFyZ2V0VGVtcG8gPSBzY2hlZC50YXJnZXRUZW1wb1xuICAgICAgdGFyZ2V0QmVhdElkeCA9IG5leHRCZWF0SWR4XG4gICAgICBjb25zdCB0c3BiID0gc2Vjb25kc1BlckJlYXQodGFyZ2V0VGVtcG8pXG4gICAgICB0YXJnZXRJbkxvb3AgPSB0YXJnZXRCZWF0SWR4ICE9IG51bGwgPyBiZWF0SW5Mb29wKHRhcmdldEJlYXRJZHgsIHRhcmdldFRlbXBvKSA6IG51bGxcbiAgICAgIGV0YU1zID0gTWF0aC5tYXgoMCwgc2NoZWQuc2NoZWR1bGVUaW1lIC0gbm93KSAqIDEwMDBcbiAgICB9XG5cbiAgICByZXR1cm4geyB0ZW1wbywgbm93LCBzcGIsIGN1cnJlbnRCZWF0LCBuZXh0QmVhdElkeCwgY3VycmVudEluTG9vcCwgdGFyZ2V0VGVtcG8sIHRhcmdldEJlYXRJZHgsIHRhcmdldEluTG9vcCwgZXRhTXMgfVxuICB9LCBbbm93LCBzY2hlZHVsZXIsIHN0b3JlXSlcblxuICByZXR1cm4gKFxuICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiA4LCBwYWRkaW5nOiA4LCBib3JkZXI6ICcxcHggZGFzaGVkICNjY2MnLCBib3JkZXJSYWRpdXM6IDggfX0+XG4gICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRXZWlnaHQ6IDYwMCwgbWFyZ2luQm90dG9tOiA0IH19PkJlYXQgRGVidWc8L2Rpdj5cbiAgICAgIDxkaXY+XG4gICAgICAgIE5vdzogdGVtcG89PHN0cm9uZz57dXNlUGFydHNTdG9yZS5nZXRTdGF0ZSgpLnRlbXBvfTwvc3Ryb25nPiwgY3VycmVudEJlYXQ9e2RhdGEuY3VycmVudEJlYXQgPz8gJy0nfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2PlxuICAgICAgICBOZXh0IGJlYXQgKGN1cnJlbnQgZ3JpZCk6IHtkYXRhLm5leHRCZWF0SWR4ID8/ICctJ31cbiAgICAgICAge2RhdGEuY3VycmVudEluTG9vcCAmJiAoXG4gICAgICAgICAgPHNwYW4+IChpbi1sb29wIHtkYXRhLmN1cnJlbnRJbkxvb3AuYmVhdEluTG9vcCArIDF9KTwvc3Bhbj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdj5cbiAgICAgICAgU2NoZWR1bGVkIHN3aXRjaDoge2RhdGEudGFyZ2V0VGVtcG8gPz8gJy0nfSB7ZGF0YS5ldGFNcyAhPSBudWxsID8gYChpbiAke01hdGgucm91bmQoZGF0YS5ldGFNcyl9bXMpYCA6ICcnfVxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2PlxuICAgICAgICBUYXJnZXQgYmVhdCBvbiBzd2l0Y2g6IHtkYXRhLnRhcmdldEJlYXRJZHggPz8gJy0nfVxuICAgICAgICB7ZGF0YS50YXJnZXRJbkxvb3AgJiYgKFxuICAgICAgICAgIDxzcGFuPiAoaW4tbG9vcCB7ZGF0YS50YXJnZXRJbkxvb3AuYmVhdEluTG9vcCArIDF9KTwvc3Bhbj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlTWVtbyIsInVzZVN0YXRlIiwidXNlUGFydHNTdG9yZSIsImF1ZGlvU2VydmljZSIsInNlY29uZHNQZXJCZWF0IiwibG9vcER1cmF0aW9uIiwiY29tcHV0ZUN1cnJlbnRCZWF0SW5kZXgiLCJiZWF0SW5Mb29wIiwiYmVhdEluZGV4IiwidGVtcG8iLCJzcGIiLCJicGwiLCJNYXRoIiwicm91bmQiLCJtb2QiLCJiZWF0c1Blckxvb3AiLCJCZWF0RGVidWciLCJzY2hlZHVsZXIiLCJzdG9yZSIsIm5vdyIsInNldE5vdyIsInJhZiIsInRpY2siLCJjdHgiLCJhdWRpb0N0eCIsImN1cnJlbnRUaW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJkYXRhIiwiY3VycmVudFRlbXBvUmVmIiwiY3VycmVudCIsInBsYXlpbmciLCJwbGF5U3RhdGVSZWYiLCJ0cmFuc3BvcnQiLCJsb29wQW5jaG9yUmVmIiwidHJhbnNwb3J0U3RhcnRSZWYiLCJjdXJyZW50QmVhdCIsInNjaGVkIiwiZ2V0U2NoZWR1bGVkVGVtcG9Td2l0Y2giLCJuZXh0QmVhdElkeCIsInRhcmdldEJlYXRJZHgiLCJ0YXJnZXRUZW1wbyIsImV0YU1zIiwiY3VycmVudEluTG9vcCIsInRhcmdldEluTG9vcCIsImZsb29yIiwic2NoZWR1bGVUaW1lIiwidHNwYiIsIm1heCIsImRpdiIsInN0eWxlIiwibWFyZ2luVG9wIiwicGFkZGluZyIsImJvcmRlciIsImJvcmRlclJhZGl1cyIsImZvbnRXZWlnaHQiLCJtYXJnaW5Cb3R0b20iLCJzdHJvbmciLCJnZXRTdGF0ZSIsInNwYW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/components/BeatDebug.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/InstrumentList.tsx":
/*!*******************************************!*\
  !*** ./src/components/InstrumentList.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ InstrumentList)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_instruments__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/instruments */ \"(ssr)/./src/lib/instruments.ts\");\n/* harmony import */ var _hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/hooks/usePartsStore */ \"(ssr)/./src/hooks/usePartsStore.ts\");\n/* harmony import */ var _hooks_useAssignments__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/hooks/useAssignments */ \"(ssr)/./src/hooks/useAssignments.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\nfunction InstrumentList() {\n    const { selectedInstrument, setSelectedInstrument } = (0,_hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_2__.usePartsStore)();\n    const { addInstrument } = (0,_hooks_useAssignments__WEBPACK_IMPORTED_MODULE_3__.useAssignments)();\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                children: \"Instruments\"\n            }, void 0, false, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InstrumentList.tsx\",\n                lineNumber: 13,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                style: {\n                    color: \"#777\"\n                },\n                children: \"Drag to a part or tap to select, then tap a part.\"\n            }, void 0, false, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InstrumentList.tsx\",\n                lineNumber: 14,\n                columnNumber: 7\n            }, this),\n            _lib_instruments__WEBPACK_IMPORTED_MODULE_1__.PARTS.map((partId)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        marginTop: 8\n                    },\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            style: {\n                                fontWeight: 600,\n                                marginBottom: 4,\n                                textTransform: \"capitalize\"\n                            },\n                            children: partId\n                        }, void 0, false, {\n                            fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InstrumentList.tsx\",\n                            lineNumber: 17,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                            style: {\n                                margin: 0,\n                                paddingLeft: 16\n                            },\n                            children: _lib_instruments__WEBPACK_IMPORTED_MODULE_1__.INSTRUMENTS_BY_PART[partId].map((inst)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        draggable: true,\n                                        onDragStart: (e)=>{\n                                            e.dataTransfer.setData(\"text/partId\", partId);\n                                            e.dataTransfer.setData(\"text/instrumentId\", inst.id);\n                                            e.dataTransfer.setData(\"text/instrumentName\", inst.name);\n                                        },\n                                        onClick: ()=>setSelectedInstrument({\n                                                id: `${partId}:${inst.id}`,\n                                                name: inst.name\n                                            }),\n                                        \"aria-pressed\": selectedInstrument?.id === `${partId}:${inst.id}`,\n                                        style: {\n                                            border: selectedInstrument?.id === `${partId}:${inst.id}` ? \"2px solid #333\" : \"1px solid #ccc\",\n                                            padding: \"4px 8px\",\n                                            borderRadius: 6,\n                                            background: \"#fff\",\n                                            cursor: \"pointer\"\n                                        },\n                                        children: inst.name\n                                    }, void 0, false, {\n                                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InstrumentList.tsx\",\n                                        lineNumber: 21,\n                                        columnNumber: 17\n                                    }, this)\n                                }, `${partId}-${inst.id}`, false, {\n                                    fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InstrumentList.tsx\",\n                                    lineNumber: 20,\n                                    columnNumber: 15\n                                }, this))\n                        }, void 0, false, {\n                            fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InstrumentList.tsx\",\n                            lineNumber: 18,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, partId, true, {\n                    fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InstrumentList.tsx\",\n                    lineNumber: 16,\n                    columnNumber: 9\n                }, this))\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InstrumentList.tsx\",\n        lineNumber: 12,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9JbnN0cnVtZW50TGlzdC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUU4RDtBQUNUO0FBQ0U7QUFFeEMsU0FBU0k7SUFDdEIsTUFBTSxFQUFFQyxrQkFBa0IsRUFBRUMscUJBQXFCLEVBQUUsR0FBR0osbUVBQWFBO0lBQ25FLE1BQU0sRUFBRUssYUFBYSxFQUFFLEdBQUdKLHFFQUFjQTtJQUV4QyxxQkFDRSw4REFBQ0s7OzBCQUNDLDhEQUFDQzswQkFBRzs7Ozs7OzBCQUNKLDhEQUFDQztnQkFBRUMsT0FBTztvQkFBRUMsT0FBTztnQkFBTzswQkFBRzs7Ozs7O1lBQzVCWCxtREFBS0EsQ0FBQ1ksR0FBRyxDQUFDQyxDQUFBQSx1QkFDVCw4REFBQ047b0JBQWlCRyxPQUFPO3dCQUFFSSxXQUFXO29CQUFFOztzQ0FDdEMsOERBQUNQOzRCQUFJRyxPQUFPO2dDQUFFSyxZQUFZO2dDQUFLQyxjQUFjO2dDQUFHQyxlQUFlOzRCQUFhO3NDQUFJSjs7Ozs7O3NDQUNoRiw4REFBQ0s7NEJBQUdSLE9BQU87Z0NBQUVTLFFBQVE7Z0NBQUdDLGFBQWE7NEJBQUc7c0NBQ3JDckIsaUVBQW1CLENBQUNjLE9BQU8sQ0FBQ0QsR0FBRyxDQUFDUyxDQUFBQSxxQkFDL0IsOERBQUNDOzhDQUNDLDRFQUFDQzt3Q0FDQ0MsU0FBUzt3Q0FDVEMsYUFBYUMsQ0FBQUE7NENBQ1hBLEVBQUVDLFlBQVksQ0FBQ0MsT0FBTyxDQUFDLGVBQWVmOzRDQUN0Q2EsRUFBRUMsWUFBWSxDQUFDQyxPQUFPLENBQUMscUJBQXFCUCxLQUFLUSxFQUFFOzRDQUNuREgsRUFBRUMsWUFBWSxDQUFDQyxPQUFPLENBQUMsdUJBQXVCUCxLQUFLUyxJQUFJO3dDQUN6RDt3Q0FDQUMsU0FBUyxJQUFNMUIsc0JBQXNCO2dEQUFFd0IsSUFBSSxDQUFDLEVBQUVoQixPQUFPLENBQUMsRUFBRVEsS0FBS1EsRUFBRSxDQUFDLENBQUM7Z0RBQUVDLE1BQU1ULEtBQUtTLElBQUk7NENBQUM7d0NBQ25GRSxnQkFBYzVCLG9CQUFvQnlCLE9BQU8sQ0FBQyxFQUFFaEIsT0FBTyxDQUFDLEVBQUVRLEtBQUtRLEVBQUUsQ0FBQyxDQUFDO3dDQUMvRG5CLE9BQU87NENBQ0x1QixRQUFRN0Isb0JBQW9CeUIsT0FBTyxDQUFDLEVBQUVoQixPQUFPLENBQUMsRUFBRVEsS0FBS1EsRUFBRSxDQUFDLENBQUMsR0FBRyxtQkFBbUI7NENBQy9FSyxTQUFTOzRDQUNUQyxjQUFjOzRDQUNkQyxZQUFZOzRDQUNaQyxRQUFRO3dDQUNWO2tEQUVDaEIsS0FBS1MsSUFBSTs7Ozs7O21DQWxCTCxDQUFDLEVBQUVqQixPQUFPLENBQUMsRUFBRVEsS0FBS1EsRUFBRSxDQUFDLENBQUM7Ozs7Ozs7Ozs7O21CQUozQmhCOzs7Ozs7Ozs7OztBQStCbEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXJlYmlyZC1pbnRlcmFjdGl2ZS8uL3NyYy9jb21wb25lbnRzL0luc3RydW1lbnRMaXN0LnRzeD8zZjk1Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyBJTlNUUlVNRU5UU19CWV9QQVJULCBQQVJUUyB9IGZyb20gJ0AvbGliL2luc3RydW1lbnRzJ1xuaW1wb3J0IHsgdXNlUGFydHNTdG9yZSB9IGZyb20gJ0AvaG9va3MvdXNlUGFydHNTdG9yZSdcbmltcG9ydCB7IHVzZUFzc2lnbm1lbnRzIH0gZnJvbSAnQC9ob29rcy91c2VBc3NpZ25tZW50cydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW5zdHJ1bWVudExpc3QoKSB7XG4gIGNvbnN0IHsgc2VsZWN0ZWRJbnN0cnVtZW50LCBzZXRTZWxlY3RlZEluc3RydW1lbnQgfSA9IHVzZVBhcnRzU3RvcmUoKVxuICBjb25zdCB7IGFkZEluc3RydW1lbnQgfSA9IHVzZUFzc2lnbm1lbnRzKClcblxuICByZXR1cm4gKFxuICAgIDxkaXY+XG4gICAgICA8aDM+SW5zdHJ1bWVudHM8L2gzPlxuICAgICAgPHAgc3R5bGU9e3sgY29sb3I6ICcjNzc3JyB9fT5EcmFnIHRvIGEgcGFydCBvciB0YXAgdG8gc2VsZWN0LCB0aGVuIHRhcCBhIHBhcnQuPC9wPlxuICAgICAge1BBUlRTLm1hcChwYXJ0SWQgPT4gKFxuICAgICAgICA8ZGl2IGtleT17cGFydElkfSBzdHlsZT17eyBtYXJnaW5Ub3A6IDggfX0+XG4gICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250V2VpZ2h0OiA2MDAsIG1hcmdpbkJvdHRvbTogNCwgdGV4dFRyYW5zZm9ybTogJ2NhcGl0YWxpemUnIH19PntwYXJ0SWR9PC9kaXY+XG4gICAgICAgICAgPHVsIHN0eWxlPXt7IG1hcmdpbjogMCwgcGFkZGluZ0xlZnQ6IDE2IH19PlxuICAgICAgICAgICAge0lOU1RSVU1FTlRTX0JZX1BBUlRbcGFydElkXS5tYXAoaW5zdCA9PiAoXG4gICAgICAgICAgICAgIDxsaSBrZXk9e2Ake3BhcnRJZH0tJHtpbnN0LmlkfWB9PlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIGRyYWdnYWJsZVxuICAgICAgICAgICAgICAgICAgb25EcmFnU3RhcnQ9e2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BhcnRJZCcsIHBhcnRJZClcbiAgICAgICAgICAgICAgICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9pbnN0cnVtZW50SWQnLCBpbnN0LmlkKVxuICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L2luc3RydW1lbnROYW1lJywgaW5zdC5uYW1lKVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkSW5zdHJ1bWVudCh7IGlkOiBgJHtwYXJ0SWR9OiR7aW5zdC5pZH1gLCBuYW1lOiBpbnN0Lm5hbWUgfSl9XG4gICAgICAgICAgICAgICAgICBhcmlhLXByZXNzZWQ9e3NlbGVjdGVkSW5zdHJ1bWVudD8uaWQgPT09IGAke3BhcnRJZH06JHtpbnN0LmlkfWB9XG4gICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICBib3JkZXI6IHNlbGVjdGVkSW5zdHJ1bWVudD8uaWQgPT09IGAke3BhcnRJZH06JHtpbnN0LmlkfWAgPyAnMnB4IHNvbGlkICMzMzMnIDogJzFweCBzb2xpZCAjY2NjJyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogJzRweCA4cHgnLFxuICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDYsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICcjZmZmJyxcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcidcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge2luc3QubmFtZX1cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9saT5cbiAgICAgICAgICAgICkpfVxuICAgICAgICAgIDwvdWw+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKSl9XG4gICAgPC9kaXY+XG4gIClcbn1cblxuIl0sIm5hbWVzIjpbIklOU1RSVU1FTlRTX0JZX1BBUlQiLCJQQVJUUyIsInVzZVBhcnRzU3RvcmUiLCJ1c2VBc3NpZ25tZW50cyIsIkluc3RydW1lbnRMaXN0Iiwic2VsZWN0ZWRJbnN0cnVtZW50Iiwic2V0U2VsZWN0ZWRJbnN0cnVtZW50IiwiYWRkSW5zdHJ1bWVudCIsImRpdiIsImgzIiwicCIsInN0eWxlIiwiY29sb3IiLCJtYXAiLCJwYXJ0SWQiLCJtYXJnaW5Ub3AiLCJmb250V2VpZ2h0IiwibWFyZ2luQm90dG9tIiwidGV4dFRyYW5zZm9ybSIsInVsIiwibWFyZ2luIiwicGFkZGluZ0xlZnQiLCJpbnN0IiwibGkiLCJidXR0b24iLCJkcmFnZ2FibGUiLCJvbkRyYWdTdGFydCIsImUiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiaWQiLCJuYW1lIiwib25DbGljayIsImFyaWEtcHJlc3NlZCIsImJvcmRlciIsInBhZGRpbmciLCJib3JkZXJSYWRpdXMiLCJiYWNrZ3JvdW5kIiwiY3Vyc29yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/InstrumentList.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/InteractiveListeningMap.tsx":
/*!****************************************************!*\
  !*** ./src/components/InteractiveListeningMap.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ InteractiveListeningMap)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _PlayerControls__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./PlayerControls */ \"(ssr)/./src/components/PlayerControls.tsx\");\n/* harmony import */ var _PartsGrid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./PartsGrid */ \"(ssr)/./src/components/PartsGrid.tsx\");\n/* harmony import */ var _InstrumentList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./InstrumentList */ \"(ssr)/./src/components/InstrumentList.tsx\");\n/* harmony import */ var _hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/hooks/usePartsStore */ \"(ssr)/./src/hooks/usePartsStore.ts\");\n/* harmony import */ var _lib_audio_AudioScheduler__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/audio/AudioScheduler */ \"(ssr)/./src/lib/audio/AudioScheduler.ts\");\n/* harmony import */ var _hooks_useAudioInspector__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/hooks/useAudioInspector */ \"(ssr)/./src/hooks/useAudioInspector.ts\");\n/* harmony import */ var _BeatDebug__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./BeatDebug */ \"(ssr)/./src/components/BeatDebug.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n\n\nfunction InteractiveListeningMap() {\n    const store = (0,_hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_5__.usePartsStore)();\n    const scheduler = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>new _lib_audio_AudioScheduler__WEBPACK_IMPORTED_MODULE_6__.AudioScheduler({\n            partsRef: store.partsRef,\n            playStateRef: store.playStateRef,\n            transportStartRef: store.transportStartRef,\n            currentTempoRef: store.currentTempoRef,\n            deferredQueueRef: store.deferredQueueRef,\n            removedInstanceIdsRef: store.removedInstanceIdsRef,\n            nodeStartTimesRef: store.nodeStartTimesRef,\n            loopAnchorRef: store.loopAnchorRef,\n            setParts: store.setParts\n        }), []);\n    (0,_hooks_useAudioInspector__WEBPACK_IMPORTED_MODULE_7__.useAudioInspector)(scheduler);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            display: \"grid\",\n            gridTemplateColumns: \"260px 1fr\",\n            gap: 16,\n            padding: 16\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                        style: {\n                            margin: 0,\n                            fontSize: 20\n                        },\n                        children: \"Interactive Listening Map\"\n                    }, void 0, false, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InteractiveListeningMap.tsx\",\n                        lineNumber: 34,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        style: {\n                            color: \"#555\"\n                        },\n                        children: \"Assign instruments to parts and play.\"\n                    }, void 0, false, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InteractiveListeningMap.tsx\",\n                        lineNumber: 35,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_PlayerControls__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                        scheduler: scheduler\n                    }, void 0, false, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InteractiveListeningMap.tsx\",\n                        lineNumber: 36,\n                        columnNumber: 3\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_BeatDebug__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                        scheduler: scheduler\n                    }, void 0, false, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InteractiveListeningMap.tsx\",\n                        lineNumber: 37,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_InstrumentList__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {}, void 0, false, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InteractiveListeningMap.tsx\",\n                        lineNumber: 38,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InteractiveListeningMap.tsx\",\n                lineNumber: 33,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_PartsGrid__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {}, void 0, false, {\n                    fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InteractiveListeningMap.tsx\",\n                    lineNumber: 41,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InteractiveListeningMap.tsx\",\n                lineNumber: 40,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InteractiveListeningMap.tsx\",\n        lineNumber: 32,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9JbnRlcmFjdGl2ZUxpc3RlbmluZ01hcC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUUwQztBQUNHO0FBQ1Y7QUFDVTtBQUNRO0FBQ007QUFDRTtBQUMxQjtBQUVwQixTQUFTUTtJQUN0QixNQUFNQyxRQUFRTCxtRUFBYUE7SUFDM0IsTUFBTU0sWUFBWVYsOENBQU9BLENBQ3ZCLElBQ0UsSUFBSUsscUVBQWNBLENBQUM7WUFDakJNLFVBQVVGLE1BQU1FLFFBQVE7WUFDeEJDLGNBQWNILE1BQU1HLFlBQVk7WUFDaENDLG1CQUFtQkosTUFBTUksaUJBQWlCO1lBQzFDQyxpQkFBaUJMLE1BQU1LLGVBQWU7WUFDdENDLGtCQUFrQk4sTUFBTU0sZ0JBQWdCO1lBQ3hDQyx1QkFBdUJQLE1BQU1PLHFCQUFxQjtZQUNsREMsbUJBQW1CUixNQUFNUSxpQkFBaUI7WUFDMUNDLGVBQWVULE1BQU1TLGFBQWE7WUFDbENDLFVBQVVWLE1BQU1VLFFBQVE7UUFDMUIsSUFDRixFQUFFO0lBRUpiLDJFQUFpQkEsQ0FBQ0k7SUFFbEIscUJBQ0UsOERBQUNVO1FBQUlDLE9BQU87WUFBRUMsU0FBUztZQUFRQyxxQkFBcUI7WUFBYUMsS0FBSztZQUFJQyxTQUFTO1FBQUc7OzBCQUNwRiw4REFBQ0w7O2tDQUNDLDhEQUFDTTt3QkFBR0wsT0FBTzs0QkFBRU0sUUFBUTs0QkFBR0MsVUFBVTt3QkFBRztrQ0FBRzs7Ozs7O2tDQUN4Qyw4REFBQ0M7d0JBQUVSLE9BQU87NEJBQUVTLE9BQU87d0JBQU87a0NBQUc7Ozs7OztrQ0FDbkMsOERBQUM3Qix1REFBY0E7d0JBQUNTLFdBQVdBOzs7Ozs7a0NBQ3JCLDhEQUFDSCxrREFBU0E7d0JBQUNHLFdBQVdBOzs7Ozs7a0NBQ3RCLDhEQUFDUCx1REFBY0E7Ozs7Ozs7Ozs7OzBCQUVqQiw4REFBQ2lCOzBCQUNDLDRFQUFDbEIsa0RBQVNBOzs7Ozs7Ozs7Ozs7Ozs7O0FBSWxCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmlyZWJpcmQtaW50ZXJhY3RpdmUvLi9zcmMvY29tcG9uZW50cy9JbnRlcmFjdGl2ZUxpc3RlbmluZ01hcC50c3g/MTQ1NyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgUGxheWVyQ29udHJvbHMgZnJvbSAnLi9QbGF5ZXJDb250cm9scydcbmltcG9ydCBQYXJ0c0dyaWQgZnJvbSAnLi9QYXJ0c0dyaWQnXG5pbXBvcnQgSW5zdHJ1bWVudExpc3QgZnJvbSAnLi9JbnN0cnVtZW50TGlzdCdcbmltcG9ydCB7IHVzZVBhcnRzU3RvcmUgfSBmcm9tICdAL2hvb2tzL3VzZVBhcnRzU3RvcmUnXG5pbXBvcnQgeyBBdWRpb1NjaGVkdWxlciB9IGZyb20gJ0AvbGliL2F1ZGlvL0F1ZGlvU2NoZWR1bGVyJ1xuaW1wb3J0IHsgdXNlQXVkaW9JbnNwZWN0b3IgfSBmcm9tICdAL2hvb2tzL3VzZUF1ZGlvSW5zcGVjdG9yJ1xuaW1wb3J0IEJlYXREZWJ1ZyBmcm9tICcuL0JlYXREZWJ1ZydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW50ZXJhY3RpdmVMaXN0ZW5pbmdNYXAoKSB7XG4gIGNvbnN0IHN0b3JlID0gdXNlUGFydHNTdG9yZSgpXG4gIGNvbnN0IHNjaGVkdWxlciA9IHVzZU1lbW8oXG4gICAgKCkgPT5cbiAgICAgIG5ldyBBdWRpb1NjaGVkdWxlcih7XG4gICAgICAgIHBhcnRzUmVmOiBzdG9yZS5wYXJ0c1JlZixcbiAgICAgICAgcGxheVN0YXRlUmVmOiBzdG9yZS5wbGF5U3RhdGVSZWYsXG4gICAgICAgIHRyYW5zcG9ydFN0YXJ0UmVmOiBzdG9yZS50cmFuc3BvcnRTdGFydFJlZixcbiAgICAgICAgY3VycmVudFRlbXBvUmVmOiBzdG9yZS5jdXJyZW50VGVtcG9SZWYsXG4gICAgICAgIGRlZmVycmVkUXVldWVSZWY6IHN0b3JlLmRlZmVycmVkUXVldWVSZWYsXG4gICAgICAgIHJlbW92ZWRJbnN0YW5jZUlkc1JlZjogc3RvcmUucmVtb3ZlZEluc3RhbmNlSWRzUmVmLFxuICAgICAgICBub2RlU3RhcnRUaW1lc1JlZjogc3RvcmUubm9kZVN0YXJ0VGltZXNSZWYsXG4gICAgICAgIGxvb3BBbmNob3JSZWY6IHN0b3JlLmxvb3BBbmNob3JSZWYsXG4gICAgICAgIHNldFBhcnRzOiBzdG9yZS5zZXRQYXJ0c1xuICAgICAgfSksXG4gICAgW11cbiAgKVxuICB1c2VBdWRpb0luc3BlY3RvcihzY2hlZHVsZXIpXG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogJzI2MHB4IDFmcicsIGdhcDogMTYsIHBhZGRpbmc6IDE2IH19PlxuICAgICAgPGRpdj5cbiAgICAgICAgPGgxIHN0eWxlPXt7IG1hcmdpbjogMCwgZm9udFNpemU6IDIwIH19PkludGVyYWN0aXZlIExpc3RlbmluZyBNYXA8L2gxPlxuICAgICAgICA8cCBzdHlsZT17eyBjb2xvcjogJyM1NTUnIH19PkFzc2lnbiBpbnN0cnVtZW50cyB0byBwYXJ0cyBhbmQgcGxheS48L3A+XG4gIDxQbGF5ZXJDb250cm9scyBzY2hlZHVsZXI9e3NjaGVkdWxlcn0gLz5cbiAgICAgICAgPEJlYXREZWJ1ZyBzY2hlZHVsZXI9e3NjaGVkdWxlcn0gLz5cbiAgICAgICAgPEluc3RydW1lbnRMaXN0IC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXY+XG4gICAgICAgIDxQYXJ0c0dyaWQgLz5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApXG59XG4iXSwibmFtZXMiOlsidXNlTWVtbyIsIlBsYXllckNvbnRyb2xzIiwiUGFydHNHcmlkIiwiSW5zdHJ1bWVudExpc3QiLCJ1c2VQYXJ0c1N0b3JlIiwiQXVkaW9TY2hlZHVsZXIiLCJ1c2VBdWRpb0luc3BlY3RvciIsIkJlYXREZWJ1ZyIsIkludGVyYWN0aXZlTGlzdGVuaW5nTWFwIiwic3RvcmUiLCJzY2hlZHVsZXIiLCJwYXJ0c1JlZiIsInBsYXlTdGF0ZVJlZiIsInRyYW5zcG9ydFN0YXJ0UmVmIiwiY3VycmVudFRlbXBvUmVmIiwiZGVmZXJyZWRRdWV1ZVJlZiIsInJlbW92ZWRJbnN0YW5jZUlkc1JlZiIsIm5vZGVTdGFydFRpbWVzUmVmIiwibG9vcEFuY2hvclJlZiIsInNldFBhcnRzIiwiZGl2Iiwic3R5bGUiLCJkaXNwbGF5IiwiZ3JpZFRlbXBsYXRlQ29sdW1ucyIsImdhcCIsInBhZGRpbmciLCJoMSIsIm1hcmdpbiIsImZvbnRTaXplIiwicCIsImNvbG9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/components/InteractiveListeningMap.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/PartCard.tsx":
/*!*************************************!*\
  !*** ./src/components/PartCard.tsx ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PartCard)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/hooks/usePartsStore */ \"(ssr)/./src/hooks/usePartsStore.ts\");\n/* harmony import */ var _hooks_useAssignments__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/hooks/useAssignments */ \"(ssr)/./src/hooks/useAssignments.ts\");\n/* harmony import */ var _components_AssignedInstrument__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/AssignedInstrument */ \"(ssr)/./src/components/AssignedInstrument.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\nfunction PartCard({ partId }) {\n    const { parts } = (0,_hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_1__.usePartsStore)();\n    const { addInstrument, removeInstrument } = (0,_hooks_useAssignments__WEBPACK_IMPORTED_MODULE_2__.useAssignments)();\n    const { selectedInstrument, setSelectedInstrument } = (0,_hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_1__.usePartsStore)();\n    const part = parts.find((p)=>p.id === partId);\n    if (!part) return null;\n    const atCapacity = part.assignedInstruments.length >= 4;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        onDragOver: (e)=>e.preventDefault(),\n        onDrop: (e)=>{\n            const dropPartId = e.dataTransfer.getData(\"text/partId\");\n            const instrumentId = e.dataTransfer.getData(\"text/instrumentId\");\n            const instrumentName = e.dataTransfer.getData(\"text/instrumentName\");\n            if (dropPartId && instrumentId) {\n                // prevent duplicates and capacity\n                if (part.assignedInstruments.some((ai)=>ai.instrumentId === instrumentId)) return;\n                if (atCapacity) return;\n                addInstrument(partId, instrumentId, instrumentName);\n            }\n        },\n        onClick: ()=>{\n            if (selectedInstrument) {\n                const [selPart, instId] = selectedInstrument.id.split(\":\");\n                if (selPart === partId) {\n                    if (part.assignedInstruments.some((ai)=>ai.instrumentId === instId)) return;\n                    if (atCapacity) return;\n                    addInstrument(partId, instId, selectedInstrument.name);\n                    setSelectedInstrument(null);\n                }\n            }\n        },\n        style: {\n            border: \"1px solid #ddd\",\n            borderRadius: 8,\n            padding: 12,\n            opacity: atCapacity ? 0.6 : 1\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    fontWeight: 600,\n                    marginBottom: 8\n                },\n                \"data-testid\": `part-${part.id}`,\n                children: [\n                    part.name,\n                    \" \",\n                    atCapacity ? \"(full)\" : \"\"\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PartCard.tsx\",\n                lineNumber: 41,\n                columnNumber: 7\n            }, this),\n            part.assignedInstruments.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    color: \"#888\"\n                },\n                children: \"Drop or tap to add\"\n            }, void 0, false, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PartCard.tsx\",\n                lineNumber: 43,\n                columnNumber: 9\n            }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                style: {\n                    margin: 0,\n                    paddingLeft: 16\n                },\n                children: part.assignedInstruments.map((inst)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                        style: {\n                            marginBottom: 8\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AssignedInstrument__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                inst: inst\n                            }, void 0, false, {\n                                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PartCard.tsx\",\n                                lineNumber: 48,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>removeInstrument(inst.id),\n                                \"aria-label\": `Remove ${inst.name}`,\n                                style: {\n                                    marginTop: 4\n                                },\n                                children: \"Remove\"\n                            }, void 0, false, {\n                                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PartCard.tsx\",\n                                lineNumber: 49,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, inst.id, true, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PartCard.tsx\",\n                        lineNumber: 47,\n                        columnNumber: 13\n                    }, this))\n            }, void 0, false, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PartCard.tsx\",\n                lineNumber: 45,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PartCard.tsx\",\n        lineNumber: 15,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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IndlYnBhY2s6Ly9maXJlYmlyZC1pbnRlcmFjdGl2ZS8uL3NyYy9jb21wb25lbnRzL1BhcnRDYXJkLnRzeD9hNGIxIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VQYXJ0c1N0b3JlIH0gZnJvbSAnQC9ob29rcy91c2VQYXJ0c1N0b3JlJ1xuaW1wb3J0IHsgdXNlQXNzaWdubWVudHMgfSBmcm9tICdAL2hvb2tzL3VzZUFzc2lnbm1lbnRzJ1xuaW1wb3J0IEFzc2lnbmVkSW5zdHJ1bWVudCBmcm9tICdAL2NvbXBvbmVudHMvQXNzaWduZWRJbnN0cnVtZW50J1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQYXJ0Q2FyZCh7IHBhcnRJZCB9OiB7IHBhcnRJZDogJ21lbG9keScgfCAnaGFybW9ueScgfCAncmh5dGhtJyB8ICd0ZXh0dXJlJyB9KSB7XG4gIGNvbnN0IHsgcGFydHMgfSA9IHVzZVBhcnRzU3RvcmUoKVxuICBjb25zdCB7IGFkZEluc3RydW1lbnQsIHJlbW92ZUluc3RydW1lbnQgfSA9IHVzZUFzc2lnbm1lbnRzKClcbiAgY29uc3QgeyBzZWxlY3RlZEluc3RydW1lbnQsIHNldFNlbGVjdGVkSW5zdHJ1bWVudCB9ID0gdXNlUGFydHNTdG9yZSgpXG4gIGNvbnN0IHBhcnQgPSBwYXJ0cy5maW5kKChwKSA9PiBwLmlkID09PSBwYXJ0SWQpXG4gIGlmICghcGFydCkgcmV0dXJuIG51bGxcbiAgY29uc3QgYXRDYXBhY2l0eSA9IHBhcnQuYXNzaWduZWRJbnN0cnVtZW50cy5sZW5ndGggPj0gNFxuICByZXR1cm4gKFxuICAgIDxkaXZcbiAgICAgIG9uRHJhZ092ZXI9e2UgPT4gZS5wcmV2ZW50RGVmYXVsdCgpfVxuICAgICAgb25Ecm9wPXtlID0+IHtcbiAgICAgICAgY29uc3QgZHJvcFBhcnRJZCA9IGUuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGFydElkJykgYXMgJ21lbG9keScgfCAnaGFybW9ueScgfCAncmh5dGhtJyB8ICd0ZXh0dXJlJ1xuICAgICAgICBjb25zdCBpbnN0cnVtZW50SWQgPSBlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L2luc3RydW1lbnRJZCcpXG4gICAgICAgIGNvbnN0IGluc3RydW1lbnROYW1lID0gZS5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9pbnN0cnVtZW50TmFtZScpXG4gICAgICAgIGlmIChkcm9wUGFydElkICYmIGluc3RydW1lbnRJZCkge1xuICAgICAgICAgIC8vIHByZXZlbnQgZHVwbGljYXRlcyBhbmQgY2FwYWNpdHlcbiAgICAgICAgICBpZiAocGFydC5hc3NpZ25lZEluc3RydW1lbnRzLnNvbWUoYWkgPT4gYWkuaW5zdHJ1bWVudElkID09PSBpbnN0cnVtZW50SWQpKSByZXR1cm5cbiAgICAgICAgICBpZiAoYXRDYXBhY2l0eSkgcmV0dXJuXG4gICAgICAgICAgYWRkSW5zdHJ1bWVudChwYXJ0SWQsIGluc3RydW1lbnRJZCwgaW5zdHJ1bWVudE5hbWUpXG4gICAgICAgIH1cbiAgICAgIH19XG4gICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgIGlmIChzZWxlY3RlZEluc3RydW1lbnQpIHtcbiAgICAgICAgICBjb25zdCBbc2VsUGFydCwgaW5zdElkXSA9IHNlbGVjdGVkSW5zdHJ1bWVudC5pZC5zcGxpdCgnOicpXG4gICAgICAgICAgaWYgKHNlbFBhcnQgPT09IHBhcnRJZCkge1xuICAgICAgICAgICAgaWYgKHBhcnQuYXNzaWduZWRJbnN0cnVtZW50cy5zb21lKGFpID0+IGFpLmluc3RydW1lbnRJZCA9PT0gaW5zdElkKSkgcmV0dXJuXG4gICAgICAgICAgICBpZiAoYXRDYXBhY2l0eSkgcmV0dXJuXG4gICAgICAgICAgICBhZGRJbnN0cnVtZW50KHBhcnRJZCwgaW5zdElkLCBzZWxlY3RlZEluc3RydW1lbnQubmFtZSlcbiAgICAgICAgICAgIHNldFNlbGVjdGVkSW5zdHJ1bWVudChudWxsKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfX1cbiAgICAgIHN0eWxlPXt7IGJvcmRlcjogJzFweCBzb2xpZCAjZGRkJywgYm9yZGVyUmFkaXVzOiA4LCBwYWRkaW5nOiAxMiwgb3BhY2l0eTogYXRDYXBhY2l0eSA/IDAuNiA6IDEgfX1cbiAgICA+XG4gICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRXZWlnaHQ6IDYwMCwgbWFyZ2luQm90dG9tOiA4IH19IGRhdGEtdGVzdGlkPXtgcGFydC0ke3BhcnQuaWR9YH0+e3BhcnQubmFtZX0ge2F0Q2FwYWNpdHkgPyAnKGZ1bGwpJyA6ICcnfTwvZGl2PlxuICAgICAge3BhcnQuYXNzaWduZWRJbnN0cnVtZW50cy5sZW5ndGggPT09IDAgPyAoXG4gICAgICAgIDxkaXYgc3R5bGU9e3sgY29sb3I6ICcjODg4JyB9fT5Ecm9wIG9yIHRhcCB0byBhZGQ8L2Rpdj5cbiAgICAgICkgOiAoXG4gICAgICAgIDx1bCBzdHlsZT17eyBtYXJnaW46IDAsIHBhZGRpbmdMZWZ0OiAxNiB9fT5cbiAgICAgICAgICB7cGFydC5hc3NpZ25lZEluc3RydW1lbnRzLm1hcCgoaW5zdCkgPT4gKFxuICAgICAgICAgICAgPGxpIGtleT17aW5zdC5pZH0gc3R5bGU9e3sgbWFyZ2luQm90dG9tOiA4IH19PlxuICAgICAgICAgICAgICA8QXNzaWduZWRJbnN0cnVtZW50IGluc3Q9e2luc3R9IC8+XG4gICAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCkgPT4gcmVtb3ZlSW5zdHJ1bWVudChpbnN0LmlkKX0gYXJpYS1sYWJlbD17YFJlbW92ZSAke2luc3QubmFtZX1gfSBzdHlsZT17eyBtYXJnaW5Ub3A6IDQgfX0+UmVtb3ZlPC9idXR0b24+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgICkpfVxuICAgICAgICA8L3VsPlxuICAgICAgKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIl0sIm5hbWVzIjpbInVzZVBhcnRzU3RvcmUiLCJ1c2VBc3NpZ25tZW50cyIsIkFzc2lnbmVkSW5zdHJ1bWVudCIsIlBhcnRDYXJkIiwicGFydElkIiwicGFydHMiLCJhZGRJbnN0cnVtZW50IiwicmVtb3ZlSW5zdHJ1bWVudCIsInNlbGVjdGVkSW5zdHJ1bWVudCIsInNldFNlbGVjdGVkSW5zdHJ1bWVudCIsInBhcnQiLCJmaW5kIiwicCIsImlkIiwiYXRDYXBhY2l0eSIsImFzc2lnbmVkSW5zdHJ1bWVudHMiLCJsZW5ndGgiLCJkaXYiLCJvbkRyYWdPdmVyIiwiZSIsInByZXZlbnREZWZhdWx0Iiwib25Ecm9wIiwiZHJvcFBhcnRJZCIsImRhdGFUcmFuc2ZlciIsImdldERhdGEiLCJpbnN0cnVtZW50SWQiLCJpbnN0cnVtZW50TmFtZSIsInNvbWUiLCJhaSIsIm9uQ2xpY2siLCJzZWxQYXJ0IiwiaW5zdElkIiwic3BsaXQiLCJuYW1lIiwic3R5bGUiLCJib3JkZXIiLCJib3JkZXJSYWRpdXMiLCJwYWRkaW5nIiwib3BhY2l0eSIsImZvbnRXZWlnaHQiLCJtYXJnaW5Cb3R0b20iLCJkYXRhLXRlc3RpZCIsImNvbG9yIiwidWwiLCJtYXJnaW4iLCJwYWRkaW5nTGVmdCIsIm1hcCIsImluc3QiLCJsaSIsImJ1dHRvbiIsImFyaWEtbGFiZWwiLCJtYXJnaW5Ub3AiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/components/PartCard.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/PartsGrid.tsx":
/*!**************************************!*\
  !*** ./src/components/PartsGrid.tsx ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PartsGrid)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/hooks/usePartsStore */ \"(ssr)/./src/hooks/usePartsStore.ts\");\n/* harmony import */ var _components_PartCard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/PartCard */ \"(ssr)/./src/components/PartCard.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\nfunction PartsGrid() {\n    const { parts } = (0,_hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_1__.usePartsStore)();\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            display: \"grid\",\n            gridTemplateColumns: \"1fr 1fr\",\n            gap: 12\n        },\n        children: parts.map((p)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_PartCard__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                partId: p.id\n            }, p.id, false, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PartsGrid.tsx\",\n                lineNumber: 11,\n                columnNumber: 9\n            }, this))\n    }, void 0, false, {\n        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PartsGrid.tsx\",\n        lineNumber: 9,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvY29tcG9uZW50cy9QYXJ0c0dyaWQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUVxRDtBQUNUO0FBRTdCLFNBQVNFO0lBQ3RCLE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUdILG1FQUFhQTtJQUMvQixxQkFDRSw4REFBQ0k7UUFBSUMsT0FBTztZQUFFQyxTQUFTO1lBQVFDLHFCQUFxQjtZQUFXQyxLQUFLO1FBQUc7a0JBQ3BFTCxNQUFNTSxHQUFHLENBQUMsQ0FBQ0Msa0JBQ1YsOERBQUNULDREQUFRQTtnQkFBWVUsUUFBUUQsRUFBRUUsRUFBRTtlQUFsQkYsRUFBRUUsRUFBRTs7Ozs7Ozs7OztBQUkzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2ZpcmViaXJkLWludGVyYWN0aXZlLy4vc3JjL2NvbXBvbmVudHMvUGFydHNHcmlkLnRzeD8wZThmIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VQYXJ0c1N0b3JlIH0gZnJvbSAnQC9ob29rcy91c2VQYXJ0c1N0b3JlJ1xuaW1wb3J0IFBhcnRDYXJkIGZyb20gJ0AvY29tcG9uZW50cy9QYXJ0Q2FyZCdcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGFydHNHcmlkKCkge1xuICBjb25zdCB7IHBhcnRzIH0gPSB1c2VQYXJ0c1N0b3JlKClcbiAgcmV0dXJuIChcbiAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdncmlkJywgZ3JpZFRlbXBsYXRlQ29sdW1uczogJzFmciAxZnInLCBnYXA6IDEyIH19PlxuICAgICAge3BhcnRzLm1hcCgocCkgPT4gKFxuICAgICAgICA8UGFydENhcmQga2V5PXtwLmlkfSBwYXJ0SWQ9e3AuaWR9IC8+XG4gICAgICApKX1cbiAgICA8L2Rpdj5cbiAgKVxufVxuIl0sIm5hbWVzIjpbInVzZVBhcnRzU3RvcmUiLCJQYXJ0Q2FyZCIsIlBhcnRzR3JpZCIsInBhcnRzIiwiZGl2Iiwic3R5bGUiLCJkaXNwbGF5IiwiZ3JpZFRlbXBsYXRlQ29sdW1ucyIsImdhcCIsIm1hcCIsInAiLCJwYXJ0SWQiLCJpZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/components/PartsGrid.tsx\n");

/***/ }),

/***/ "(ssr)/./src/components/PlayerControls.tsx":
/*!*******************************************!*\
  !*** ./src/components/PlayerControls.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ PlayerControls),\n/* harmony export */   useSpaceToToggle: () => (/* binding */ useSpaceToToggle)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/hooks/usePartsStore */ \"(ssr)/./src/hooks/usePartsStore.ts\");\n/* harmony import */ var _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/audio/AudioService */ \"(ssr)/./src/lib/audio/AudioService.ts\");\n/* harmony import */ var _hooks_useSpaceToggle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/hooks/useSpaceToggle */ \"(ssr)/./src/hooks/useSpaceToggle.ts\");\n/* __next_internal_client_entry_do_not_use__ default,useSpaceToToggle auto */ \n\n\n\n\nfunction PlayerControls({ scheduler } = {}) {\n    const { play, tempo, setPlay, setTempo, transportStartRef, currentTempoRef, setParts, deferredQueueRef } = (0,_hooks_usePartsStore__WEBPACK_IMPORTED_MODULE_2__.usePartsStore)();\n    const onToggle = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_3__.audioService.initIfNeeded();\n        if (!_lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_3__.audioService.audioCtx) return;\n        if (_lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_3__.audioService.audioCtx.state === \"suspended\") await _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_3__.audioService.audioCtx.resume();\n        if (!play) {\n            setPlay(true);\n            transportStartRef.current = _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_3__.audioService.audioCtx.currentTime;\n            if (scheduler) scheduler.scheduleLoopStartIfNeeded();\n        } else {\n            setPlay(false);\n            _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_3__.audioService.stopAllActive(50);\n            scheduler?.stop();\n        }\n    }, [\n        play,\n        scheduler,\n        setPlay,\n        transportStartRef\n    ]);\n    (0,_hooks_useSpaceToggle__WEBPACK_IMPORTED_MODULE_4__.useSpaceToggle)(onToggle);\n    const onClear = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        // reset state and stop audio\n        setPlay(false);\n        _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_3__.audioService.stopAllActive(50);\n        transportStartRef.current = null;\n        currentTempoRef.current = \"fast\";\n        setTempo(\"fast\");\n        deferredQueueRef.current = [];\n        setParts(()=>[\n                {\n                    id: \"melody\",\n                    name: \"Melody\",\n                    assignedInstruments: []\n                },\n                {\n                    id: \"harmony\",\n                    name: \"Harmony\",\n                    assignedInstruments: []\n                },\n                {\n                    id: \"rhythm\",\n                    name: \"Rhythm\",\n                    assignedInstruments: []\n                },\n                {\n                    id: \"texture\",\n                    name: \"Texture\",\n                    assignedInstruments: []\n                }\n            ]);\n    }, [\n        setPlay,\n        transportStartRef,\n        currentTempoRef,\n        deferredQueueRef,\n        setParts\n    ]);\n    const onTempoChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (e)=>{\n        const t = e.target.value;\n        setTempo(t);\n        if (play && scheduler) {\n            await scheduler.scheduleTempoSwitch(t);\n        }\n    }, [\n        play,\n        scheduler,\n        setTempo\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            display: \"flex\",\n            gap: 8,\n            alignItems: \"center\",\n            margin: \"8px 0\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: onToggle,\n                \"aria-label\": play ? \"Pause\" : \"Play\",\n                children: play ? \"Pause\" : \"Play\"\n            }, void 0, false, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PlayerControls.tsx\",\n                lineNumber: 60,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                children: [\n                    \"Tempo:\",\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                        value: tempo,\n                        onChange: onTempoChange,\n                        \"aria-label\": \"Tempo\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"fast\",\n                                children: \"Fast\"\n                            }, void 0, false, {\n                                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PlayerControls.tsx\",\n                                lineNumber: 64,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                value: \"slow\",\n                                children: \"Slow\"\n                            }, void 0, false, {\n                                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PlayerControls.tsx\",\n                                lineNumber: 65,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PlayerControls.tsx\",\n                        lineNumber: 63,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PlayerControls.tsx\",\n                lineNumber: 61,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: onClear,\n                children: \"Clear\"\n            }, void 0, false, {\n                fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PlayerControls.tsx\",\n                lineNumber: 68,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/PlayerControls.tsx\",\n        lineNumber: 59,\n        columnNumber: 5\n    }, this);\n}\n// Attach Space key to toggle play/pause, ignoring typing in inputs\nfunction useSpaceToToggle(onToggle) {\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handler = (e)=>{\n            if (e.code !== \"Space\") return;\n            const target = e.target;\n            const tag = (target?.tagName || \"\").toLowerCase();\n            if (tag === \"input\" || tag === \"textarea\" || tag === \"select\" || target?.isContentEditable) return;\n            e.preventDefault();\n            onToggle();\n        };\n        window.addEventListener(\"keydown\", handler);\n        return ()=>window.removeEventListener(\"keydown\", handler);\n    }, [\n        onToggle\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDO1FBQ1IsTUFBTWdELFVBQVUsQ0FBQ25CO1lBQ2YsSUFBSUEsRUFBRW9CLElBQUksS0FBSyxTQUFTO1lBQ3hCLE1BQU1sQixTQUFTRixFQUFFRSxNQUFNO1lBQ3ZCLE1BQU1tQixNQUFNLENBQUNuQixRQUFRb0IsV0FBVyxFQUFDLEVBQUdDLFdBQVc7WUFDL0MsSUFBSUYsUUFBUSxXQUFXQSxRQUFRLGNBQWNBLFFBQVEsWUFBWW5CLFFBQVFzQixtQkFBbUI7WUFDNUZ4QixFQUFFeUIsY0FBYztZQUNoQnhDO1FBQ0Y7UUFDQXlDLE9BQU9DLGdCQUFnQixDQUFDLFdBQVdSO1FBQ25DLE9BQU8sSUFBTU8sT0FBT0UsbUJBQW1CLENBQUMsV0FBV1Q7SUFDckQsR0FBRztRQUFDbEM7S0FBUztBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmlyZWJpcmQtaW50ZXJhY3RpdmUvLi9zcmMvY29tcG9uZW50cy9QbGF5ZXJDb250cm9scy50c3g/M2JiYiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlUGFydHNTdG9yZSB9IGZyb20gJ0AvaG9va3MvdXNlUGFydHNTdG9yZSdcbmltcG9ydCB7IGF1ZGlvU2VydmljZSB9IGZyb20gJ0AvbGliL2F1ZGlvL0F1ZGlvU2VydmljZSdcbmltcG9ydCB7IEF1ZGlvU2NoZWR1bGVyIH0gZnJvbSAnQC9saWIvYXVkaW8vQXVkaW9TY2hlZHVsZXInXG5pbXBvcnQgeyB1c2VTcGFjZVRvZ2dsZSB9IGZyb20gJ0AvaG9va3MvdXNlU3BhY2VUb2dnbGUnXG5cbnR5cGUgUHJvcHMgPSB7IHNjaGVkdWxlcj86IEF1ZGlvU2NoZWR1bGVyIH1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUGxheWVyQ29udHJvbHMoeyBzY2hlZHVsZXIgfTogUHJvcHMgPSB7fSkge1xuICBjb25zdCB7IHBsYXksIHRlbXBvLCBzZXRQbGF5LCBzZXRUZW1wbywgdHJhbnNwb3J0U3RhcnRSZWYsIGN1cnJlbnRUZW1wb1JlZiwgc2V0UGFydHMsIGRlZmVycmVkUXVldWVSZWYgfSA9IHVzZVBhcnRzU3RvcmUoKVxuXG4gIGNvbnN0IG9uVG9nZ2xlID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGF1ZGlvU2VydmljZS5pbml0SWZOZWVkZWQoKVxuICAgIGlmICghYXVkaW9TZXJ2aWNlLmF1ZGlvQ3R4KSByZXR1cm5cbiAgICBpZiAoYXVkaW9TZXJ2aWNlLmF1ZGlvQ3R4LnN0YXRlID09PSAnc3VzcGVuZGVkJykgYXdhaXQgYXVkaW9TZXJ2aWNlLmF1ZGlvQ3R4LnJlc3VtZSgpXG4gICAgaWYgKCFwbGF5KSB7XG4gICAgICBzZXRQbGF5KHRydWUpXG4gICAgICB0cmFuc3BvcnRTdGFydFJlZi5jdXJyZW50ID0gYXVkaW9TZXJ2aWNlLmF1ZGlvQ3R4LmN1cnJlbnRUaW1lXG4gICAgICBpZiAoc2NoZWR1bGVyKSBzY2hlZHVsZXIuc2NoZWR1bGVMb29wU3RhcnRJZk5lZWRlZCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFBsYXkoZmFsc2UpXG4gICAgICBhdWRpb1NlcnZpY2Uuc3RvcEFsbEFjdGl2ZSg1MClcbiAgICAgIHNjaGVkdWxlcj8uc3RvcCgpXG4gICAgfVxuICB9LCBbcGxheSwgc2NoZWR1bGVyLCBzZXRQbGF5LCB0cmFuc3BvcnRTdGFydFJlZl0pXG5cbiAgdXNlU3BhY2VUb2dnbGUob25Ub2dnbGUpXG5cbiAgY29uc3Qgb25DbGVhciA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAvLyByZXNldCBzdGF0ZSBhbmQgc3RvcCBhdWRpb1xuICAgIHNldFBsYXkoZmFsc2UpXG4gICAgYXVkaW9TZXJ2aWNlLnN0b3BBbGxBY3RpdmUoNTApXG4gICAgdHJhbnNwb3J0U3RhcnRSZWYuY3VycmVudCA9IG51bGxcbiAgICBjdXJyZW50VGVtcG9SZWYuY3VycmVudCA9ICdmYXN0J1xuICAgIHNldFRlbXBvKCdmYXN0JylcbiAgICBkZWZlcnJlZFF1ZXVlUmVmLmN1cnJlbnQgPSBbXVxuICAgIHNldFBhcnRzKCgpID0+IFtcbiAgICAgIHsgaWQ6ICdtZWxvZHknLCBuYW1lOiAnTWVsb2R5JywgYXNzaWduZWRJbnN0cnVtZW50czogW10gfSxcbiAgICAgIHsgaWQ6ICdoYXJtb255JywgbmFtZTogJ0hhcm1vbnknLCBhc3NpZ25lZEluc3RydW1lbnRzOiBbXSB9LFxuICAgICAgeyBpZDogJ3JoeXRobScsIG5hbWU6ICdSaHl0aG0nLCBhc3NpZ25lZEluc3RydW1lbnRzOiBbXSB9LFxuICAgICAgeyBpZDogJ3RleHR1cmUnLCBuYW1lOiAnVGV4dHVyZScsIGFzc2lnbmVkSW5zdHJ1bWVudHM6IFtdIH1cbiAgICBdKVxuICB9LCBbc2V0UGxheSwgdHJhbnNwb3J0U3RhcnRSZWYsIGN1cnJlbnRUZW1wb1JlZiwgZGVmZXJyZWRRdWV1ZVJlZiwgc2V0UGFydHNdKVxuXG4gIGNvbnN0IG9uVGVtcG9DaGFuZ2UgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgICBjb25zdCB0ID0gZS50YXJnZXQudmFsdWUgYXMgJ2Zhc3QnIHwgJ3Nsb3cnXG4gICAgICBzZXRUZW1wbyh0KVxuICAgICAgaWYgKHBsYXkgJiYgc2NoZWR1bGVyKSB7XG4gICAgICAgIGF3YWl0IHNjaGVkdWxlci5zY2hlZHVsZVRlbXBvU3dpdGNoKHQpXG4gICAgICB9XG4gICAgfSxcbiAgICBbcGxheSwgc2NoZWR1bGVyLCBzZXRUZW1wb11cbiAgKVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGdhcDogOCwgYWxpZ25JdGVtczogJ2NlbnRlcicsIG1hcmdpbjogJzhweCAwJyB9fT5cbiAgICAgIDxidXR0b24gb25DbGljaz17b25Ub2dnbGV9IGFyaWEtbGFiZWw9e3BsYXkgPyAnUGF1c2UnIDogJ1BsYXknfT57cGxheSA/ICdQYXVzZScgOiAnUGxheSd9PC9idXR0b24+XG4gICAgICA8bGFiZWw+XG4gICAgICAgIFRlbXBvOlxuICAgICAgICA8c2VsZWN0IHZhbHVlPXt0ZW1wb30gb25DaGFuZ2U9e29uVGVtcG9DaGFuZ2V9IGFyaWEtbGFiZWw9XCJUZW1wb1wiPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJmYXN0XCI+RmFzdDwvb3B0aW9uPlxuICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCJzbG93XCI+U2xvdzwvb3B0aW9uPlxuICAgICAgICA8L3NlbGVjdD5cbiAgICAgIDwvbGFiZWw+XG4gICAgICA8YnV0dG9uIG9uQ2xpY2s9e29uQ2xlYXJ9PkNsZWFyPC9idXR0b24+XG4gICAgPC9kaXY+XG4gIClcbn1cblxuLy8gQXR0YWNoIFNwYWNlIGtleSB0byB0b2dnbGUgcGxheS9wYXVzZSwgaWdub3JpbmcgdHlwaW5nIGluIGlucHV0c1xuZXhwb3J0IGZ1bmN0aW9uIHVzZVNwYWNlVG9Ub2dnbGUob25Ub2dnbGU6ICgpID0+IHZvaWQpIHtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVyID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGlmIChlLmNvZGUgIT09ICdTcGFjZScpIHJldHVyblxuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQgfCBudWxsXG4gICAgICBjb25zdCB0YWcgPSAodGFyZ2V0Py50YWdOYW1lIHx8ICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICBpZiAodGFnID09PSAnaW5wdXQnIHx8IHRhZyA9PT0gJ3RleHRhcmVhJyB8fCB0YWcgPT09ICdzZWxlY3QnIHx8IHRhcmdldD8uaXNDb250ZW50RWRpdGFibGUpIHJldHVyblxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBvblRvZ2dsZSgpXG4gICAgfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlcilcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVyKVxuICB9LCBbb25Ub2dnbGVdKVxufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlUGFydHNTdG9yZSIsImF1ZGlvU2VydmljZSIsInVzZVNwYWNlVG9nZ2xlIiwiUGxheWVyQ29udHJvbHMiLCJzY2hlZHVsZXIiLCJwbGF5IiwidGVtcG8iLCJzZXRQbGF5Iiwic2V0VGVtcG8iLCJ0cmFuc3BvcnRTdGFydFJlZiIsImN1cnJlbnRUZW1wb1JlZiIsInNldFBhcnRzIiwiZGVmZXJyZWRRdWV1ZVJlZiIsIm9uVG9nZ2xlIiwiaW5pdElmTmVlZGVkIiwiYXVkaW9DdHgiLCJzdGF0ZSIsInJlc3VtZSIsImN1cnJlbnQiLCJjdXJyZW50VGltZSIsInNjaGVkdWxlTG9vcFN0YXJ0SWZOZWVkZWQiLCJzdG9wQWxsQWN0aXZlIiwic3RvcCIsIm9uQ2xlYXIiLCJpZCIsIm5hbWUiLCJhc3NpZ25lZEluc3RydW1lbnRzIiwib25UZW1wb0NoYW5nZSIsImUiLCJ0IiwidGFyZ2V0IiwidmFsdWUiLCJzY2hlZHVsZVRlbXBvU3dpdGNoIiwiZGl2Iiwic3R5bGUiLCJkaXNwbGF5IiwiZ2FwIiwiYWxpZ25JdGVtcyIsIm1hcmdpbiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJhcmlhLWxhYmVsIiwibGFiZWwiLCJzZWxlY3QiLCJvbkNoYW5nZSIsIm9wdGlvbiIsInVzZVNwYWNlVG9Ub2dnbGUiLCJoYW5kbGVyIiwiY29kZSIsInRhZyIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsImlzQ29udGVudEVkaXRhYmxlIiwicHJldmVudERlZmF1bHQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/components/PlayerControls.tsx\n");

/***/ }),

/***/ "(ssr)/./src/hooks/useAssignments.ts":
/*!*************************************!*\
  !*** ./src/hooks/useAssignments.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAssignments: () => (/* binding */ useAssignments)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePartsStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePartsStore */ \"(ssr)/./src/hooks/usePartsStore.ts\");\n/* harmony import */ var _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/audio/AudioService */ \"(ssr)/./src/lib/audio/AudioService.ts\");\n/* harmony import */ var _lib_audio_audioUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/audio/audioUtils */ \"(ssr)/./src/lib/audio/audioUtils.ts\");\n/* __next_internal_client_entry_do_not_use__ useAssignments auto */ \n\n\n\nfunction useAssignments() {\n    const store = (0,_usePartsStore__WEBPACK_IMPORTED_MODULE_1__.usePartsStore)();\n    const addInstrument = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (partId, instrumentId, name)=>{\n        const instId = `${partId}-${instrumentId}-${Date.now()}`;\n        const tempo = store.currentTempoRef.current;\n        const softFile = `/audio/${partId}/${instrumentId}-p-${tempo}.mp3`;\n        const loudFile = `/audio/${partId}/${instrumentId}-f-${tempo}.mp3`;\n        const assigned = {\n            id: instId,\n            instrumentId,\n            name,\n            softFile,\n            loudFile,\n            volumeBalance: 50,\n            isMuted: false\n        };\n        // prevent duplicates per part by instrumentId\n        const part = store.partsRef.current.find((p)=>p.id === partId);\n        if (part.assignedInstruments.some((ai)=>ai.instrumentId === instrumentId)) return;\n        if (!store.playStateRef.current) {\n            // idle: preload both tempos and add directly\n            await Promise.all([\n                _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__.audioService.preloadTempoForInstance(instId, partId, instrumentId, \"fast\"),\n                _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__.audioService.preloadTempoForInstance(instId, partId, instrumentId, \"slow\")\n            ]);\n            // detect missing audio for current tempo\n            const bufs = _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__.audioService.getBuffersFor(instId, store.currentTempoRef.current);\n            const hasError = !bufs?.soft || !bufs?.loud;\n            store.setParts((prev)=>prev.map((p)=>p.id === partId ? {\n                        ...p,\n                        assignedInstruments: [\n                            ...p.assignedInstruments,\n                            {\n                                ...assigned,\n                                hasError\n                            }\n                        ]\n                    } : p));\n        } else {\n            // playing: mark queued and push to deferredQueueRef\n            _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__.audioService.initIfNeeded();\n            const ctx = _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__.audioService.audioCtx;\n            const transport = store.transportStartRef.current;\n            const { scheduleTime } = (0,_lib_audio_audioUtils__WEBPACK_IMPORTED_MODULE_3__.computeNextBeatScheduleTime)(ctx.currentTime, transport, store.currentTempoRef.current);\n            const remaining = Math.max(0, scheduleTime - ctx.currentTime) // to next beat boundary\n            ;\n            const queued = {\n                ...assigned,\n                isLoading: true,\n                queueStartTime: ctx.currentTime,\n                queueTimeRemaining: remaining,\n                queueScheduleTime: scheduleTime\n            };\n            store.setParts((prev)=>prev.map((p)=>p.id === partId ? {\n                        ...p,\n                        assignedInstruments: [\n                            ...p.assignedInstruments,\n                            queued\n                        ]\n                    } : p));\n            store.deferredQueueRef.current = [\n                ...store.deferredQueueRef.current,\n                queued\n            ];\n            // preload current tempo first\n            await _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__.audioService.preloadTempoForInstance(instId, partId, instrumentId, store.currentTempoRef.current);\n            // preload other tempo in background\n            _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__.audioService.preloadTempoForInstance(instId, partId, instrumentId, store.currentTempoRef.current === \"fast\" ? \"slow\" : \"fast\");\n        }\n    }, [\n        store\n    ]);\n    const removeInstrument = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((instId)=>{\n        store.removedInstanceIdsRef.current.add(instId);\n        store.setParts((prev)=>prev.map((p)=>({\n                    ...p,\n                    assignedInstruments: p.assignedInstruments.filter((ai)=>ai.id !== instId)\n                })));\n        // stop audio\n        _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__.audioService.stopAndCleanupNode(instId, \"soft\");\n        _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__.audioService.stopAndCleanupNode(instId, \"loud\");\n        _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__.audioService.releaseInstance(instId);\n    }, [\n        store\n    ]);\n    return {\n        addInstrument,\n        removeInstrument\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxtQkFBbUI7NEJBQUV5Qjt5QkFBTztvQkFBQyxJQUFJMUI7WUFDNUhwQixNQUFNbUQsZ0JBQWdCLENBQUN6QyxPQUFPLEdBQUc7bUJBQUlWLE1BQU1tRCxnQkFBZ0IsQ0FBQ3pDLE9BQU87Z0JBQUVvQzthQUFPO1lBQzVFLDhCQUE4QjtZQUM5QixNQUFNakQsaUVBQVlBLENBQUM4Qix1QkFBdUIsQ0FBQ3RCLFFBQVFILFFBQVFDLGNBQWNILE1BQU1TLGVBQWUsQ0FBQ0MsT0FBTztZQUN0RyxvQ0FBb0M7WUFDcENiLGlFQUFZQSxDQUFDOEIsdUJBQXVCLENBQUN0QixRQUFRSCxRQUFRQyxjQUFjSCxNQUFNUyxlQUFlLENBQUNDLE9BQU8sS0FBSyxTQUFTLFNBQVM7UUFDekg7SUFDRixHQUNBO1FBQUNWO0tBQU07SUFHVCxNQUFNb0QsbUJBQW1CekQsa0RBQVdBLENBQ2xDLENBQUNVO1FBQ0NMLE1BQU1xRCxxQkFBcUIsQ0FBQzNDLE9BQU8sQ0FBQzRDLEdBQUcsQ0FBQ2pEO1FBQ3hDTCxNQUFNaUMsUUFBUSxDQUFDQyxDQUFBQSxPQUFRQSxLQUFLQyxHQUFHLENBQUNmLENBQUFBLElBQU07b0JBQUUsR0FBR0EsQ0FBQztvQkFBRUMscUJBQXFCRCxFQUFFQyxtQkFBbUIsQ0FBQ2tDLE1BQU0sQ0FBQ2hDLENBQUFBLEtBQU1BLEdBQUdULEVBQUUsS0FBS1Q7Z0JBQVE7UUFDeEgsYUFBYTtRQUNiUixpRUFBWUEsQ0FBQzJELGtCQUFrQixDQUFDbkQsUUFBUTtRQUN4Q1IsaUVBQVlBLENBQUMyRCxrQkFBa0IsQ0FBQ25ELFFBQVE7UUFDeENSLGlFQUFZQSxDQUFDNEQsZUFBZSxDQUFDcEQ7SUFDL0IsR0FDQTtRQUFDTDtLQUFNO0lBR1QsT0FBTztRQUFFQztRQUFlbUQ7SUFBaUI7QUFDM0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXJlYmlyZC1pbnRlcmFjdGl2ZS8uL3NyYy9ob29rcy91c2VBc3NpZ25tZW50cy50cz8xYTc1Il0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgeyB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlUGFydHNTdG9yZSB9IGZyb20gJy4vdXNlUGFydHNTdG9yZSdcbmltcG9ydCB0eXBlIHsgUGFydElkLCBBc3NpZ25lZEluc3RydW1lbnQgfSBmcm9tICdAL2xpYi90eXBlcydcbmltcG9ydCB7IGF1ZGlvU2VydmljZSB9IGZyb20gJ0AvbGliL2F1ZGlvL0F1ZGlvU2VydmljZSdcbmltcG9ydCB7IGNvbXB1dGVOZXh0QmVhdFNjaGVkdWxlVGltZSwgbG9vcER1cmF0aW9uLCBzZWNvbmRzUGVyQmVhdCB9IGZyb20gJ0AvbGliL2F1ZGlvL2F1ZGlvVXRpbHMnXG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VBc3NpZ25tZW50cygpIHtcbiAgY29uc3Qgc3RvcmUgPSB1c2VQYXJ0c1N0b3JlKClcbiAgY29uc3QgYWRkSW5zdHJ1bWVudCA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChwYXJ0SWQ6IFBhcnRJZCwgaW5zdHJ1bWVudElkOiBzdHJpbmcsIG5hbWU6IHN0cmluZykgPT4ge1xuICAgICAgY29uc3QgaW5zdElkID0gYCR7cGFydElkfS0ke2luc3RydW1lbnRJZH0tJHtEYXRlLm5vdygpfWBcbiAgICAgIGNvbnN0IHRlbXBvID0gc3RvcmUuY3VycmVudFRlbXBvUmVmLmN1cnJlbnRcbiAgICAgIGNvbnN0IHNvZnRGaWxlID0gYC9hdWRpby8ke3BhcnRJZH0vJHtpbnN0cnVtZW50SWR9LXAtJHt0ZW1wb30ubXAzYFxuICAgICAgY29uc3QgbG91ZEZpbGUgPSBgL2F1ZGlvLyR7cGFydElkfS8ke2luc3RydW1lbnRJZH0tZi0ke3RlbXBvfS5tcDNgXG4gICAgICBjb25zdCBhc3NpZ25lZDogQXNzaWduZWRJbnN0cnVtZW50ID0ge1xuICAgICAgICBpZDogaW5zdElkLFxuICAgICAgICBpbnN0cnVtZW50SWQsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIHNvZnRGaWxlLFxuICAgICAgICBsb3VkRmlsZSxcbiAgICAgICAgdm9sdW1lQmFsYW5jZTogNTAsXG4gICAgICAgIGlzTXV0ZWQ6IGZhbHNlXG4gICAgICB9XG5cbiAgICAgIC8vIHByZXZlbnQgZHVwbGljYXRlcyBwZXIgcGFydCBieSBpbnN0cnVtZW50SWRcbiAgICAgIGNvbnN0IHBhcnQgPSBzdG9yZS5wYXJ0c1JlZi5jdXJyZW50LmZpbmQocCA9PiBwLmlkID09PSBwYXJ0SWQpIVxuICAgICAgaWYgKHBhcnQuYXNzaWduZWRJbnN0cnVtZW50cy5zb21lKGFpID0+IGFpLmluc3RydW1lbnRJZCA9PT0gaW5zdHJ1bWVudElkKSkgcmV0dXJuXG5cbiAgICAgIGlmICghc3RvcmUucGxheVN0YXRlUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgLy8gaWRsZTogcHJlbG9hZCBib3RoIHRlbXBvcyBhbmQgYWRkIGRpcmVjdGx5XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICBhdWRpb1NlcnZpY2UucHJlbG9hZFRlbXBvRm9ySW5zdGFuY2UoaW5zdElkLCBwYXJ0SWQsIGluc3RydW1lbnRJZCwgJ2Zhc3QnKSxcbiAgICAgICAgICBhdWRpb1NlcnZpY2UucHJlbG9hZFRlbXBvRm9ySW5zdGFuY2UoaW5zdElkLCBwYXJ0SWQsIGluc3RydW1lbnRJZCwgJ3Nsb3cnKVxuICAgICAgICBdKVxuICAgICAgICAvLyBkZXRlY3QgbWlzc2luZyBhdWRpbyBmb3IgY3VycmVudCB0ZW1wb1xuICAgICAgICBjb25zdCBidWZzID0gYXVkaW9TZXJ2aWNlLmdldEJ1ZmZlcnNGb3IoaW5zdElkLCBzdG9yZS5jdXJyZW50VGVtcG9SZWYuY3VycmVudClcbiAgICAgICAgY29uc3QgaGFzRXJyb3IgPSAhYnVmcz8uc29mdCB8fCAhYnVmcz8ubG91ZFxuICAgICAgICBzdG9yZS5zZXRQYXJ0cyhwcmV2ID0+XG4gICAgICAgICAgcHJldi5tYXAocCA9PiAocC5pZCA9PT0gcGFydElkID8geyAuLi5wLCBhc3NpZ25lZEluc3RydW1lbnRzOiBbLi4ucC5hc3NpZ25lZEluc3RydW1lbnRzLCB7IC4uLmFzc2lnbmVkLCBoYXNFcnJvciB9XSB9IDogcCkpXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHBsYXlpbmc6IG1hcmsgcXVldWVkIGFuZCBwdXNoIHRvIGRlZmVycmVkUXVldWVSZWZcbiAgICAgICAgYXVkaW9TZXJ2aWNlLmluaXRJZk5lZWRlZCgpXG4gICAgICAgIGNvbnN0IGN0eCA9IGF1ZGlvU2VydmljZS5hdWRpb0N0eCFcbiAgICAgICAgY29uc3QgdHJhbnNwb3J0ID0gc3RvcmUudHJhbnNwb3J0U3RhcnRSZWYuY3VycmVudCFcbiAgICAgICAgY29uc3QgeyBzY2hlZHVsZVRpbWUgfSA9IGNvbXB1dGVOZXh0QmVhdFNjaGVkdWxlVGltZShjdHguY3VycmVudFRpbWUsIHRyYW5zcG9ydCwgc3RvcmUuY3VycmVudFRlbXBvUmVmLmN1cnJlbnQpXG4gIGNvbnN0IHJlbWFpbmluZyA9IE1hdGgubWF4KDAsIHNjaGVkdWxlVGltZSAtIGN0eC5jdXJyZW50VGltZSkgLy8gdG8gbmV4dCBiZWF0IGJvdW5kYXJ5XG4gIGNvbnN0IHF1ZXVlZCA9IHsgLi4uYXNzaWduZWQsIGlzTG9hZGluZzogdHJ1ZSwgcXVldWVTdGFydFRpbWU6IGN0eC5jdXJyZW50VGltZSwgcXVldWVUaW1lUmVtYWluaW5nOiByZW1haW5pbmcsIHF1ZXVlU2NoZWR1bGVUaW1lOiBzY2hlZHVsZVRpbWUgfVxuICAgICAgICBzdG9yZS5zZXRQYXJ0cyhwcmV2ID0+IHByZXYubWFwKHAgPT4gKHAuaWQgPT09IHBhcnRJZCA/IHsgLi4ucCwgYXNzaWduZWRJbnN0cnVtZW50czogWy4uLnAuYXNzaWduZWRJbnN0cnVtZW50cywgcXVldWVkXSB9IDogcCkpKVxuICAgICAgICBzdG9yZS5kZWZlcnJlZFF1ZXVlUmVmLmN1cnJlbnQgPSBbLi4uc3RvcmUuZGVmZXJyZWRRdWV1ZVJlZi5jdXJyZW50LCBxdWV1ZWRdXG4gICAgICAgIC8vIHByZWxvYWQgY3VycmVudCB0ZW1wbyBmaXJzdFxuICAgICAgICBhd2FpdCBhdWRpb1NlcnZpY2UucHJlbG9hZFRlbXBvRm9ySW5zdGFuY2UoaW5zdElkLCBwYXJ0SWQsIGluc3RydW1lbnRJZCwgc3RvcmUuY3VycmVudFRlbXBvUmVmLmN1cnJlbnQpXG4gICAgICAgIC8vIHByZWxvYWQgb3RoZXIgdGVtcG8gaW4gYmFja2dyb3VuZFxuICAgICAgICBhdWRpb1NlcnZpY2UucHJlbG9hZFRlbXBvRm9ySW5zdGFuY2UoaW5zdElkLCBwYXJ0SWQsIGluc3RydW1lbnRJZCwgc3RvcmUuY3VycmVudFRlbXBvUmVmLmN1cnJlbnQgPT09ICdmYXN0JyA/ICdzbG93JyA6ICdmYXN0JylcbiAgICAgIH1cbiAgICB9LFxuICAgIFtzdG9yZV1cbiAgKVxuXG4gIGNvbnN0IHJlbW92ZUluc3RydW1lbnQgPSB1c2VDYWxsYmFjayhcbiAgICAoaW5zdElkOiBzdHJpbmcpID0+IHtcbiAgICAgIHN0b3JlLnJlbW92ZWRJbnN0YW5jZUlkc1JlZi5jdXJyZW50LmFkZChpbnN0SWQpXG4gICAgICBzdG9yZS5zZXRQYXJ0cyhwcmV2ID0+IHByZXYubWFwKHAgPT4gKHsgLi4ucCwgYXNzaWduZWRJbnN0cnVtZW50czogcC5hc3NpZ25lZEluc3RydW1lbnRzLmZpbHRlcihhaSA9PiBhaS5pZCAhPT0gaW5zdElkKSB9KSkpXG4gICAgICAvLyBzdG9wIGF1ZGlvXG4gICAgICBhdWRpb1NlcnZpY2Uuc3RvcEFuZENsZWFudXBOb2RlKGluc3RJZCwgJ3NvZnQnKVxuICAgICAgYXVkaW9TZXJ2aWNlLnN0b3BBbmRDbGVhbnVwTm9kZShpbnN0SWQsICdsb3VkJylcbiAgICAgIGF1ZGlvU2VydmljZS5yZWxlYXNlSW5zdGFuY2UoaW5zdElkKVxuICAgIH0sXG4gICAgW3N0b3JlXVxuICApXG5cbiAgcmV0dXJuIHsgYWRkSW5zdHJ1bWVudCwgcmVtb3ZlSW5zdHJ1bWVudCB9XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VQYXJ0c1N0b3JlIiwiYXVkaW9TZXJ2aWNlIiwiY29tcHV0ZU5leHRCZWF0U2NoZWR1bGVUaW1lIiwidXNlQXNzaWdubWVudHMiLCJzdG9yZSIsImFkZEluc3RydW1lbnQiLCJwYXJ0SWQiLCJpbnN0cnVtZW50SWQiLCJuYW1lIiwiaW5zdElkIiwiRGF0ZSIsIm5vdyIsInRlbXBvIiwiY3VycmVudFRlbXBvUmVmIiwiY3VycmVudCIsInNvZnRGaWxlIiwibG91ZEZpbGUiLCJhc3NpZ25lZCIsImlkIiwidm9sdW1lQmFsYW5jZSIsImlzTXV0ZWQiLCJwYXJ0IiwicGFydHNSZWYiLCJmaW5kIiwicCIsImFzc2lnbmVkSW5zdHJ1bWVudHMiLCJzb21lIiwiYWkiLCJwbGF5U3RhdGVSZWYiLCJQcm9taXNlIiwiYWxsIiwicHJlbG9hZFRlbXBvRm9ySW5zdGFuY2UiLCJidWZzIiwiZ2V0QnVmZmVyc0ZvciIsImhhc0Vycm9yIiwic29mdCIsImxvdWQiLCJzZXRQYXJ0cyIsInByZXYiLCJtYXAiLCJpbml0SWZOZWVkZWQiLCJjdHgiLCJhdWRpb0N0eCIsInRyYW5zcG9ydCIsInRyYW5zcG9ydFN0YXJ0UmVmIiwic2NoZWR1bGVUaW1lIiwiY3VycmVudFRpbWUiLCJyZW1haW5pbmciLCJNYXRoIiwibWF4IiwicXVldWVkIiwiaXNMb2FkaW5nIiwicXVldWVTdGFydFRpbWUiLCJxdWV1ZVRpbWVSZW1haW5pbmciLCJxdWV1ZVNjaGVkdWxlVGltZSIsImRlZmVycmVkUXVldWVSZWYiLCJyZW1vdmVJbnN0cnVtZW50IiwicmVtb3ZlZEluc3RhbmNlSWRzUmVmIiwiYWRkIiwiZmlsdGVyIiwic3RvcEFuZENsZWFudXBOb2RlIiwicmVsZWFzZUluc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/hooks/useAssignments.ts\n");

/***/ }),

/***/ "(ssr)/./src/hooks/useAudioInspector.ts":
/*!****************************************!*\
  !*** ./src/hooks/useAudioInspector.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAudioInspector: () => (/* binding */ useAudioInspector)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _usePartsStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./usePartsStore */ \"(ssr)/./src/hooks/usePartsStore.ts\");\n/* harmony import */ var _lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/audio/AudioService */ \"(ssr)/./src/lib/audio/AudioService.ts\");\n/* __next_internal_client_entry_do_not_use__ useAudioInspector auto */ \n\n\nfunction useAudioInspector(scheduler) {\n    const store = (0,_usePartsStore__WEBPACK_IMPORTED_MODULE_1__.usePartsStore)();\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const inspector = {\n            getAudioBuffers: ()=>_lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__.audioService.getInspectorSnapshot().getAudioBuffers(),\n            getAudioBuffersByTempo: ()=>_lib_audio_AudioService__WEBPACK_IMPORTED_MODULE_2__.audioService.getBuffersByInstTempoSnapshot(),\n            getNodeStartTimes: ()=>{\n                const arrMap = store.nodeStartTimesRef.current;\n                const out = {};\n                for (const [id, v] of Object.entries(arrMap)){\n                    const soft = v.soft && v.soft.length > 0 ? v.soft[v.soft.length - 1] : undefined;\n                    const loud = v.loud && v.loud.length > 0 ? v.loud[v.loud.length - 1] : undefined;\n                    out[id] = {\n                        soft,\n                        loud\n                    };\n                }\n                return out;\n            },\n            getDeferredQueue: ()=>store.deferredQueueRef.current.map((q)=>({\n                        id: q.id,\n                        instrumentId: q.instrumentId,\n                        queueStartTime: q.queueStartTime,\n                        queueTimeRemaining: q.queueTimeRemaining\n                    })),\n            getPlayState: ()=>store.playStateRef.current,\n            getParts: ()=>JSON.parse(JSON.stringify(store.partsRef.current)),\n            getTransportStartTime: ()=>store.transportStartRef.current,\n            getTempo: ()=>store.currentTempoRef.current\n        };\n        Object.defineProperty(inspector, \"scheduledTempoSwitch\", {\n            get () {\n                return scheduler ? scheduler.getScheduledTempoSwitch() : null;\n            },\n            enumerable: true\n        });\n        window.__audioInspector = inspector;\n        return ()=>{\n            delete window.__audioInspector;\n        };\n    }, [\n        scheduler,\n        store\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvaG9va3MvdXNlQXVkaW9JbnNwZWN0b3IudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7dUVBRWlDO0FBQ2M7QUFDUTtBQVVoRCxTQUFTRyxrQkFBa0JDLFNBQTBCO0lBQzFELE1BQU1DLFFBQVFKLDZEQUFhQTtJQUMzQkQsZ0RBQVNBLENBQUM7UUFDUixNQUFNTSxZQUFpQjtZQUNyQkMsaUJBQWlCLElBQU1MLGlFQUFZQSxDQUFDTSxvQkFBb0IsR0FBR0QsZUFBZTtZQUMxRUUsd0JBQXdCLElBQU1QLGlFQUFZQSxDQUFDUSw2QkFBNkI7WUFDeEVDLG1CQUFtQjtnQkFDakIsTUFBTUMsU0FBU1AsTUFBTVEsaUJBQWlCLENBQUNDLE9BQU87Z0JBQzlDLE1BQU1DLE1BQXdELENBQUM7Z0JBQy9ELEtBQUssTUFBTSxDQUFDQyxJQUFJQyxFQUFFLElBQUlDLE9BQU9DLE9BQU8sQ0FBQ1AsUUFBUztvQkFDNUMsTUFBTVEsT0FBT0gsRUFBRUcsSUFBSSxJQUFJSCxFQUFFRyxJQUFJLENBQUNDLE1BQU0sR0FBRyxJQUFJSixFQUFFRyxJQUFJLENBQUNILEVBQUVHLElBQUksQ0FBQ0MsTUFBTSxHQUFHLEVBQUUsR0FBR0M7b0JBQ3ZFLE1BQU1DLE9BQU9OLEVBQUVNLElBQUksSUFBSU4sRUFBRU0sSUFBSSxDQUFDRixNQUFNLEdBQUcsSUFBSUosRUFBRU0sSUFBSSxDQUFDTixFQUFFTSxJQUFJLENBQUNGLE1BQU0sR0FBRyxFQUFFLEdBQUdDO29CQUN2RVAsR0FBRyxDQUFDQyxHQUFHLEdBQUc7d0JBQUVJO3dCQUFNRztvQkFBSztnQkFDekI7Z0JBQ0EsT0FBT1I7WUFDVDtZQUNBUyxrQkFBa0IsSUFDaEJuQixNQUFNb0IsZ0JBQWdCLENBQUNYLE9BQU8sQ0FBQ1ksR0FBRyxDQUFDQyxDQUFBQSxJQUFNO3dCQUFFWCxJQUFJVyxFQUFFWCxFQUFFO3dCQUFFWSxjQUFjRCxFQUFFQyxZQUFZO3dCQUFFQyxnQkFBZ0JGLEVBQUVFLGNBQWM7d0JBQUdDLG9CQUFvQkgsRUFBRUcsa0JBQWtCO29CQUFFO1lBQ2xLQyxjQUFjLElBQU0xQixNQUFNMkIsWUFBWSxDQUFDbEIsT0FBTztZQUM5Q21CLFVBQVUsSUFBTUMsS0FBS0MsS0FBSyxDQUFDRCxLQUFLRSxTQUFTLENBQUMvQixNQUFNZ0MsUUFBUSxDQUFDdkIsT0FBTztZQUNoRXdCLHVCQUF1QixJQUFNakMsTUFBTWtDLGlCQUFpQixDQUFDekIsT0FBTztZQUM1RDBCLFVBQVUsSUFBTW5DLE1BQU1vQyxlQUFlLENBQUMzQixPQUFPO1FBQy9DO1FBRUFJLE9BQU93QixjQUFjLENBQUNwQyxXQUFXLHdCQUF3QjtZQUN2RHFDO2dCQUNFLE9BQU92QyxZQUFZQSxVQUFVd0MsdUJBQXVCLEtBQUs7WUFDM0Q7WUFDQUMsWUFBWTtRQUNkO1FBRUFDLE9BQU9DLGdCQUFnQixHQUFHekM7UUFDMUIsT0FBTztZQUNMLE9BQU93QyxPQUFPQyxnQkFBZ0I7UUFDaEM7SUFDRixHQUFHO1FBQUMzQztRQUFXQztLQUFNO0FBQ3ZCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmlyZWJpcmQtaW50ZXJhY3RpdmUvLi9zcmMvaG9va3MvdXNlQXVkaW9JbnNwZWN0b3IudHM/YjE4YiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IHsgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VQYXJ0c1N0b3JlIH0gZnJvbSAnLi91c2VQYXJ0c1N0b3JlJ1xuaW1wb3J0IHsgYXVkaW9TZXJ2aWNlIH0gZnJvbSAnQC9saWIvYXVkaW8vQXVkaW9TZXJ2aWNlJ1xuaW1wb3J0IHR5cGUgeyBBdWRpb0luc3BlY3RvclNuYXBzaG90IH0gZnJvbSAnQC9saWIvdHlwZXMnXG5pbXBvcnQgdHlwZSB7IEF1ZGlvU2NoZWR1bGVyIH0gZnJvbSAnQC9saWIvYXVkaW8vQXVkaW9TY2hlZHVsZXInXG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgX19hdWRpb0luc3BlY3Rvcj86IEF1ZGlvSW5zcGVjdG9yU25hcHNob3RcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlQXVkaW9JbnNwZWN0b3Ioc2NoZWR1bGVyPzogQXVkaW9TY2hlZHVsZXIpIHtcbiAgY29uc3Qgc3RvcmUgPSB1c2VQYXJ0c1N0b3JlKClcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpbnNwZWN0b3I6IGFueSA9IHtcbiAgICAgIGdldEF1ZGlvQnVmZmVyczogKCkgPT4gYXVkaW9TZXJ2aWNlLmdldEluc3BlY3RvclNuYXBzaG90KCkuZ2V0QXVkaW9CdWZmZXJzKCksXG4gICAgICBnZXRBdWRpb0J1ZmZlcnNCeVRlbXBvOiAoKSA9PiBhdWRpb1NlcnZpY2UuZ2V0QnVmZmVyc0J5SW5zdFRlbXBvU25hcHNob3QoKSxcbiAgICAgIGdldE5vZGVTdGFydFRpbWVzOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFyck1hcCA9IHN0b3JlLm5vZGVTdGFydFRpbWVzUmVmLmN1cnJlbnRcbiAgICAgICAgY29uc3Qgb3V0OiBSZWNvcmQ8c3RyaW5nLCB7IHNvZnQ/OiBudW1iZXI7IGxvdWQ/OiBudW1iZXIgfT4gPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IFtpZCwgdl0gb2YgT2JqZWN0LmVudHJpZXMoYXJyTWFwKSkge1xuICAgICAgICAgIGNvbnN0IHNvZnQgPSB2LnNvZnQgJiYgdi5zb2Z0Lmxlbmd0aCA+IDAgPyB2LnNvZnRbdi5zb2Z0Lmxlbmd0aCAtIDFdIDogdW5kZWZpbmVkXG4gICAgICAgICAgY29uc3QgbG91ZCA9IHYubG91ZCAmJiB2LmxvdWQubGVuZ3RoID4gMCA/IHYubG91ZFt2LmxvdWQubGVuZ3RoIC0gMV0gOiB1bmRlZmluZWRcbiAgICAgICAgICBvdXRbaWRdID0geyBzb2Z0LCBsb3VkIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0XG4gICAgICB9LFxuICAgICAgZ2V0RGVmZXJyZWRRdWV1ZTogKCkgPT5cbiAgICAgICAgc3RvcmUuZGVmZXJyZWRRdWV1ZVJlZi5jdXJyZW50Lm1hcChxID0+ICh7IGlkOiBxLmlkLCBpbnN0cnVtZW50SWQ6IHEuaW5zdHJ1bWVudElkLCBxdWV1ZVN0YXJ0VGltZTogcS5xdWV1ZVN0YXJ0VGltZSEsIHF1ZXVlVGltZVJlbWFpbmluZzogcS5xdWV1ZVRpbWVSZW1haW5pbmchIH0pKSxcbiAgICAgIGdldFBsYXlTdGF0ZTogKCkgPT4gc3RvcmUucGxheVN0YXRlUmVmLmN1cnJlbnQsXG4gICAgICBnZXRQYXJ0czogKCkgPT4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdG9yZS5wYXJ0c1JlZi5jdXJyZW50KSksXG4gICAgICBnZXRUcmFuc3BvcnRTdGFydFRpbWU6ICgpID0+IHN0b3JlLnRyYW5zcG9ydFN0YXJ0UmVmLmN1cnJlbnQsXG4gICAgICBnZXRUZW1wbzogKCkgPT4gc3RvcmUuY3VycmVudFRlbXBvUmVmLmN1cnJlbnRcbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaW5zcGVjdG9yLCAnc2NoZWR1bGVkVGVtcG9Td2l0Y2gnLCB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZXIgPyBzY2hlZHVsZXIuZ2V0U2NoZWR1bGVkVGVtcG9Td2l0Y2goKSA6IG51bGxcbiAgICAgIH0sXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlXG4gICAgfSlcblxuICAgIHdpbmRvdy5fX2F1ZGlvSW5zcGVjdG9yID0gaW5zcGVjdG9yXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRlbGV0ZSB3aW5kb3cuX19hdWRpb0luc3BlY3RvclxuICAgIH1cbiAgfSwgW3NjaGVkdWxlciwgc3RvcmVdKVxufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVBhcnRzU3RvcmUiLCJhdWRpb1NlcnZpY2UiLCJ1c2VBdWRpb0luc3BlY3RvciIsInNjaGVkdWxlciIsInN0b3JlIiwiaW5zcGVjdG9yIiwiZ2V0QXVkaW9CdWZmZXJzIiwiZ2V0SW5zcGVjdG9yU25hcHNob3QiLCJnZXRBdWRpb0J1ZmZlcnNCeVRlbXBvIiwiZ2V0QnVmZmVyc0J5SW5zdFRlbXBvU25hcHNob3QiLCJnZXROb2RlU3RhcnRUaW1lcyIsImFyck1hcCIsIm5vZGVTdGFydFRpbWVzUmVmIiwiY3VycmVudCIsIm91dCIsImlkIiwidiIsIk9iamVjdCIsImVudHJpZXMiLCJzb2Z0IiwibGVuZ3RoIiwidW5kZWZpbmVkIiwibG91ZCIsImdldERlZmVycmVkUXVldWUiLCJkZWZlcnJlZFF1ZXVlUmVmIiwibWFwIiwicSIsImluc3RydW1lbnRJZCIsInF1ZXVlU3RhcnRUaW1lIiwicXVldWVUaW1lUmVtYWluaW5nIiwiZ2V0UGxheVN0YXRlIiwicGxheVN0YXRlUmVmIiwiZ2V0UGFydHMiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJwYXJ0c1JlZiIsImdldFRyYW5zcG9ydFN0YXJ0VGltZSIsInRyYW5zcG9ydFN0YXJ0UmVmIiwiZ2V0VGVtcG8iLCJjdXJyZW50VGVtcG9SZWYiLCJkZWZpbmVQcm9wZXJ0eSIsImdldCIsImdldFNjaGVkdWxlZFRlbXBvU3dpdGNoIiwiZW51bWVyYWJsZSIsIndpbmRvdyIsIl9fYXVkaW9JbnNwZWN0b3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/hooks/useAudioInspector.ts\n");

/***/ }),

/***/ "(ssr)/./src/hooks/usePartsStore.ts":
/*!************************************!*\
  !*** ./src/hooks/usePartsStore.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   usePartsStore: () => (/* binding */ usePartsStore)\n/* harmony export */ });\n/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zustand */ \"(ssr)/./node_modules/zustand/esm/index.mjs\");\n/* __next_internal_client_entry_do_not_use__ usePartsStore auto */ \nconst initialParts = [\n    {\n        id: \"melody\",\n        name: \"Melody\",\n        assignedInstruments: []\n    },\n    {\n        id: \"harmony\",\n        name: \"Harmony\",\n        assignedInstruments: []\n    },\n    {\n        id: \"rhythm\",\n        name: \"Rhythm\",\n        assignedInstruments: []\n    },\n    {\n        id: \"texture\",\n        name: \"Texture\",\n        assignedInstruments: []\n    }\n];\nconst usePartsStore = (0,zustand__WEBPACK_IMPORTED_MODULE_0__.create)((set, get)=>({\n        parts: initialParts,\n        play: false,\n        tempo: \"fast\",\n        soloInstanceId: null,\n        selectedInstrument: null,\n        partsRef: {\n            current: initialParts\n        },\n        playStateRef: {\n            current: false\n        },\n        transportStartRef: {\n            current: null\n        },\n        currentTempoRef: {\n            current: \"fast\"\n        },\n        deferredQueueRef: {\n            current: []\n        },\n        removedInstanceIdsRef: {\n            current: new Set()\n        },\n        nodeStartTimesRef: {\n            current: {}\n        },\n        loopAnchorRef: {\n            current: null\n        },\n        setPlay (p) {\n            set({\n                play: p\n            });\n            get().playStateRef.current = p;\n        },\n        setTempo (t) {\n            set({\n                tempo: t\n            });\n            get().currentTempoRef.current = t;\n        },\n        setParts (updater) {\n            set((state)=>{\n                const next = updater(state.parts);\n                get().partsRef.current = next;\n                return {\n                    parts: next\n                };\n            });\n        },\n        setSelectedInstrument (sel) {\n            set({\n                selectedInstrument: sel\n            });\n        },\n        setSoloInstanceId (id) {\n            set({\n                soloInstanceId: id\n            });\n        }\n    }));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvaG9va3MvdXNlUGFydHNTdG9yZS50cyIsIm1hcHBpbmdzIjoiOzs7OzttRUFFZ0M7QUF5QmhDLE1BQU1DLGVBQThCO0lBQ2xDO1FBQUVDLElBQUk7UUFBVUMsTUFBTTtRQUFVQyxxQkFBcUIsRUFBRTtJQUFDO0lBQ3hEO1FBQUVGLElBQUk7UUFBV0MsTUFBTTtRQUFXQyxxQkFBcUIsRUFBRTtJQUFDO0lBQzFEO1FBQUVGLElBQUk7UUFBVUMsTUFBTTtRQUFVQyxxQkFBcUIsRUFBRTtJQUFDO0lBQ3hEO1FBQUVGLElBQUk7UUFBV0MsTUFBTTtRQUFXQyxxQkFBcUIsRUFBRTtJQUFDO0NBQzNEO0FBRU0sTUFBTUMsZ0JBQWdCTCwrQ0FBTUEsQ0FBUSxDQUFDTSxLQUFVQyxNQUFjO1FBQ2xFQyxPQUFPUDtRQUNQUSxNQUFNO1FBQ05DLE9BQU87UUFDUEMsZ0JBQWdCO1FBQ2hCQyxvQkFBb0I7UUFDcEJDLFVBQVU7WUFBRUMsU0FBU2I7UUFBYTtRQUNsQ2MsY0FBYztZQUFFRCxTQUFTO1FBQU07UUFDL0JFLG1CQUFtQjtZQUFFRixTQUFTO1FBQUs7UUFDbkNHLGlCQUFpQjtZQUFFSCxTQUFTO1FBQU87UUFDbkNJLGtCQUFrQjtZQUFFSixTQUFTLEVBQUU7UUFBQztRQUNoQ0ssdUJBQXVCO1lBQUVMLFNBQVMsSUFBSU07UUFBTTtRQUM1Q0MsbUJBQW1CO1lBQUVQLFNBQVMsQ0FBQztRQUFFO1FBQ2pDUSxlQUFlO1lBQUVSLFNBQVM7UUFBSztRQUMvQlMsU0FBUUMsQ0FBVTtZQUNoQmxCLElBQUk7Z0JBQUVHLE1BQU1lO1lBQUU7WUFDZGpCLE1BQU1RLFlBQVksQ0FBQ0QsT0FBTyxHQUFHVTtRQUMvQjtRQUNBQyxVQUFTQyxDQUFrQjtZQUN6QnBCLElBQUk7Z0JBQUVJLE9BQU9nQjtZQUFFO1lBQ2ZuQixNQUFNVSxlQUFlLENBQUNILE9BQU8sR0FBR1k7UUFDbEM7UUFDQUMsVUFBU0MsT0FBK0M7WUFDdER0QixJQUFJLENBQUN1QjtnQkFDSCxNQUFNQyxPQUFPRixRQUFRQyxNQUFNckIsS0FBSztnQkFDaENELE1BQU1NLFFBQVEsQ0FBQ0MsT0FBTyxHQUFHZ0I7Z0JBQ3pCLE9BQU87b0JBQUV0QixPQUFPc0I7Z0JBQUs7WUFDdkI7UUFDRjtRQUNBQyx1QkFBc0JDLEdBQUc7WUFDdkIxQixJQUFJO2dCQUFFTSxvQkFBb0JvQjtZQUFJO1FBQ2hDO1FBQ0FDLG1CQUFrQi9CLEVBQUU7WUFDbEJJLElBQUk7Z0JBQUVLLGdCQUFnQlQ7WUFBRztRQUMzQjtJQUNGLElBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXJlYmlyZC1pbnRlcmFjdGl2ZS8uL3NyYy9ob29rcy91c2VQYXJ0c1N0b3JlLnRzP2I5YTEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbmltcG9ydCB7IGNyZWF0ZSB9IGZyb20gJ3p1c3RhbmQnXG5pbXBvcnQgdHlwZSB7IEFzc2lnbmVkSW5zdHJ1bWVudCwgTXVzaWNhbFBhcnQsIFBhcnRJZCwgVGVtcG8gfSBmcm9tICdAL2xpYi90eXBlcydcblxuZXhwb3J0IHR5cGUgU3RvcmUgPSB7XG4gIHBhcnRzOiBNdXNpY2FsUGFydFtdXG4gIHBsYXk6IGJvb2xlYW5cbiAgdGVtcG86IFRlbXBvXG4gIHNvbG9JbnN0YW5jZUlkOiBzdHJpbmcgfCBudWxsXG4gIHNlbGVjdGVkSW5zdHJ1bWVudDogeyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfSB8IG51bGxcbiAgLy8gbXV0YWJsZSByZWZzIG1pcnJvcnNcbiAgcGFydHNSZWY6IHsgY3VycmVudDogTXVzaWNhbFBhcnRbXSB9XG4gIHBsYXlTdGF0ZVJlZjogeyBjdXJyZW50OiBib29sZWFuIH1cbiAgdHJhbnNwb3J0U3RhcnRSZWY6IHsgY3VycmVudDogbnVtYmVyIHwgbnVsbCB9XG4gIGN1cnJlbnRUZW1wb1JlZjogeyBjdXJyZW50OiBUZW1wbyB9XG4gIGRlZmVycmVkUXVldWVSZWY6IHsgY3VycmVudDogQXNzaWduZWRJbnN0cnVtZW50W10gfVxuICByZW1vdmVkSW5zdGFuY2VJZHNSZWY6IHsgY3VycmVudDogU2V0PHN0cmluZz4gfVxuICBub2RlU3RhcnRUaW1lc1JlZjogeyBjdXJyZW50OiBSZWNvcmQ8c3RyaW5nLCB7IHNvZnQ/OiBudW1iZXJbXTsgbG91ZD86IG51bWJlcltdIH0+IH1cbiAgbG9vcEFuY2hvclJlZjogeyBjdXJyZW50OiBudW1iZXIgfCBudWxsIH1cbiAgc2V0UGxheTogKHA6IGJvb2xlYW4pID0+IHZvaWRcbiAgc2V0VGVtcG86ICh0OiBUZW1wbykgPT4gdm9pZFxuICBzZXRQYXJ0czogKHVwZGF0ZXI6IChwcmV2OiBNdXNpY2FsUGFydFtdKSA9PiBNdXNpY2FsUGFydFtdKSA9PiB2b2lkXG4gIHNldFNlbGVjdGVkSW5zdHJ1bWVudDogKHNlbDogeyBpZDogc3RyaW5nOyBuYW1lOiBzdHJpbmcgfSB8IG51bGwpID0+IHZvaWRcbiAgc2V0U29sb0luc3RhbmNlSWQ6IChpZDogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZFxufVxuXG5jb25zdCBpbml0aWFsUGFydHM6IE11c2ljYWxQYXJ0W10gPSBbXG4gIHsgaWQ6ICdtZWxvZHknLCBuYW1lOiAnTWVsb2R5JywgYXNzaWduZWRJbnN0cnVtZW50czogW10gfSxcbiAgeyBpZDogJ2hhcm1vbnknLCBuYW1lOiAnSGFybW9ueScsIGFzc2lnbmVkSW5zdHJ1bWVudHM6IFtdIH0sXG4gIHsgaWQ6ICdyaHl0aG0nLCBuYW1lOiAnUmh5dGhtJywgYXNzaWduZWRJbnN0cnVtZW50czogW10gfSxcbiAgeyBpZDogJ3RleHR1cmUnLCBuYW1lOiAnVGV4dHVyZScsIGFzc2lnbmVkSW5zdHJ1bWVudHM6IFtdIH1cbl1cblxuZXhwb3J0IGNvbnN0IHVzZVBhcnRzU3RvcmUgPSBjcmVhdGU8U3RvcmU+KChzZXQ6IGFueSwgZ2V0OiBhbnkpID0+ICh7XG4gIHBhcnRzOiBpbml0aWFsUGFydHMsXG4gIHBsYXk6IGZhbHNlLFxuICB0ZW1wbzogJ2Zhc3QnLFxuICBzb2xvSW5zdGFuY2VJZDogbnVsbCxcbiAgc2VsZWN0ZWRJbnN0cnVtZW50OiBudWxsLFxuICBwYXJ0c1JlZjogeyBjdXJyZW50OiBpbml0aWFsUGFydHMgfSxcbiAgcGxheVN0YXRlUmVmOiB7IGN1cnJlbnQ6IGZhbHNlIH0sXG4gIHRyYW5zcG9ydFN0YXJ0UmVmOiB7IGN1cnJlbnQ6IG51bGwgfSxcbiAgY3VycmVudFRlbXBvUmVmOiB7IGN1cnJlbnQ6ICdmYXN0JyB9LFxuICBkZWZlcnJlZFF1ZXVlUmVmOiB7IGN1cnJlbnQ6IFtdIH0sXG4gIHJlbW92ZWRJbnN0YW5jZUlkc1JlZjogeyBjdXJyZW50OiBuZXcgU2V0KCkgfSxcbiAgbm9kZVN0YXJ0VGltZXNSZWY6IHsgY3VycmVudDoge30gfSxcbiAgbG9vcEFuY2hvclJlZjogeyBjdXJyZW50OiBudWxsIH0sXG4gIHNldFBsYXkocDogYm9vbGVhbikge1xuICAgIHNldCh7IHBsYXk6IHAgfSlcbiAgICBnZXQoKS5wbGF5U3RhdGVSZWYuY3VycmVudCA9IHBcbiAgfSxcbiAgc2V0VGVtcG8odDogJ2Zhc3QnIHwgJ3Nsb3cnKSB7XG4gICAgc2V0KHsgdGVtcG86IHQgfSlcbiAgICBnZXQoKS5jdXJyZW50VGVtcG9SZWYuY3VycmVudCA9IHRcbiAgfSxcbiAgc2V0UGFydHModXBkYXRlcjogKHByZXY6IE11c2ljYWxQYXJ0W10pID0+IE11c2ljYWxQYXJ0W10pIHtcbiAgICBzZXQoKHN0YXRlOiB7IHBhcnRzOiBNdXNpY2FsUGFydFtdIH0pID0+IHtcbiAgICAgIGNvbnN0IG5leHQgPSB1cGRhdGVyKHN0YXRlLnBhcnRzKVxuICAgICAgZ2V0KCkucGFydHNSZWYuY3VycmVudCA9IG5leHRcbiAgICAgIHJldHVybiB7IHBhcnRzOiBuZXh0IH1cbiAgICB9KVxuICB9LFxuICBzZXRTZWxlY3RlZEluc3RydW1lbnQoc2VsKSB7XG4gICAgc2V0KHsgc2VsZWN0ZWRJbnN0cnVtZW50OiBzZWwgfSlcbiAgfSxcbiAgc2V0U29sb0luc3RhbmNlSWQoaWQpIHtcbiAgICBzZXQoeyBzb2xvSW5zdGFuY2VJZDogaWQgfSlcbiAgfVxufSkpXG4iXSwibmFtZXMiOlsiY3JlYXRlIiwiaW5pdGlhbFBhcnRzIiwiaWQiLCJuYW1lIiwiYXNzaWduZWRJbnN0cnVtZW50cyIsInVzZVBhcnRzU3RvcmUiLCJzZXQiLCJnZXQiLCJwYXJ0cyIsInBsYXkiLCJ0ZW1wbyIsInNvbG9JbnN0YW5jZUlkIiwic2VsZWN0ZWRJbnN0cnVtZW50IiwicGFydHNSZWYiLCJjdXJyZW50IiwicGxheVN0YXRlUmVmIiwidHJhbnNwb3J0U3RhcnRSZWYiLCJjdXJyZW50VGVtcG9SZWYiLCJkZWZlcnJlZFF1ZXVlUmVmIiwicmVtb3ZlZEluc3RhbmNlSWRzUmVmIiwiU2V0Iiwibm9kZVN0YXJ0VGltZXNSZWYiLCJsb29wQW5jaG9yUmVmIiwic2V0UGxheSIsInAiLCJzZXRUZW1wbyIsInQiLCJzZXRQYXJ0cyIsInVwZGF0ZXIiLCJzdGF0ZSIsIm5leHQiLCJzZXRTZWxlY3RlZEluc3RydW1lbnQiLCJzZWwiLCJzZXRTb2xvSW5zdGFuY2VJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/hooks/usePartsStore.ts\n");

/***/ }),

/***/ "(ssr)/./src/hooks/useSpaceToggle.ts":
/*!*************************************!*\
  !*** ./src/hooks/useSpaceToggle.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSpaceToggle: () => (/* binding */ useSpaceToggle)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction useSpaceToggle(onToggle) {\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const handler = (e)=>{\n            if (e.code !== \"Space\") return;\n            const target = e.target;\n            const tag = (target?.tagName || \"\").toLowerCase();\n            if (tag === \"input\" || tag === \"textarea\" || tag === \"select\" || target?.isContentEditable) return;\n            e.preventDefault();\n            onToggle();\n        };\n        window.addEventListener(\"keydown\", handler);\n        return ()=>window.removeEventListener(\"keydown\", handler);\n    }, [\n        onToggle\n    ]);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvaG9va3MvdXNlU3BhY2VUb2dnbGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlDO0FBRTFCLFNBQVNDLGVBQWVDLFFBQW9CO0lBQ2pERixnREFBU0EsQ0FBQztRQUNSLE1BQU1HLFVBQVUsQ0FBQ0M7WUFDZixJQUFJQSxFQUFFQyxJQUFJLEtBQUssU0FBUztZQUN4QixNQUFNQyxTQUFTRixFQUFFRSxNQUFNO1lBQ3ZCLE1BQU1DLE1BQU0sQ0FBQ0QsUUFBUUUsV0FBVyxFQUFDLEVBQUdDLFdBQVc7WUFDL0MsSUFBSUYsUUFBUSxXQUFXQSxRQUFRLGNBQWNBLFFBQVEsWUFBWUQsUUFBUUksbUJBQW1CO1lBQzVGTixFQUFFTyxjQUFjO1lBQ2hCVDtRQUNGO1FBQ0FVLE9BQU9DLGdCQUFnQixDQUFDLFdBQVdWO1FBQ25DLE9BQU8sSUFBTVMsT0FBT0UsbUJBQW1CLENBQUMsV0FBV1g7SUFDckQsR0FBRztRQUFDRDtLQUFTO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXJlYmlyZC1pbnRlcmFjdGl2ZS8uL3NyYy9ob29rcy91c2VTcGFjZVRvZ2dsZS50cz9mOGNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlU3BhY2VUb2dnbGUob25Ub2dnbGU6ICgpID0+IHZvaWQpIHtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVyID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGlmIChlLmNvZGUgIT09ICdTcGFjZScpIHJldHVyblxuICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQgfCBudWxsXG4gICAgICBjb25zdCB0YWcgPSAodGFyZ2V0Py50YWdOYW1lIHx8ICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICBpZiAodGFnID09PSAnaW5wdXQnIHx8IHRhZyA9PT0gJ3RleHRhcmVhJyB8fCB0YWcgPT09ICdzZWxlY3QnIHx8IHRhcmdldD8uaXNDb250ZW50RWRpdGFibGUpIHJldHVyblxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBvblRvZ2dsZSgpXG4gICAgfVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlcilcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVyKVxuICB9LCBbb25Ub2dnbGVdKVxufVxuIl0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVNwYWNlVG9nZ2xlIiwib25Ub2dnbGUiLCJoYW5kbGVyIiwiZSIsImNvZGUiLCJ0YXJnZXQiLCJ0YWciLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJpc0NvbnRlbnRFZGl0YWJsZSIsInByZXZlbnREZWZhdWx0Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/hooks/useSpaceToggle.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/audio/AudioScheduler.ts":
/*!*****************************************!*\
  !*** ./src/lib/audio/AudioScheduler.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioScheduler: () => (/* binding */ AudioScheduler)\n/* harmony export */ });\n/* harmony import */ var _audioUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./audioUtils */ \"(ssr)/./src/lib/audio/audioUtils.ts\");\n/* harmony import */ var _AudioService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./AudioService */ \"(ssr)/./src/lib/audio/AudioService.ts\");\n\n\nclass AudioScheduler {\n    constructor(params){\n        this.loopTimer = null;\n        this.tempoSwitch = null;\n        this.partsRef = params.partsRef;\n        this.playStateRef = params.playStateRef;\n        this.transportStartRef = params.transportStartRef;\n        this.currentTempoRef = params.currentTempoRef;\n        this.deferredQueueRef = params.deferredQueueRef;\n        this.removedInstanceIdsRef = params.removedInstanceIdsRef;\n        this.nodeStartTimesRef = params.nodeStartTimesRef;\n        this.setPartsCb = params.setParts;\n        this.loopAnchorRef = params.loopAnchorRef || {\n            current: null\n        };\n    }\n    scheduleLoopStartIfNeeded() {\n        const ctx = _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.audioCtx;\n        if (!ctx) return;\n        const transportStart = this.transportStartRef.current;\n        if (transportStart == null) return;\n        const tempo = this.currentTempoRef.current;\n        const { nextBeatIndex, scheduleTime } = (0,_audioUtils__WEBPACK_IMPORTED_MODULE_0__.computeNextBeatScheduleTime)(ctx.currentTime, transportStart, tempo);\n        const spb = (0,_audioUtils__WEBPACK_IMPORTED_MODULE_0__.secondsPerBeat)(tempo);\n        // schedule all assigned instruments\n        for (const part of this.partsRef.current){\n            for (const inst of part.assignedInstruments){\n                if (this.removedInstanceIdsRef.current.has(inst.id)) continue;\n                const bufs = _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.getBuffersFor(inst.id, tempo);\n                if (!bufs) continue;\n                const fadeMs = 15;\n                if (bufs.soft) {\n                    // At loop iteration boundaries, start from the beginning of the buffer to avoid cutting off the first beat\n                    const off = 0;\n                    _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.createAndStartNode(inst.id, bufs.soft, \"soft\", scheduleTime, off, fadeMs);\n                    const entry = this.nodeStartTimesRef.current[inst.id] ||= {\n                        soft: [],\n                        loud: []\n                    };\n                    entry.soft.push(scheduleTime);\n                }\n                if (bufs.loud) {\n                    const off = 0;\n                    _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.createAndStartNode(inst.id, bufs.loud, \"loud\", scheduleTime, off, fadeMs);\n                    const entry2 = this.nodeStartTimesRef.current[inst.id] ||= {\n                        soft: [],\n                        loud: []\n                    };\n                    entry2.loud.push(scheduleTime);\n                }\n            }\n        }\n        this.loopAnchorRef.current = scheduleTime;\n        // schedule processing of deferred queue exactly at scheduleTime\n        const delayMs = Math.max(0, (scheduleTime - ctx.currentTime) * 1000);\n        setTimeout(()=>this.processDeferredQueueAtBeat(nextBeatIndex, scheduleTime), delayMs);\n        // schedule next loop\n        const lead = 0.02;\n        const loopT = scheduleTime + (0,_audioUtils__WEBPACK_IMPORTED_MODULE_0__.loopDuration)(tempo) - lead;\n        const nextDelayMs = Math.max(0, (loopT - ctx.currentTime) * 1000);\n        this.loopTimer = setTimeout(()=>this.scheduleLoopStartIfNeeded(), nextDelayMs);\n    }\n    async processDeferredQueueAtBeat(beatIndex, scheduleTime) {\n        const tempo = this.currentTempoRef.current;\n        const ctx = _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.audioCtx;\n        if (!ctx) return;\n        const q = this.deferredQueueRef.current.slice();\n        this.deferredQueueRef.current = [];\n        for (const inst of q){\n            if (this.removedInstanceIdsRef.current.has(inst.id)) continue;\n            const partId = this.partsRef.current.find((p)=>p.assignedInstruments.some((ai)=>ai.id === inst.id))?.id;\n            if (!partId) continue;\n            await _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.preloadTempoForInstance(inst.id, partId, inst.instrumentId, tempo);\n            const bufs = _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.getBuffersFor(inst.id, tempo);\n            if (!bufs) continue;\n            const fadeMs = 15;\n            if (bufs.soft) {\n                const off = (0,_audioUtils__WEBPACK_IMPORTED_MODULE_0__.computeTargetOffsetForBeat)(beatIndex, tempo, bufs.soft.duration);\n                _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.createAndStartNode(inst.id, bufs.soft, \"soft\", scheduleTime, off, fadeMs);\n                const e = this.nodeStartTimesRef.current[inst.id] ||= {\n                    soft: [],\n                    loud: []\n                };\n                e.soft.push(scheduleTime);\n            }\n            if (bufs.loud) {\n                const off = (0,_audioUtils__WEBPACK_IMPORTED_MODULE_0__.computeTargetOffsetForBeat)(beatIndex, tempo, bufs.loud.duration);\n                _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.createAndStartNode(inst.id, bufs.loud, \"loud\", scheduleTime, off, fadeMs);\n                const e2 = this.nodeStartTimesRef.current[inst.id] ||= {\n                    soft: [],\n                    loud: []\n                };\n                e2.loud.push(scheduleTime);\n            }\n            // flip isLoading off in UI when scheduled\n            if (this.setPartsCb) {\n                this.setPartsCb((prev)=>prev.map((p)=>({\n                            ...p,\n                            assignedInstruments: p.assignedInstruments.map((ai)=>ai.id === inst.id ? {\n                                    ...ai,\n                                    isLoading: false,\n                                    queueTimeRemaining: undefined,\n                                    queueStartTime: undefined\n                                } : ai)\n                        })));\n            }\n        }\n    }\n    async scheduleTempoSwitch(targetTempo) {\n        const ctx = _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.audioCtx;\n        if (!ctx) return;\n        // preload for all assigned and queued\n        const parts = this.partsRef.current;\n        await Promise.all(parts.flatMap((p)=>p.assignedInstruments.map((inst)=>_AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.preloadTempoForInstance(inst.id, p.id, inst.instrumentId, targetTempo))));\n        await Promise.all(this.deferredQueueRef.current.map((inst)=>{\n            const partId = parts.find((p)=>p.assignedInstruments.some((ai)=>ai.id === inst.id))?.id;\n            return partId ? _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.preloadTempoForInstance(inst.id, partId, inst.instrumentId, targetTempo) : Promise.resolve();\n        }));\n        // compute next beat on current grid\n        const transportStart = this.transportStartRef.current;\n        if (transportStart == null) return;\n        const currentTempo = this.currentTempoRef.current;\n        const { nextBeatIndex, scheduleTime } = (0,_audioUtils__WEBPACK_IMPORTED_MODULE_0__.computeNextBeatScheduleTime)(ctx.currentTime, transportStart, currentTempo);\n        this.tempoSwitch = {\n            targetTempo,\n            scheduleTime\n        };\n        const delayMs = Math.max(0, (scheduleTime - ctx.currentTime) * 1000);\n        setTimeout(()=>{\n            // guard against duplicate execution\n            if (!this.tempoSwitch || this.tempoSwitch.scheduleTime !== scheduleTime || this.tempoSwitch.targetTempo !== targetTempo) return;\n            // At schedule, start new nodes at target tempo and fade old ones\n            for (const p of parts){\n                for (const inst of p.assignedInstruments){\n                    const newBufs = _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.getBuffersFor(inst.id, targetTempo);\n                    const fadeMs = Math.min(60, (0,_audioUtils__WEBPACK_IMPORTED_MODULE_0__.secondsPerBeat)(targetTempo) * 1000);\n                    // First, fade out any existing nodes at scheduleTime to avoid clobbering the new ones\n                    _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.fadeAndStopNode(inst.id, \"soft\", scheduleTime, fadeMs);\n                    _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.fadeAndStopNode(inst.id, \"loud\", scheduleTime, fadeMs);\n                    if (newBufs?.soft) {\n                        const off = (0,_audioUtils__WEBPACK_IMPORTED_MODULE_0__.computeTargetOffsetForBeat)(nextBeatIndex, targetTempo, newBufs.soft.duration);\n                        _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.createAndStartNode(inst.id, newBufs.soft, \"soft\", scheduleTime, off, fadeMs);\n                    }\n                    if (newBufs?.loud) {\n                        const off = (0,_audioUtils__WEBPACK_IMPORTED_MODULE_0__.computeTargetOffsetForBeat)(nextBeatIndex, targetTempo, newBufs.loud.duration);\n                        _AudioService__WEBPACK_IMPORTED_MODULE_1__.audioService.createAndStartNode(inst.id, newBufs.loud, \"loud\", scheduleTime, off, fadeMs);\n                    }\n                }\n            }\n            // Update tempo and re-anchor transport start so beat index continuity holds\n            this.currentTempoRef.current = targetTempo;\n            const spbTarget = (0,_audioUtils__WEBPACK_IMPORTED_MODULE_0__.secondsPerBeat)(targetTempo);\n            this.transportStartRef.current = scheduleTime - nextBeatIndex * spbTarget;\n            this.tempoSwitch = null;\n        }, delayMs);\n    }\n    getScheduledTempoSwitch() {\n        return this.tempoSwitch;\n    }\n    stop() {\n        if (this.loopTimer) {\n            clearTimeout(this.loopTimer);\n            this.loopTimer = null;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBMEJBLENBQUN5QixlQUFlK0MsYUFBYU8sUUFBUTFDLElBQUksQ0FBQ3lCLFFBQVE7d0JBQ3hGM0QsdURBQVlBLENBQUNvQyxrQkFBa0IsQ0FBQ1QsS0FBS0csRUFBRSxFQUFFOEMsUUFBUTFDLElBQUksRUFBRSxRQUFRWCxjQUFjWSxLQUFLRjtvQkFDcEY7b0JBQ0EsSUFBSTJDLFNBQVN0QyxNQUFNO3dCQUNqQixNQUFNSCxNQUFNdEMsdUVBQTBCQSxDQUFDeUIsZUFBZStDLGFBQWFPLFFBQVF0QyxJQUFJLENBQUNxQixRQUFRO3dCQUN4RjNELHVEQUFZQSxDQUFDb0Msa0JBQWtCLENBQUNULEtBQUtHLEVBQUUsRUFBRThDLFFBQVF0QyxJQUFJLEVBQUUsUUFBUWYsY0FBY1ksS0FBS0Y7b0JBQ3BGO2dCQUNGO1lBQ0Y7WUFDQSw0RUFBNEU7WUFDNUUsSUFBSSxDQUFDeEIsZUFBZSxDQUFDTyxPQUFPLEdBQUdxRDtZQUMvQixNQUFNVSxZQUFZaEYsMkRBQWNBLENBQUNzRTtZQUNqQyxJQUFJLENBQUM3RCxpQkFBaUIsQ0FBQ1EsT0FBTyxHQUFHTyxlQUFlRCxnQkFBZ0J5RDtZQUNoRSxJQUFJLENBQUMxRSxXQUFXLEdBQUc7UUFDckIsR0FBR29DO0lBQ0w7SUFFQXVDLDBCQUEwQjtRQUN4QixPQUFPLElBQUksQ0FBQzNFLFdBQVc7SUFDekI7SUFFQTRFLE9BQU87UUFDTCxJQUFJLElBQUksQ0FBQzdFLFNBQVMsRUFBRTtZQUNsQjhFLGFBQWEsSUFBSSxDQUFDOUUsU0FBUztZQUMzQixJQUFJLENBQUNBLFNBQVMsR0FBRztRQUNuQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXJlYmlyZC1pbnRlcmFjdGl2ZS8uL3NyYy9saWIvYXVkaW8vQXVkaW9TY2hlZHVsZXIudHM/NjI2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb21wdXRlTmV4dEJlYXRTY2hlZHVsZVRpbWUsIGNvbXB1dGVUYXJnZXRPZmZzZXRGb3JCZWF0LCBsb29wRHVyYXRpb24sIHNlY29uZHNQZXJCZWF0IH0gZnJvbSAnLi9hdWRpb1V0aWxzJ1xuaW1wb3J0IHR5cGUgeyBBc3NpZ25lZEluc3RydW1lbnQsIE11c2ljYWxQYXJ0LCBUZW1wbyB9IGZyb20gJ0AvbGliL3R5cGVzJ1xuaW1wb3J0IHsgYXVkaW9TZXJ2aWNlIH0gZnJvbSAnLi9BdWRpb1NlcnZpY2UnXG5cbnR5cGUgTXV0YWJsZVJlZjxUPiA9IHsgY3VycmVudDogVCB9XG5cbmV4cG9ydCBjbGFzcyBBdWRpb1NjaGVkdWxlciB7XG4gIHBhcnRzUmVmOiBNdXRhYmxlUmVmPE11c2ljYWxQYXJ0W10+XG4gIHBsYXlTdGF0ZVJlZjogTXV0YWJsZVJlZjxib29sZWFuPlxuICB0cmFuc3BvcnRTdGFydFJlZjogTXV0YWJsZVJlZjxudW1iZXIgfCBudWxsPlxuICBjdXJyZW50VGVtcG9SZWY6IE11dGFibGVSZWY8VGVtcG8+XG4gIGRlZmVycmVkUXVldWVSZWY6IE11dGFibGVSZWY8QXNzaWduZWRJbnN0cnVtZW50W10+XG4gIHJlbW92ZWRJbnN0YW5jZUlkc1JlZjogTXV0YWJsZVJlZjxTZXQ8c3RyaW5nPj5cbiAgbm9kZVN0YXJ0VGltZXNSZWY6IE11dGFibGVSZWY8UmVjb3JkPHN0cmluZywgeyBzb2Z0PzogbnVtYmVyW107IGxvdWQ/OiBudW1iZXJbXSB9Pj5cbiAgcHJpdmF0ZSBsb29wVGltZXI6IGFueSA9IG51bGxcbiAgcHJpdmF0ZSB0ZW1wb1N3aXRjaDogeyB0YXJnZXRUZW1wbzogVGVtcG87IHNjaGVkdWxlVGltZT86IG51bWJlciB9IHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBzZXRQYXJ0c0NiPzogKHVwZGF0ZXI6IChwcmV2OiBNdXNpY2FsUGFydFtdKSA9PiBNdXNpY2FsUGFydFtdKSA9PiB2b2lkXG5cbiAgY29uc3RydWN0b3IocGFyYW1zOiB7XG4gICAgcGFydHNSZWY6IE11dGFibGVSZWY8TXVzaWNhbFBhcnRbXT5cbiAgICBwbGF5U3RhdGVSZWY6IE11dGFibGVSZWY8Ym9vbGVhbj5cbiAgICB0cmFuc3BvcnRTdGFydFJlZjogTXV0YWJsZVJlZjxudW1iZXIgfCBudWxsPlxuICAgIGN1cnJlbnRUZW1wb1JlZjogTXV0YWJsZVJlZjxUZW1wbz5cbiAgICBkZWZlcnJlZFF1ZXVlUmVmOiBNdXRhYmxlUmVmPEFzc2lnbmVkSW5zdHJ1bWVudFtdPlxuICAgIHJlbW92ZWRJbnN0YW5jZUlkc1JlZjogTXV0YWJsZVJlZjxTZXQ8c3RyaW5nPj5cbiAgICBub2RlU3RhcnRUaW1lc1JlZjogTXV0YWJsZVJlZjxSZWNvcmQ8c3RyaW5nLCB7IHNvZnQ/OiBudW1iZXJbXTsgbG91ZD86IG51bWJlcltdIH0+PlxuICAgIGxvb3BBbmNob3JSZWY/OiBNdXRhYmxlUmVmPG51bWJlciB8IG51bGw+XG4gICAgc2V0UGFydHM/OiAodXBkYXRlcjogKHByZXY6IE11c2ljYWxQYXJ0W10pID0+IE11c2ljYWxQYXJ0W10pID0+IHZvaWRcbiAgfSkge1xuICAgIHRoaXMucGFydHNSZWYgPSBwYXJhbXMucGFydHNSZWZcbiAgICB0aGlzLnBsYXlTdGF0ZVJlZiA9IHBhcmFtcy5wbGF5U3RhdGVSZWZcbiAgICB0aGlzLnRyYW5zcG9ydFN0YXJ0UmVmID0gcGFyYW1zLnRyYW5zcG9ydFN0YXJ0UmVmXG4gICAgdGhpcy5jdXJyZW50VGVtcG9SZWYgPSBwYXJhbXMuY3VycmVudFRlbXBvUmVmXG4gICAgdGhpcy5kZWZlcnJlZFF1ZXVlUmVmID0gcGFyYW1zLmRlZmVycmVkUXVldWVSZWZcbiAgICB0aGlzLnJlbW92ZWRJbnN0YW5jZUlkc1JlZiA9IHBhcmFtcy5yZW1vdmVkSW5zdGFuY2VJZHNSZWZcbiAgICB0aGlzLm5vZGVTdGFydFRpbWVzUmVmID0gcGFyYW1zLm5vZGVTdGFydFRpbWVzUmVmXG4gICAgdGhpcy5zZXRQYXJ0c0NiID0gcGFyYW1zLnNldFBhcnRzXG4gICAgOyh0aGlzIGFzIGFueSkubG9vcEFuY2hvclJlZiA9IChwYXJhbXMgYXMgYW55KS5sb29wQW5jaG9yUmVmIHx8IHsgY3VycmVudDogbnVsbCB9XG4gIH1cblxuICBzY2hlZHVsZUxvb3BTdGFydElmTmVlZGVkKCkge1xuICAgIGNvbnN0IGN0eCA9IGF1ZGlvU2VydmljZS5hdWRpb0N0eFxuICAgIGlmICghY3R4KSByZXR1cm5cbiAgICBjb25zdCB0cmFuc3BvcnRTdGFydCA9IHRoaXMudHJhbnNwb3J0U3RhcnRSZWYuY3VycmVudFxuICAgIGlmICh0cmFuc3BvcnRTdGFydCA9PSBudWxsKSByZXR1cm5cbiAgICBjb25zdCB0ZW1wbyA9IHRoaXMuY3VycmVudFRlbXBvUmVmLmN1cnJlbnRcbiAgICBjb25zdCB7IG5leHRCZWF0SW5kZXgsIHNjaGVkdWxlVGltZSB9ID0gY29tcHV0ZU5leHRCZWF0U2NoZWR1bGVUaW1lKGN0eC5jdXJyZW50VGltZSwgdHJhbnNwb3J0U3RhcnQsIHRlbXBvKVxuICBjb25zdCBzcGIgPSBzZWNvbmRzUGVyQmVhdCh0ZW1wbylcbiAgICAvLyBzY2hlZHVsZSBhbGwgYXNzaWduZWQgaW5zdHJ1bWVudHNcbiAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5wYXJ0c1JlZi5jdXJyZW50KSB7XG4gICAgICBmb3IgKGNvbnN0IGluc3Qgb2YgcGFydC5hc3NpZ25lZEluc3RydW1lbnRzKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbW92ZWRJbnN0YW5jZUlkc1JlZi5jdXJyZW50LmhhcyhpbnN0LmlkKSkgY29udGludWVcbiAgICAgICAgY29uc3QgYnVmcyA9IGF1ZGlvU2VydmljZS5nZXRCdWZmZXJzRm9yKGluc3QuaWQsIHRlbXBvKVxuICAgICAgICBpZiAoIWJ1ZnMpIGNvbnRpbnVlXG4gICAgICAgIGNvbnN0IGZhZGVNcyA9IDE1XG4gICAgICAgIGlmIChidWZzLnNvZnQpIHtcbiAgICAgICAgICAvLyBBdCBsb29wIGl0ZXJhdGlvbiBib3VuZGFyaWVzLCBzdGFydCBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGJ1ZmZlciB0byBhdm9pZCBjdXR0aW5nIG9mZiB0aGUgZmlyc3QgYmVhdFxuICAgICAgICAgIGNvbnN0IG9mZiA9IDBcbiAgICAgICAgICBhdWRpb1NlcnZpY2UuY3JlYXRlQW5kU3RhcnROb2RlKGluc3QuaWQsIGJ1ZnMuc29mdCwgJ3NvZnQnLCBzY2hlZHVsZVRpbWUsIG9mZiwgZmFkZU1zKVxuICAgICAgICAgIGNvbnN0IGVudHJ5ID0gKHRoaXMubm9kZVN0YXJ0VGltZXNSZWYuY3VycmVudFtpbnN0LmlkXSB8fD0geyBzb2Z0OiBbXSwgbG91ZDogW10gfSlcbiAgICAgICAgICBlbnRyeS5zb2Z0IS5wdXNoKHNjaGVkdWxlVGltZSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoYnVmcy5sb3VkKSB7XG4gICAgICAgICAgY29uc3Qgb2ZmID0gMFxuICAgICAgICAgIGF1ZGlvU2VydmljZS5jcmVhdGVBbmRTdGFydE5vZGUoaW5zdC5pZCwgYnVmcy5sb3VkLCAnbG91ZCcsIHNjaGVkdWxlVGltZSwgb2ZmLCBmYWRlTXMpXG4gICAgICAgICAgY29uc3QgZW50cnkyID0gKHRoaXMubm9kZVN0YXJ0VGltZXNSZWYuY3VycmVudFtpbnN0LmlkXSB8fD0geyBzb2Z0OiBbXSwgbG91ZDogW10gfSlcbiAgICAgICAgICBlbnRyeTIubG91ZCEucHVzaChzY2hlZHVsZVRpbWUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgLy8gVXBkYXRlIGxvb3AgYW5jaG9yIHNvIFVJIGNhbiByZWZlcmVuY2UgYXVkaWJsZSBzdGFydCB0aW1lXG4gIDsodGhpcyBhcyBhbnkpLmxvb3BBbmNob3JSZWYuY3VycmVudCA9IHNjaGVkdWxlVGltZVxuXG4gIC8vIHNjaGVkdWxlIHByb2Nlc3Npbmcgb2YgZGVmZXJyZWQgcXVldWUgZXhhY3RseSBhdCBzY2hlZHVsZVRpbWVcbiAgICBjb25zdCBkZWxheU1zID0gTWF0aC5tYXgoMCwgKHNjaGVkdWxlVGltZSAtIGN0eC5jdXJyZW50VGltZSkgKiAxMDAwKVxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5wcm9jZXNzRGVmZXJyZWRRdWV1ZUF0QmVhdChuZXh0QmVhdEluZGV4LCBzY2hlZHVsZVRpbWUpLCBkZWxheU1zKVxuXG4gICAgLy8gc2NoZWR1bGUgbmV4dCBsb29wXG4gICAgY29uc3QgbGVhZCA9IDAuMDJcbiAgICBjb25zdCBsb29wVCA9IHNjaGVkdWxlVGltZSArIGxvb3BEdXJhdGlvbih0ZW1wbykgLSBsZWFkXG4gICAgY29uc3QgbmV4dERlbGF5TXMgPSBNYXRoLm1heCgwLCAobG9vcFQgLSBjdHguY3VycmVudFRpbWUpICogMTAwMClcbiAgICB0aGlzLmxvb3BUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5zY2hlZHVsZUxvb3BTdGFydElmTmVlZGVkKCksIG5leHREZWxheU1zKVxuICB9XG5cbiAgYXN5bmMgcHJvY2Vzc0RlZmVycmVkUXVldWVBdEJlYXQoYmVhdEluZGV4OiBudW1iZXIsIHNjaGVkdWxlVGltZTogbnVtYmVyKSB7XG4gICAgY29uc3QgdGVtcG8gPSB0aGlzLmN1cnJlbnRUZW1wb1JlZi5jdXJyZW50XG4gICAgY29uc3QgY3R4ID0gYXVkaW9TZXJ2aWNlLmF1ZGlvQ3R4XG4gICAgaWYgKCFjdHgpIHJldHVyblxuICAgIGNvbnN0IHEgPSB0aGlzLmRlZmVycmVkUXVldWVSZWYuY3VycmVudC5zbGljZSgpXG4gICAgdGhpcy5kZWZlcnJlZFF1ZXVlUmVmLmN1cnJlbnQgPSBbXVxuICAgIGZvciAoY29uc3QgaW5zdCBvZiBxKSB7XG4gICAgICBpZiAodGhpcy5yZW1vdmVkSW5zdGFuY2VJZHNSZWYuY3VycmVudC5oYXMoaW5zdC5pZCkpIGNvbnRpbnVlXG4gICAgICBjb25zdCBwYXJ0SWQgPSB0aGlzLnBhcnRzUmVmLmN1cnJlbnQuZmluZChwID0+IHAuYXNzaWduZWRJbnN0cnVtZW50cy5zb21lKGFpID0+IGFpLmlkID09PSBpbnN0LmlkKSk/LmlkXG4gICAgICBpZiAoIXBhcnRJZCkgY29udGludWVcbiAgICAgIGF3YWl0IGF1ZGlvU2VydmljZS5wcmVsb2FkVGVtcG9Gb3JJbnN0YW5jZShpbnN0LmlkLCBwYXJ0SWQsIGluc3QuaW5zdHJ1bWVudElkLCB0ZW1wbylcbiAgICAgIGNvbnN0IGJ1ZnMgPSBhdWRpb1NlcnZpY2UuZ2V0QnVmZmVyc0ZvcihpbnN0LmlkLCB0ZW1wbylcbiAgICAgIGlmICghYnVmcykgY29udGludWVcbiAgICAgIGNvbnN0IGZhZGVNcyA9IDE1XG4gICAgICBpZiAoYnVmcy5zb2Z0KSB7XG4gICAgICAgIGNvbnN0IG9mZiA9IGNvbXB1dGVUYXJnZXRPZmZzZXRGb3JCZWF0KGJlYXRJbmRleCwgdGVtcG8sIGJ1ZnMuc29mdC5kdXJhdGlvbilcbiAgICAgICAgYXVkaW9TZXJ2aWNlLmNyZWF0ZUFuZFN0YXJ0Tm9kZShpbnN0LmlkLCBidWZzLnNvZnQsICdzb2Z0Jywgc2NoZWR1bGVUaW1lLCBvZmYsIGZhZGVNcylcbiAgICAgICAgY29uc3QgZSA9ICh0aGlzLm5vZGVTdGFydFRpbWVzUmVmLmN1cnJlbnRbaW5zdC5pZF0gfHw9IHsgc29mdDogW10sIGxvdWQ6IFtdIH0pXG4gICAgICAgIGUuc29mdCEucHVzaChzY2hlZHVsZVRpbWUpXG4gICAgICB9XG4gICAgICBpZiAoYnVmcy5sb3VkKSB7XG4gICAgICAgIGNvbnN0IG9mZiA9IGNvbXB1dGVUYXJnZXRPZmZzZXRGb3JCZWF0KGJlYXRJbmRleCwgdGVtcG8sIGJ1ZnMubG91ZC5kdXJhdGlvbilcbiAgICAgICAgYXVkaW9TZXJ2aWNlLmNyZWF0ZUFuZFN0YXJ0Tm9kZShpbnN0LmlkLCBidWZzLmxvdWQsICdsb3VkJywgc2NoZWR1bGVUaW1lLCBvZmYsIGZhZGVNcylcbiAgICAgICAgY29uc3QgZTIgPSAodGhpcy5ub2RlU3RhcnRUaW1lc1JlZi5jdXJyZW50W2luc3QuaWRdIHx8PSB7IHNvZnQ6IFtdLCBsb3VkOiBbXSB9KVxuICAgICAgICBlMi5sb3VkIS5wdXNoKHNjaGVkdWxlVGltZSlcbiAgICAgIH1cbiAgICAgIC8vIGZsaXAgaXNMb2FkaW5nIG9mZiBpbiBVSSB3aGVuIHNjaGVkdWxlZFxuICAgICAgaWYgKHRoaXMuc2V0UGFydHNDYikge1xuICAgICAgICB0aGlzLnNldFBhcnRzQ2IocHJldiA9PiBwcmV2Lm1hcChwID0+ICh7XG4gICAgICAgICAgLi4ucCxcbiAgICAgICAgICBhc3NpZ25lZEluc3RydW1lbnRzOiBwLmFzc2lnbmVkSW5zdHJ1bWVudHMubWFwKGFpID0+IGFpLmlkID09PSBpbnN0LmlkID8geyAuLi5haSwgaXNMb2FkaW5nOiBmYWxzZSwgcXVldWVUaW1lUmVtYWluaW5nOiB1bmRlZmluZWQsIHF1ZXVlU3RhcnRUaW1lOiB1bmRlZmluZWQgfSA6IGFpKVxuICAgICAgICB9KSkpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2NoZWR1bGVUZW1wb1N3aXRjaCh0YXJnZXRUZW1wbzogVGVtcG8pIHtcbiAgICBjb25zdCBjdHggPSBhdWRpb1NlcnZpY2UuYXVkaW9DdHhcbiAgICBpZiAoIWN0eCkgcmV0dXJuXG4gICAgLy8gcHJlbG9hZCBmb3IgYWxsIGFzc2lnbmVkIGFuZCBxdWV1ZWRcbiAgICBjb25zdCBwYXJ0cyA9IHRoaXMucGFydHNSZWYuY3VycmVudFxuICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgcGFydHMuZmxhdE1hcChwID0+XG4gICAgICAgIHAuYXNzaWduZWRJbnN0cnVtZW50cy5tYXAoaW5zdCA9PiBhdWRpb1NlcnZpY2UucHJlbG9hZFRlbXBvRm9ySW5zdGFuY2UoaW5zdC5pZCwgcC5pZCwgaW5zdC5pbnN0cnVtZW50SWQsIHRhcmdldFRlbXBvKSlcbiAgICAgIClcbiAgICApXG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICB0aGlzLmRlZmVycmVkUXVldWVSZWYuY3VycmVudC5tYXAoaW5zdCA9PiB7XG4gICAgICAgIGNvbnN0IHBhcnRJZCA9IHBhcnRzLmZpbmQocCA9PiBwLmFzc2lnbmVkSW5zdHJ1bWVudHMuc29tZShhaSA9PiBhaS5pZCA9PT0gaW5zdC5pZCkpPy5pZFxuICAgICAgICByZXR1cm4gcGFydElkID8gYXVkaW9TZXJ2aWNlLnByZWxvYWRUZW1wb0Zvckluc3RhbmNlKGluc3QuaWQsIHBhcnRJZCwgaW5zdC5pbnN0cnVtZW50SWQsIHRhcmdldFRlbXBvKSA6IFByb21pc2UucmVzb2x2ZSgpXG4gICAgICB9KVxuICAgIClcbiAgICAvLyBjb21wdXRlIG5leHQgYmVhdCBvbiBjdXJyZW50IGdyaWRcbiAgICBjb25zdCB0cmFuc3BvcnRTdGFydCA9IHRoaXMudHJhbnNwb3J0U3RhcnRSZWYuY3VycmVudFxuICAgIGlmICh0cmFuc3BvcnRTdGFydCA9PSBudWxsKSByZXR1cm5cbiAgICBjb25zdCBjdXJyZW50VGVtcG8gPSB0aGlzLmN1cnJlbnRUZW1wb1JlZi5jdXJyZW50XG4gICAgY29uc3QgeyBuZXh0QmVhdEluZGV4LCBzY2hlZHVsZVRpbWUgfSA9IGNvbXB1dGVOZXh0QmVhdFNjaGVkdWxlVGltZShjdHguY3VycmVudFRpbWUsIHRyYW5zcG9ydFN0YXJ0LCBjdXJyZW50VGVtcG8pXG4gICAgdGhpcy50ZW1wb1N3aXRjaCA9IHsgdGFyZ2V0VGVtcG8sIHNjaGVkdWxlVGltZSB9XG4gICAgY29uc3QgZGVsYXlNcyA9IE1hdGgubWF4KDAsIChzY2hlZHVsZVRpbWUgLSBjdHguY3VycmVudFRpbWUpICogMTAwMClcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIC8vIGd1YXJkIGFnYWluc3QgZHVwbGljYXRlIGV4ZWN1dGlvblxuICAgICAgaWYgKCF0aGlzLnRlbXBvU3dpdGNoIHx8IHRoaXMudGVtcG9Td2l0Y2guc2NoZWR1bGVUaW1lICE9PSBzY2hlZHVsZVRpbWUgfHwgdGhpcy50ZW1wb1N3aXRjaC50YXJnZXRUZW1wbyAhPT0gdGFyZ2V0VGVtcG8pIHJldHVyblxuICAgICAgLy8gQXQgc2NoZWR1bGUsIHN0YXJ0IG5ldyBub2RlcyBhdCB0YXJnZXQgdGVtcG8gYW5kIGZhZGUgb2xkIG9uZXNcbiAgICAgIGZvciAoY29uc3QgcCBvZiBwYXJ0cykge1xuICAgICAgICBmb3IgKGNvbnN0IGluc3Qgb2YgcC5hc3NpZ25lZEluc3RydW1lbnRzKSB7XG4gICAgICAgICAgY29uc3QgbmV3QnVmcyA9IGF1ZGlvU2VydmljZS5nZXRCdWZmZXJzRm9yKGluc3QuaWQsIHRhcmdldFRlbXBvKVxuICAgICAgICAgIGNvbnN0IGZhZGVNcyA9IE1hdGgubWluKDYwLCBzZWNvbmRzUGVyQmVhdCh0YXJnZXRUZW1wbykgKiAxMDAwKVxuICAgICAgICAgIC8vIEZpcnN0LCBmYWRlIG91dCBhbnkgZXhpc3Rpbmcgbm9kZXMgYXQgc2NoZWR1bGVUaW1lIHRvIGF2b2lkIGNsb2JiZXJpbmcgdGhlIG5ldyBvbmVzXG4gICAgICAgICAgYXVkaW9TZXJ2aWNlLmZhZGVBbmRTdG9wTm9kZShpbnN0LmlkLCAnc29mdCcsIHNjaGVkdWxlVGltZSwgZmFkZU1zKVxuICAgICAgICAgIGF1ZGlvU2VydmljZS5mYWRlQW5kU3RvcE5vZGUoaW5zdC5pZCwgJ2xvdWQnLCBzY2hlZHVsZVRpbWUsIGZhZGVNcylcbiAgICAgICAgICBpZiAobmV3QnVmcz8uc29mdCkge1xuICAgICAgICAgICAgY29uc3Qgb2ZmID0gY29tcHV0ZVRhcmdldE9mZnNldEZvckJlYXQobmV4dEJlYXRJbmRleCwgdGFyZ2V0VGVtcG8sIG5ld0J1ZnMuc29mdC5kdXJhdGlvbilcbiAgICAgICAgICAgIGF1ZGlvU2VydmljZS5jcmVhdGVBbmRTdGFydE5vZGUoaW5zdC5pZCwgbmV3QnVmcy5zb2Z0LCAnc29mdCcsIHNjaGVkdWxlVGltZSwgb2ZmLCBmYWRlTXMpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChuZXdCdWZzPy5sb3VkKSB7XG4gICAgICAgICAgICBjb25zdCBvZmYgPSBjb21wdXRlVGFyZ2V0T2Zmc2V0Rm9yQmVhdChuZXh0QmVhdEluZGV4LCB0YXJnZXRUZW1wbywgbmV3QnVmcy5sb3VkLmR1cmF0aW9uKVxuICAgICAgICAgICAgYXVkaW9TZXJ2aWNlLmNyZWF0ZUFuZFN0YXJ0Tm9kZShpbnN0LmlkLCBuZXdCdWZzLmxvdWQsICdsb3VkJywgc2NoZWR1bGVUaW1lLCBvZmYsIGZhZGVNcylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFVwZGF0ZSB0ZW1wbyBhbmQgcmUtYW5jaG9yIHRyYW5zcG9ydCBzdGFydCBzbyBiZWF0IGluZGV4IGNvbnRpbnVpdHkgaG9sZHNcbiAgICAgIHRoaXMuY3VycmVudFRlbXBvUmVmLmN1cnJlbnQgPSB0YXJnZXRUZW1wb1xuICAgICAgY29uc3Qgc3BiVGFyZ2V0ID0gc2Vjb25kc1BlckJlYXQodGFyZ2V0VGVtcG8pXG4gICAgICB0aGlzLnRyYW5zcG9ydFN0YXJ0UmVmLmN1cnJlbnQgPSBzY2hlZHVsZVRpbWUgLSBuZXh0QmVhdEluZGV4ICogc3BiVGFyZ2V0XG4gICAgICB0aGlzLnRlbXBvU3dpdGNoID0gbnVsbFxuICAgIH0sIGRlbGF5TXMpXG4gIH1cblxuICBnZXRTY2hlZHVsZWRUZW1wb1N3aXRjaCgpIHtcbiAgICByZXR1cm4gdGhpcy50ZW1wb1N3aXRjaFxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5sb29wVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxvb3BUaW1lcilcbiAgICAgIHRoaXMubG9vcFRpbWVyID0gbnVsbFxuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbXB1dGVOZXh0QmVhdFNjaGVkdWxlVGltZSIsImNvbXB1dGVUYXJnZXRPZmZzZXRGb3JCZWF0IiwibG9vcER1cmF0aW9uIiwic2Vjb25kc1BlckJlYXQiLCJhdWRpb1NlcnZpY2UiLCJBdWRpb1NjaGVkdWxlciIsImNvbnN0cnVjdG9yIiwicGFyYW1zIiwibG9vcFRpbWVyIiwidGVtcG9Td2l0Y2giLCJwYXJ0c1JlZiIsInBsYXlTdGF0ZVJlZiIsInRyYW5zcG9ydFN0YXJ0UmVmIiwiY3VycmVudFRlbXBvUmVmIiwiZGVmZXJyZWRRdWV1ZVJlZiIsInJlbW92ZWRJbnN0YW5jZUlkc1JlZiIsIm5vZGVTdGFydFRpbWVzUmVmIiwic2V0UGFydHNDYiIsInNldFBhcnRzIiwibG9vcEFuY2hvclJlZiIsImN1cnJlbnQiLCJzY2hlZHVsZUxvb3BTdGFydElmTmVlZGVkIiwiY3R4IiwiYXVkaW9DdHgiLCJ0cmFuc3BvcnRTdGFydCIsInRlbXBvIiwibmV4dEJlYXRJbmRleCIsInNjaGVkdWxlVGltZSIsImN1cnJlbnRUaW1lIiwic3BiIiwicGFydCIsImluc3QiLCJhc3NpZ25lZEluc3RydW1lbnRzIiwiaGFzIiwiaWQiLCJidWZzIiwiZ2V0QnVmZmVyc0ZvciIsImZhZGVNcyIsInNvZnQiLCJvZmYiLCJjcmVhdGVBbmRTdGFydE5vZGUiLCJlbnRyeSIsImxvdWQiLCJwdXNoIiwiZW50cnkyIiwiZGVsYXlNcyIsIk1hdGgiLCJtYXgiLCJzZXRUaW1lb3V0IiwicHJvY2Vzc0RlZmVycmVkUXVldWVBdEJlYXQiLCJsZWFkIiwibG9vcFQiLCJuZXh0RGVsYXlNcyIsImJlYXRJbmRleCIsInEiLCJzbGljZSIsInBhcnRJZCIsImZpbmQiLCJwIiwic29tZSIsImFpIiwicHJlbG9hZFRlbXBvRm9ySW5zdGFuY2UiLCJpbnN0cnVtZW50SWQiLCJkdXJhdGlvbiIsImUiLCJlMiIsInByZXYiLCJtYXAiLCJpc0xvYWRpbmciLCJxdWV1ZVRpbWVSZW1haW5pbmciLCJ1bmRlZmluZWQiLCJxdWV1ZVN0YXJ0VGltZSIsInNjaGVkdWxlVGVtcG9Td2l0Y2giLCJ0YXJnZXRUZW1wbyIsInBhcnRzIiwiUHJvbWlzZSIsImFsbCIsImZsYXRNYXAiLCJyZXNvbHZlIiwiY3VycmVudFRlbXBvIiwibmV3QnVmcyIsIm1pbiIsImZhZGVBbmRTdG9wTm9kZSIsInNwYlRhcmdldCIsImdldFNjaGVkdWxlZFRlbXBvU3dpdGNoIiwic3RvcCIsImNsZWFyVGltZW91dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/audio/AudioScheduler.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/audio/AudioService.ts":
/*!***************************************!*\
  !*** ./src/lib/audio/AudioService.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AudioService: () => (/* binding */ AudioService),\n/* harmony export */   audioService: () => (/* binding */ audioService)\n/* harmony export */ });\n/* harmony import */ var _audioUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./audioUtils */ \"(ssr)/./src/lib/audio/audioUtils.ts\");\n\nclass AudioService {\n    initIfNeeded() {\n        if (!this.audioCtx) {\n            const AC = globalThis.AudioContext || globalThis.webkitAudioContext;\n            this.audioCtx = new AC();\n            const ctx = this.audioCtx;\n            const limiter = ctx.createDynamicsCompressor();\n            limiter.threshold.value = -10;\n            limiter.knee.value = 20;\n            limiter.ratio.value = 12;\n            limiter.attack.value = 0.003;\n            limiter.release.value = 0.25;\n            this.limiter = limiter;\n            this.destination = limiter;\n            limiter.connect(ctx.destination);\n        }\n    }\n    async loadAudioBuffer(url) {\n        this.initIfNeeded();\n        if (!this.audioCtx) throw new Error(\"AudioContext not initialized\");\n        if (this.bufferCache.has(url)) return this.bufferCache.get(url);\n        const res = await fetch(url);\n        if (!res.ok) throw new Error(`Failed to fetch ${url}`);\n        const arrayBuf = await res.arrayBuffer();\n        const buffer = await this.audioCtx.decodeAudioData(arrayBuf.slice(0));\n        (0,_audioUtils__WEBPACK_IMPORTED_MODULE_0__.applyDecodeFades)(buffer, 20);\n        this.bufferCache.set(url, buffer);\n        return buffer;\n    }\n    getBaseGainPair(instId) {\n        this.initIfNeeded();\n        if (!this.audioCtx || !this.destination) throw new Error(\"Audio not ready\");\n        const existing = this.baseGains.get(instId);\n        if (existing) return existing;\n        const soft = this.audioCtx.createGain();\n        const loud = this.audioCtx.createGain();\n        soft.gain.value = 1;\n        loud.gain.value = 0;\n        soft.connect(this.destination);\n        loud.connect(this.destination);\n        const pair = {\n            soft,\n            loud\n        };\n        this.baseGains.set(instId, pair);\n        return pair;\n    }\n    setBaseGainValues(instId, balancePercent, muted) {\n        const pair = this.getBaseGainPair(instId);\n        if (muted) {\n            pair.soft.gain.value = 0;\n            pair.loud.gain.value = 0;\n            return;\n        }\n        const bal = Math.max(0, Math.min(100, balancePercent)) / 100;\n        pair.soft.gain.value = 1 - bal;\n        pair.loud.gain.value = bal;\n    }\n    createAndStartNode(instId, buffer, type, startTime, offsetSeconds, fadeMs) {\n        if (!this.audioCtx) throw new Error(\"AudioContext not ready\");\n        const base = this.getBaseGainPair(instId);\n        // If an existing node of same type is active, fade it out at startTime to avoid long overlap\n        const existing = this.activeNodes.get(instId);\n        const existingEntry = existing ? existing[type] : undefined;\n        if (existingEntry) {\n            const endTime = startTime + fadeMs / 1000;\n            existingEntry.gain.gain.cancelScheduledValues(startTime);\n            existingEntry.gain.gain.setValueAtTime(existingEntry.gain.gain.value, startTime);\n            existingEntry.gain.gain.linearRampToValueAtTime(0, endTime);\n            try {\n                existingEntry.src.stop(endTime);\n            } catch  {}\n        }\n        const perGain = this.audioCtx.createGain();\n        perGain.gain.setValueAtTime(0, startTime);\n        perGain.gain.linearRampToValueAtTime(1, startTime + fadeMs / 1000);\n        const src = this.audioCtx.createBufferSource();\n        src.buffer = buffer;\n        if (type === \"soft\") perGain.connect(base.soft);\n        else perGain.connect(base.loud);\n        src.connect(perGain);\n        try {\n            src.start(startTime, offsetSeconds);\n        } catch (e) {\n            console.warn(\"Failed to start source\", e);\n        }\n        const current = this.activeNodes.get(instId) || {};\n        current[type] = {\n            src,\n            gain: perGain\n        };\n        this.activeNodes.set(instId, current);\n        return {\n            src,\n            perGain\n        };\n    }\n    stopAndCleanupNode(instId, type, stopTime) {\n        const record = this.activeNodes.get(instId);\n        if (!record) return;\n        const entry = record[type];\n        if (!entry) return;\n        const t = stopTime ?? this.audioCtx?.currentTime ?? 0;\n        try {\n            entry.src.stop(t);\n        } catch  {}\n        try {\n            entry.src.disconnect();\n            entry.gain.disconnect();\n        } catch  {}\n        delete record[type];\n        this.activeNodes.set(instId, record);\n    }\n    fadeAndStopNode(instId, type, startTime, fadeMs) {\n        const rec = this.activeNodes.get(instId);\n        if (!rec) return;\n        const entry = rec[type];\n        if (!entry) return;\n        const endTime = startTime + fadeMs / 1000;\n        entry.gain.gain.cancelScheduledValues(startTime);\n        entry.gain.gain.setValueAtTime(entry.gain.gain.value, startTime);\n        entry.gain.gain.linearRampToValueAtTime(0, endTime);\n        try {\n            entry.src.stop(endTime);\n        } catch  {}\n    }\n    stopAllActive(fadeMs = 50) {\n        if (!this.audioCtx) return;\n        const now = this.audioCtx.currentTime;\n        for (const [instId, rec] of this.activeNodes.entries()){\n            const types = [\n                \"soft\",\n                \"loud\"\n            ];\n            for (const t of types){\n                const entry = rec[t];\n                if (!entry) continue;\n                entry.gain.gain.cancelScheduledValues(now);\n                entry.gain.gain.setValueAtTime(entry.gain.gain.value, now);\n                entry.gain.gain.linearRampToValueAtTime(0, now + fadeMs / 1000);\n                try {\n                    entry.src.stop(now + fadeMs / 1000);\n                } catch  {}\n            }\n        }\n        // Clear map after short delay\n        setTimeout(()=>{\n            for (const rec of this.activeNodes.values()){\n                try {\n                    rec.soft?.src.disconnect();\n                    rec.soft?.gain.disconnect();\n                    rec.loud?.src.disconnect();\n                    rec.loud?.gain.disconnect();\n                } catch  {}\n            }\n            this.activeNodes.clear();\n        }, fadeMs + 10);\n    }\n    releaseInstance(instId) {\n        // Stop any active nodes immediately\n        this.stopAndCleanupNode(instId, \"soft\");\n        this.stopAndCleanupNode(instId, \"loud\");\n        // Disconnect and delete base gains\n        const gains = this.baseGains.get(instId);\n        if (gains) {\n            try {\n                gains.soft.disconnect();\n            } catch  {}\n            try {\n                gains.loud.disconnect();\n            } catch  {}\n            this.baseGains.delete(instId);\n        }\n        // Clear active nodes record\n        this.activeNodes.delete(instId);\n        // Drop buffers for this instance\n        this.buffersByInstTempo.delete(instId);\n    }\n    async preloadTempoForInstance(instId, partId, instrumentId, tempo) {\n        const softUrl = `/audio/${partId}/${instrumentId}-p-${tempo}.mp3`;\n        const loudUrl = `/audio/${partId}/${instrumentId}-f-${tempo}.mp3`;\n        const [soft, loud] = await Promise.all([\n            this.loadAudioBuffer(softUrl).catch(()=>null),\n            this.loadAudioBuffer(loudUrl).catch(()=>null)\n        ]);\n        const entry = this.buffersByInstTempo.get(instId) || {};\n        entry[tempo] = {\n            soft: soft ?? undefined,\n            loud: loud ?? undefined\n        };\n        this.buffersByInstTempo.set(instId, entry);\n    }\n    getBuffersFor(instId, tempo) {\n        const e = this.buffersByInstTempo.get(instId);\n        return e ? e[tempo] : undefined;\n    }\n    getInspectorSnapshot() {\n        return {\n            getAudioBuffers: ()=>{\n                // Derive per-inst presence for current tempo isnt available here; return union presence\n                const snap = {};\n                for (const [k, v] of this.buffersByInstTempo.entries()){\n                    snap[k] = {\n                        soft: !!(v.fast?.soft || v.slow?.soft),\n                        loud: !!(v.fast?.loud || v.slow?.loud)\n                    };\n                }\n                return snap;\n            },\n            getAudioBuffersByTempo: ()=>this.getBuffersByInstTempoSnapshot(),\n            getNodeStartTimes: ()=>({}),\n            getDeferredQueue: ()=>[],\n            getPlayState: ()=>false,\n            getParts: ()=>[],\n            scheduledTempoSwitch: null,\n            getTransportStartTime: ()=>null,\n            getTempo: ()=>\"fast\"\n        };\n    }\n    getBuffersByInstTempoSnapshot() {\n        const out = {};\n        for (const [k, v] of this.buffersByInstTempo.entries()){\n            out[k] = {\n                fast: {\n                    soft: !!v.fast?.soft,\n                    loud: !!v.fast?.loud\n                },\n                slow: {\n                    soft: !!v.slow?.soft,\n                    loud: !!v.slow?.loud\n                }\n            };\n        }\n        return out;\n    }\n    constructor(){\n        this.audioCtx = null;\n        this.bufferCache = new Map();\n        this.baseGains = new Map();\n        this.limiter = null;\n        this.destination = null;\n        // active nodes per instance and type\n        this.activeNodes = new Map();\n        // buffers by instance id and tempo\n        this.buffersByInstTempo = new Map();\n    }\n}\nconst audioService = new AudioService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O2dCQUFLO1lBQ3JEO1FBQ0Y7UUFDQSxPQUFPOEU7SUFDVDs7YUFqUEFuSCxXQUFnQzthQUN4Qm1CLGNBQTJCLElBQUlpRzthQUMvQmxGLFlBQW1DLElBQUlrRjthQUN2QzlHLFVBQXlDO2FBQ3pDUSxjQUFnQztRQUV4QyxxQ0FBcUM7YUFDN0J1QyxjQUE2SSxJQUFJK0Q7UUFFekosbUNBQW1DO2FBQzNCNUIscUJBQTRJLElBQUk0Qjs7QUF3TzFKO0FBRU8sTUFBTUMsZUFBZSxJQUFJdkgsZUFBYyIsInNvdXJjZXMiOlsid2VicGFjazovL2ZpcmViaXJkLWludGVyYWN0aXZlLy4vc3JjL2xpYi9hdWRpby9BdWRpb1NlcnZpY2UudHM/M2Q0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhcHBseURlY29kZUZhZGVzIH0gZnJvbSAnLi9hdWRpb1V0aWxzJ1xuaW1wb3J0IHR5cGUgeyBHYWluUGFpciwgVGVtcG8sIEF1ZGlvSW5zcGVjdG9yU25hcHNob3QgfSBmcm9tICdAL2xpYi90eXBlcydcblxudHlwZSBCdWZmZXJCeVVybCA9IE1hcDxzdHJpbmcsIEF1ZGlvQnVmZmVyPlxuXG5leHBvcnQgY2xhc3MgQXVkaW9TZXJ2aWNlIHtcbiAgYXVkaW9DdHg6IEF1ZGlvQ29udGV4dCB8IG51bGwgPSBudWxsXG4gIHByaXZhdGUgYnVmZmVyQ2FjaGU6IEJ1ZmZlckJ5VXJsID0gbmV3IE1hcCgpXG4gIHByaXZhdGUgYmFzZUdhaW5zOiBNYXA8c3RyaW5nLCBHYWluUGFpcj4gPSBuZXcgTWFwKClcbiAgcHJpdmF0ZSBsaW1pdGVyOiBEeW5hbWljc0NvbXByZXNzb3JOb2RlIHwgbnVsbCA9IG51bGxcbiAgcHJpdmF0ZSBkZXN0aW5hdGlvbjogQXVkaW9Ob2RlIHwgbnVsbCA9IG51bGxcblxuICAvLyBhY3RpdmUgbm9kZXMgcGVyIGluc3RhbmNlIGFuZCB0eXBlXG4gIHByaXZhdGUgYWN0aXZlTm9kZXM6IE1hcDxzdHJpbmcsIHsgc29mdD86IHsgc3JjOiBBdWRpb0J1ZmZlclNvdXJjZU5vZGU7IGdhaW46IEdhaW5Ob2RlIH07IGxvdWQ/OiB7IHNyYzogQXVkaW9CdWZmZXJTb3VyY2VOb2RlOyBnYWluOiBHYWluTm9kZSB9IH0+ID0gbmV3IE1hcCgpXG5cbiAgLy8gYnVmZmVycyBieSBpbnN0YW5jZSBpZCBhbmQgdGVtcG9cbiAgcHJpdmF0ZSBidWZmZXJzQnlJbnN0VGVtcG86IE1hcDxzdHJpbmcsIHsgZmFzdD86IHsgc29mdD86IEF1ZGlvQnVmZmVyOyBsb3VkPzogQXVkaW9CdWZmZXIgfTsgc2xvdz86IHsgc29mdD86IEF1ZGlvQnVmZmVyOyBsb3VkPzogQXVkaW9CdWZmZXIgfSB9PiA9IG5ldyBNYXAoKVxuXG4gIGluaXRJZk5lZWRlZCgpIHtcbiAgICBpZiAoIXRoaXMuYXVkaW9DdHgpIHtcbiAgY29uc3QgQUMgPSAoZ2xvYmFsVGhpcyBhcyBhbnkpLkF1ZGlvQ29udGV4dCB8fCAoZ2xvYmFsVGhpcyBhcyBhbnkpLndlYmtpdEF1ZGlvQ29udGV4dFxuICB0aGlzLmF1ZGlvQ3R4ID0gbmV3IEFDKClcbiAgY29uc3QgY3R4ID0gdGhpcy5hdWRpb0N0eCFcbiAgY29uc3QgbGltaXRlciA9IGN0eC5jcmVhdGVEeW5hbWljc0NvbXByZXNzb3IoKVxuICAgICAgbGltaXRlci50aHJlc2hvbGQudmFsdWUgPSAtMTBcbiAgICAgIGxpbWl0ZXIua25lZS52YWx1ZSA9IDIwXG4gICAgICBsaW1pdGVyLnJhdGlvLnZhbHVlID0gMTJcbiAgICAgIGxpbWl0ZXIuYXR0YWNrLnZhbHVlID0gMC4wMDNcbiAgICAgIGxpbWl0ZXIucmVsZWFzZS52YWx1ZSA9IDAuMjVcbiAgICAgIHRoaXMubGltaXRlciA9IGxpbWl0ZXJcbiAgICAgIHRoaXMuZGVzdGluYXRpb24gPSBsaW1pdGVyXG4gIGxpbWl0ZXIuY29ubmVjdChjdHguZGVzdGluYXRpb24pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbG9hZEF1ZGlvQnVmZmVyKHVybDogc3RyaW5nKTogUHJvbWlzZTxBdWRpb0J1ZmZlcj4ge1xuICAgIHRoaXMuaW5pdElmTmVlZGVkKClcbiAgICBpZiAoIXRoaXMuYXVkaW9DdHgpIHRocm93IG5ldyBFcnJvcignQXVkaW9Db250ZXh0IG5vdCBpbml0aWFsaXplZCcpXG4gICAgaWYgKHRoaXMuYnVmZmVyQ2FjaGUuaGFzKHVybCkpIHJldHVybiB0aGlzLmJ1ZmZlckNhY2hlLmdldCh1cmwpIGFzIEF1ZGlvQnVmZmVyXG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKVxuICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCAke3VybH1gKVxuICAgIGNvbnN0IGFycmF5QnVmID0gYXdhaXQgcmVzLmFycmF5QnVmZmVyKClcbiAgICBjb25zdCBidWZmZXIgPSBhd2FpdCB0aGlzLmF1ZGlvQ3R4LmRlY29kZUF1ZGlvRGF0YShhcnJheUJ1Zi5zbGljZSgwKSlcbiAgICBhcHBseURlY29kZUZhZGVzKGJ1ZmZlciwgMjApXG4gICAgdGhpcy5idWZmZXJDYWNoZS5zZXQodXJsLCBidWZmZXIpXG4gICAgcmV0dXJuIGJ1ZmZlclxuICB9XG5cbiAgZ2V0QmFzZUdhaW5QYWlyKGluc3RJZDogc3RyaW5nKTogR2FpblBhaXIge1xuICAgIHRoaXMuaW5pdElmTmVlZGVkKClcbiAgICBpZiAoIXRoaXMuYXVkaW9DdHggfHwgIXRoaXMuZGVzdGluYXRpb24pIHRocm93IG5ldyBFcnJvcignQXVkaW8gbm90IHJlYWR5JylcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuYmFzZUdhaW5zLmdldChpbnN0SWQpXG4gICAgaWYgKGV4aXN0aW5nKSByZXR1cm4gZXhpc3RpbmdcbiAgICBjb25zdCBzb2Z0ID0gdGhpcy5hdWRpb0N0eC5jcmVhdGVHYWluKClcbiAgICBjb25zdCBsb3VkID0gdGhpcy5hdWRpb0N0eC5jcmVhdGVHYWluKClcbiAgICBzb2Z0LmdhaW4udmFsdWUgPSAxXG4gICAgbG91ZC5nYWluLnZhbHVlID0gMFxuICAgIHNvZnQuY29ubmVjdCh0aGlzLmRlc3RpbmF0aW9uKVxuICAgIGxvdWQuY29ubmVjdCh0aGlzLmRlc3RpbmF0aW9uKVxuICAgIGNvbnN0IHBhaXIgPSB7IHNvZnQsIGxvdWQgfVxuICAgIHRoaXMuYmFzZUdhaW5zLnNldChpbnN0SWQsIHBhaXIpXG4gICAgcmV0dXJuIHBhaXJcbiAgfVxuXG4gIHNldEJhc2VHYWluVmFsdWVzKGluc3RJZDogc3RyaW5nLCBiYWxhbmNlUGVyY2VudDogbnVtYmVyLCBtdXRlZDogYm9vbGVhbikge1xuICAgIGNvbnN0IHBhaXIgPSB0aGlzLmdldEJhc2VHYWluUGFpcihpbnN0SWQpXG4gICAgaWYgKG11dGVkKSB7XG4gICAgICBwYWlyLnNvZnQuZ2Fpbi52YWx1ZSA9IDBcbiAgICAgIHBhaXIubG91ZC5nYWluLnZhbHVlID0gMFxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGJhbCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgYmFsYW5jZVBlcmNlbnQpKSAvIDEwMFxuICAgIHBhaXIuc29mdC5nYWluLnZhbHVlID0gMSAtIGJhbFxuICAgIHBhaXIubG91ZC5nYWluLnZhbHVlID0gYmFsXG4gIH1cblxuICBjcmVhdGVBbmRTdGFydE5vZGUoXG4gICAgaW5zdElkOiBzdHJpbmcsXG4gICAgYnVmZmVyOiBBdWRpb0J1ZmZlcixcbiAgICB0eXBlOiAnc29mdCcgfCAnbG91ZCcsXG4gICAgc3RhcnRUaW1lOiBudW1iZXIsXG4gICAgb2Zmc2V0U2Vjb25kczogbnVtYmVyLFxuICAgIGZhZGVNczogbnVtYmVyXG4gICkge1xuICAgIGlmICghdGhpcy5hdWRpb0N0eCkgdGhyb3cgbmV3IEVycm9yKCdBdWRpb0NvbnRleHQgbm90IHJlYWR5JylcbiAgICBjb25zdCBiYXNlID0gdGhpcy5nZXRCYXNlR2FpblBhaXIoaW5zdElkKVxuICAgIC8vIElmIGFuIGV4aXN0aW5nIG5vZGUgb2Ygc2FtZSB0eXBlIGlzIGFjdGl2ZSwgZmFkZSBpdCBvdXQgYXQgc3RhcnRUaW1lIHRvIGF2b2lkIGxvbmcgb3ZlcmxhcFxuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5hY3RpdmVOb2Rlcy5nZXQoaW5zdElkKVxuICAgIGNvbnN0IGV4aXN0aW5nRW50cnkgPSBleGlzdGluZyA/IChleGlzdGluZyBhcyBhbnkpW3R5cGVdIGFzIHsgc3JjOiBBdWRpb0J1ZmZlclNvdXJjZU5vZGU7IGdhaW46IEdhaW5Ob2RlIH0gfCB1bmRlZmluZWQgOiB1bmRlZmluZWRcbiAgICBpZiAoZXhpc3RpbmdFbnRyeSkge1xuICAgICAgY29uc3QgZW5kVGltZSA9IHN0YXJ0VGltZSArIGZhZGVNcyAvIDEwMDBcbiAgICAgIGV4aXN0aW5nRW50cnkuZ2Fpbi5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhzdGFydFRpbWUpXG4gICAgICBleGlzdGluZ0VudHJ5LmdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZShleGlzdGluZ0VudHJ5LmdhaW4uZ2Fpbi52YWx1ZSwgc3RhcnRUaW1lKVxuICAgICAgZXhpc3RpbmdFbnRyeS5nYWluLmdhaW4ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUoMCwgZW5kVGltZSlcbiAgICAgIHRyeSB7IGV4aXN0aW5nRW50cnkuc3JjLnN0b3AoZW5kVGltZSkgfSBjYXRjaCB7fVxuICAgIH1cbiAgICBjb25zdCBwZXJHYWluID0gdGhpcy5hdWRpb0N0eC5jcmVhdGVHYWluKClcbiAgICBwZXJHYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCwgc3RhcnRUaW1lKVxuICAgIHBlckdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgxLCBzdGFydFRpbWUgKyBmYWRlTXMgLyAxMDAwKVxuICAgIGNvbnN0IHNyYyA9IHRoaXMuYXVkaW9DdHguY3JlYXRlQnVmZmVyU291cmNlKClcbiAgICBzcmMuYnVmZmVyID0gYnVmZmVyXG4gICAgaWYgKHR5cGUgPT09ICdzb2Z0JykgcGVyR2Fpbi5jb25uZWN0KGJhc2Uuc29mdClcbiAgICBlbHNlIHBlckdhaW4uY29ubmVjdChiYXNlLmxvdWQpXG4gICAgc3JjLmNvbm5lY3QocGVyR2FpbilcbiAgICB0cnkge1xuICAgICAgc3JjLnN0YXJ0KHN0YXJ0VGltZSwgb2Zmc2V0U2Vjb25kcylcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBzdGFydCBzb3VyY2UnLCBlKVxuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmFjdGl2ZU5vZGVzLmdldChpbnN0SWQpIHx8IHt9XG4gICAgOyhjdXJyZW50IGFzIGFueSlbdHlwZV0gPSB7IHNyYywgZ2FpbjogcGVyR2FpbiB9XG4gICAgdGhpcy5hY3RpdmVOb2Rlcy5zZXQoaW5zdElkLCBjdXJyZW50KVxuICAgIHJldHVybiB7IHNyYywgcGVyR2FpbiB9XG4gIH1cblxuICBzdG9wQW5kQ2xlYW51cE5vZGUoaW5zdElkOiBzdHJpbmcsIHR5cGU6ICdzb2Z0JyB8ICdsb3VkJywgc3RvcFRpbWU/OiBudW1iZXIpIHtcbiAgICBjb25zdCByZWNvcmQgPSB0aGlzLmFjdGl2ZU5vZGVzLmdldChpbnN0SWQpXG4gICAgaWYgKCFyZWNvcmQpIHJldHVyblxuICAgIGNvbnN0IGVudHJ5ID0gKHJlY29yZCBhcyBhbnkpW3R5cGVdIGFzIHsgc3JjOiBBdWRpb0J1ZmZlclNvdXJjZU5vZGU7IGdhaW46IEdhaW5Ob2RlIH0gfCB1bmRlZmluZWRcbiAgICBpZiAoIWVudHJ5KSByZXR1cm5cbiAgICBjb25zdCB0ID0gc3RvcFRpbWUgPz8gdGhpcy5hdWRpb0N0eD8uY3VycmVudFRpbWUgPz8gMFxuICAgIHRyeSB7XG4gICAgICBlbnRyeS5zcmMuc3RvcCh0KVxuICAgIH0gY2F0Y2gge31cbiAgICB0cnkge1xuICAgICAgZW50cnkuc3JjLmRpc2Nvbm5lY3QoKVxuICAgICAgZW50cnkuZ2Fpbi5kaXNjb25uZWN0KClcbiAgICB9IGNhdGNoIHt9XG4gICAgZGVsZXRlIChyZWNvcmQgYXMgYW55KVt0eXBlXVxuICAgIHRoaXMuYWN0aXZlTm9kZXMuc2V0KGluc3RJZCwgcmVjb3JkKVxuICB9XG5cbiAgZmFkZUFuZFN0b3BOb2RlKGluc3RJZDogc3RyaW5nLCB0eXBlOiAnc29mdCcgfCAnbG91ZCcsIHN0YXJ0VGltZTogbnVtYmVyLCBmYWRlTXM6IG51bWJlcikge1xuICAgIGNvbnN0IHJlYyA9IHRoaXMuYWN0aXZlTm9kZXMuZ2V0KGluc3RJZClcbiAgICBpZiAoIXJlYykgcmV0dXJuXG4gICAgY29uc3QgZW50cnkgPSAocmVjIGFzIGFueSlbdHlwZV0gYXMgeyBzcmM6IEF1ZGlvQnVmZmVyU291cmNlTm9kZTsgZ2FpbjogR2Fpbk5vZGUgfSB8IHVuZGVmaW5lZFxuICAgIGlmICghZW50cnkpIHJldHVyblxuICAgIGNvbnN0IGVuZFRpbWUgPSBzdGFydFRpbWUgKyBmYWRlTXMgLyAxMDAwXG4gICAgZW50cnkuZ2Fpbi5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhzdGFydFRpbWUpXG4gICAgZW50cnkuZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKGVudHJ5LmdhaW4uZ2Fpbi52YWx1ZSwgc3RhcnRUaW1lKVxuICAgIGVudHJ5LmdhaW4uZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSgwLCBlbmRUaW1lKVxuICAgIHRyeSB7IGVudHJ5LnNyYy5zdG9wKGVuZFRpbWUpIH0gY2F0Y2gge31cbiAgfVxuXG4gIHN0b3BBbGxBY3RpdmUoZmFkZU1zID0gNTApIHtcbiAgICBpZiAoIXRoaXMuYXVkaW9DdHgpIHJldHVyblxuICAgIGNvbnN0IG5vdyA9IHRoaXMuYXVkaW9DdHguY3VycmVudFRpbWVcbiAgICBmb3IgKGNvbnN0IFtpbnN0SWQsIHJlY10gb2YgdGhpcy5hY3RpdmVOb2Rlcy5lbnRyaWVzKCkpIHtcbiAgICAgIGNvbnN0IHR5cGVzOiBBcnJheTwnc29mdCcgfCAnbG91ZCc+ID0gWydzb2Z0JywgJ2xvdWQnXVxuICAgICAgZm9yIChjb25zdCB0IG9mIHR5cGVzKSB7XG4gICAgICAgIGNvbnN0IGVudHJ5ID0gKHJlYyBhcyBhbnkpW3RdIGFzIHsgc3JjOiBBdWRpb0J1ZmZlclNvdXJjZU5vZGU7IGdhaW46IEdhaW5Ob2RlIH0gfCB1bmRlZmluZWRcbiAgICAgICAgaWYgKCFlbnRyeSkgY29udGludWVcbiAgICAgICAgZW50cnkuZ2Fpbi5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyhub3cpXG4gICAgICAgIGVudHJ5LmdhaW4uZ2Fpbi5zZXRWYWx1ZUF0VGltZShlbnRyeS5nYWluLmdhaW4udmFsdWUsIG5vdylcbiAgICAgICAgZW50cnkuZ2Fpbi5nYWluLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKDAsIG5vdyArIGZhZGVNcyAvIDEwMDApXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZW50cnkuc3JjLnN0b3Aobm93ICsgZmFkZU1zIC8gMTAwMClcbiAgICAgICAgfSBjYXRjaCB7fVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBDbGVhciBtYXAgYWZ0ZXIgc2hvcnQgZGVsYXlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgcmVjIG9mIHRoaXMuYWN0aXZlTm9kZXMudmFsdWVzKCkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICA7KHJlYyBhcyBhbnkpLnNvZnQ/LnNyYy5kaXNjb25uZWN0KClcbiAgICAgICAgICA7KHJlYyBhcyBhbnkpLnNvZnQ/LmdhaW4uZGlzY29ubmVjdCgpXG4gICAgICAgICAgOyhyZWMgYXMgYW55KS5sb3VkPy5zcmMuZGlzY29ubmVjdCgpXG4gICAgICAgICAgOyhyZWMgYXMgYW55KS5sb3VkPy5nYWluLmRpc2Nvbm5lY3QoKVxuICAgICAgICB9IGNhdGNoIHt9XG4gICAgICB9XG4gICAgICB0aGlzLmFjdGl2ZU5vZGVzLmNsZWFyKClcbiAgICB9LCBmYWRlTXMgKyAxMClcbiAgfVxuXG4gIHJlbGVhc2VJbnN0YW5jZShpbnN0SWQ6IHN0cmluZykge1xuICAgIC8vIFN0b3AgYW55IGFjdGl2ZSBub2RlcyBpbW1lZGlhdGVseVxuICAgIHRoaXMuc3RvcEFuZENsZWFudXBOb2RlKGluc3RJZCwgJ3NvZnQnKVxuICAgIHRoaXMuc3RvcEFuZENsZWFudXBOb2RlKGluc3RJZCwgJ2xvdWQnKVxuICAgIC8vIERpc2Nvbm5lY3QgYW5kIGRlbGV0ZSBiYXNlIGdhaW5zXG4gICAgY29uc3QgZ2FpbnMgPSB0aGlzLmJhc2VHYWlucy5nZXQoaW5zdElkKVxuICAgIGlmIChnYWlucykge1xuICAgICAgdHJ5IHsgZ2FpbnMuc29mdC5kaXNjb25uZWN0KCkgfSBjYXRjaCB7fVxuICAgICAgdHJ5IHsgZ2FpbnMubG91ZC5kaXNjb25uZWN0KCkgfSBjYXRjaCB7fVxuICAgICAgdGhpcy5iYXNlR2FpbnMuZGVsZXRlKGluc3RJZClcbiAgICB9XG4gICAgLy8gQ2xlYXIgYWN0aXZlIG5vZGVzIHJlY29yZFxuICAgIHRoaXMuYWN0aXZlTm9kZXMuZGVsZXRlKGluc3RJZClcbiAgICAvLyBEcm9wIGJ1ZmZlcnMgZm9yIHRoaXMgaW5zdGFuY2VcbiAgICB0aGlzLmJ1ZmZlcnNCeUluc3RUZW1wby5kZWxldGUoaW5zdElkKVxuICB9XG5cbiAgYXN5bmMgcHJlbG9hZFRlbXBvRm9ySW5zdGFuY2UoXG4gICAgaW5zdElkOiBzdHJpbmcsXG4gICAgcGFydElkOiBzdHJpbmcsXG4gICAgaW5zdHJ1bWVudElkOiBzdHJpbmcsXG4gICAgdGVtcG86IFRlbXBvXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHNvZnRVcmwgPSBgL2F1ZGlvLyR7cGFydElkfS8ke2luc3RydW1lbnRJZH0tcC0ke3RlbXBvfS5tcDNgXG4gICAgY29uc3QgbG91ZFVybCA9IGAvYXVkaW8vJHtwYXJ0SWR9LyR7aW5zdHJ1bWVudElkfS1mLSR7dGVtcG99Lm1wM2BcbiAgICBjb25zdCBbc29mdCwgbG91ZF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLmxvYWRBdWRpb0J1ZmZlcihzb2Z0VXJsKS5jYXRjaCgoKSA9PiBudWxsKSxcbiAgICAgIHRoaXMubG9hZEF1ZGlvQnVmZmVyKGxvdWRVcmwpLmNhdGNoKCgpID0+IG51bGwpXG4gICAgXSlcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuYnVmZmVyc0J5SW5zdFRlbXBvLmdldChpbnN0SWQpIHx8IHt9XG4gICAgOyhlbnRyeSBhcyBhbnkpW3RlbXBvXSA9IHsgc29mdDogc29mdCA/PyB1bmRlZmluZWQsIGxvdWQ6IGxvdWQgPz8gdW5kZWZpbmVkIH1cbiAgICB0aGlzLmJ1ZmZlcnNCeUluc3RUZW1wby5zZXQoaW5zdElkLCBlbnRyeSlcbiAgfVxuXG4gIGdldEJ1ZmZlcnNGb3IoaW5zdElkOiBzdHJpbmcsIHRlbXBvOiBUZW1wbyk6IHsgc29mdD86IEF1ZGlvQnVmZmVyOyBsb3VkPzogQXVkaW9CdWZmZXIgfSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZSA9IHRoaXMuYnVmZmVyc0J5SW5zdFRlbXBvLmdldChpbnN0SWQpXG4gICAgcmV0dXJuIGUgPyAoZSBhcyBhbnkpW3RlbXBvXSA6IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0SW5zcGVjdG9yU25hcHNob3QoKTogQXVkaW9JbnNwZWN0b3JTbmFwc2hvdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldEF1ZGlvQnVmZmVyczogKCkgPT4ge1xuICAgICAgICAvLyBEZXJpdmUgcGVyLWluc3QgcHJlc2VuY2UgZm9yIGN1cnJlbnQgdGVtcG8gaXNu4oCZdCBhdmFpbGFibGUgaGVyZTsgcmV0dXJuIHVuaW9uIHByZXNlbmNlXG4gICAgICAgIGNvbnN0IHNuYXA6IFJlY29yZDxzdHJpbmcsIHsgc29mdD86IGJvb2xlYW47IGxvdWQ/OiBib29sZWFuIH0+ID0ge31cbiAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgdGhpcy5idWZmZXJzQnlJbnN0VGVtcG8uZW50cmllcygpKSB7XG4gICAgICAgICAgc25hcFtrXSA9IHtcbiAgICAgICAgICAgIHNvZnQ6ICEhKHYuZmFzdD8uc29mdCB8fCB2LnNsb3c/LnNvZnQpLFxuICAgICAgICAgICAgbG91ZDogISEodi5mYXN0Py5sb3VkIHx8IHYuc2xvdz8ubG91ZClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNuYXBcbiAgICAgIH0sXG4gICAgICBnZXRBdWRpb0J1ZmZlcnNCeVRlbXBvOiAoKSA9PiB0aGlzLmdldEJ1ZmZlcnNCeUluc3RUZW1wb1NuYXBzaG90KCksXG4gICAgICBnZXROb2RlU3RhcnRUaW1lczogKCkgPT4gKHt9KSxcbiAgICAgIGdldERlZmVycmVkUXVldWU6ICgpID0+IFtdLFxuICAgICAgZ2V0UGxheVN0YXRlOiAoKSA9PiBmYWxzZSxcbiAgICAgIGdldFBhcnRzOiAoKSA9PiBbXSxcbiAgICAgIHNjaGVkdWxlZFRlbXBvU3dpdGNoOiBudWxsLFxuICAgICAgZ2V0VHJhbnNwb3J0U3RhcnRUaW1lOiAoKSA9PiBudWxsLFxuICAgICAgZ2V0VGVtcG86ICgpID0+ICdmYXN0J1xuICAgIH1cbiAgfVxuXG4gIGdldEJ1ZmZlcnNCeUluc3RUZW1wb1NuYXBzaG90KCk6IFJlY29yZDxzdHJpbmcsIHsgZmFzdD86IHsgc29mdD86IGJvb2xlYW47IGxvdWQ/OiBib29sZWFuIH07IHNsb3c/OiB7IHNvZnQ/OiBib29sZWFuOyBsb3VkPzogYm9vbGVhbiB9IH0+IHtcbiAgICBjb25zdCBvdXQ6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIHRoaXMuYnVmZmVyc0J5SW5zdFRlbXBvLmVudHJpZXMoKSkge1xuICAgICAgb3V0W2tdID0ge1xuICAgICAgICBmYXN0OiB7IHNvZnQ6ICEhdi5mYXN0Py5zb2Z0LCBsb3VkOiAhIXYuZmFzdD8ubG91ZCB9LFxuICAgICAgICBzbG93OiB7IHNvZnQ6ICEhdi5zbG93Py5zb2Z0LCBsb3VkOiAhIXYuc2xvdz8ubG91ZCB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXRcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgYXVkaW9TZXJ2aWNlID0gbmV3IEF1ZGlvU2VydmljZSgpXG4iXSwibmFtZXMiOlsiYXBwbHlEZWNvZGVGYWRlcyIsIkF1ZGlvU2VydmljZSIsImluaXRJZk5lZWRlZCIsImF1ZGlvQ3R4IiwiQUMiLCJnbG9iYWxUaGlzIiwiQXVkaW9Db250ZXh0Iiwid2Via2l0QXVkaW9Db250ZXh0IiwiY3R4IiwibGltaXRlciIsImNyZWF0ZUR5bmFtaWNzQ29tcHJlc3NvciIsInRocmVzaG9sZCIsInZhbHVlIiwia25lZSIsInJhdGlvIiwiYXR0YWNrIiwicmVsZWFzZSIsImRlc3RpbmF0aW9uIiwiY29ubmVjdCIsImxvYWRBdWRpb0J1ZmZlciIsInVybCIsIkVycm9yIiwiYnVmZmVyQ2FjaGUiLCJoYXMiLCJnZXQiLCJyZXMiLCJmZXRjaCIsIm9rIiwiYXJyYXlCdWYiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsImRlY29kZUF1ZGlvRGF0YSIsInNsaWNlIiwic2V0IiwiZ2V0QmFzZUdhaW5QYWlyIiwiaW5zdElkIiwiZXhpc3RpbmciLCJiYXNlR2FpbnMiLCJzb2Z0IiwiY3JlYXRlR2FpbiIsImxvdWQiLCJnYWluIiwicGFpciIsInNldEJhc2VHYWluVmFsdWVzIiwiYmFsYW5jZVBlcmNlbnQiLCJtdXRlZCIsImJhbCIsIk1hdGgiLCJtYXgiLCJtaW4iLCJjcmVhdGVBbmRTdGFydE5vZGUiLCJ0eXBlIiwic3RhcnRUaW1lIiwib2Zmc2V0U2Vjb25kcyIsImZhZGVNcyIsImJhc2UiLCJhY3RpdmVOb2RlcyIsImV4aXN0aW5nRW50cnkiLCJ1bmRlZmluZWQiLCJlbmRUaW1lIiwiY2FuY2VsU2NoZWR1bGVkVmFsdWVzIiwic2V0VmFsdWVBdFRpbWUiLCJsaW5lYXJSYW1wVG9WYWx1ZUF0VGltZSIsInNyYyIsInN0b3AiLCJwZXJHYWluIiwiY3JlYXRlQnVmZmVyU291cmNlIiwic3RhcnQiLCJlIiwiY29uc29sZSIsIndhcm4iLCJjdXJyZW50Iiwic3RvcEFuZENsZWFudXBOb2RlIiwic3RvcFRpbWUiLCJyZWNvcmQiLCJlbnRyeSIsInQiLCJjdXJyZW50VGltZSIsImRpc2Nvbm5lY3QiLCJmYWRlQW5kU3RvcE5vZGUiLCJyZWMiLCJzdG9wQWxsQWN0aXZlIiwibm93IiwiZW50cmllcyIsInR5cGVzIiwic2V0VGltZW91dCIsInZhbHVlcyIsImNsZWFyIiwicmVsZWFzZUluc3RhbmNlIiwiZ2FpbnMiLCJkZWxldGUiLCJidWZmZXJzQnlJbnN0VGVtcG8iLCJwcmVsb2FkVGVtcG9Gb3JJbnN0YW5jZSIsInBhcnRJZCIsImluc3RydW1lbnRJZCIsInRlbXBvIiwic29mdFVybCIsImxvdWRVcmwiLCJQcm9taXNlIiwiYWxsIiwiY2F0Y2giLCJnZXRCdWZmZXJzRm9yIiwiZ2V0SW5zcGVjdG9yU25hcHNob3QiLCJnZXRBdWRpb0J1ZmZlcnMiLCJzbmFwIiwiayIsInYiLCJmYXN0Iiwic2xvdyIsImdldEF1ZGlvQnVmZmVyc0J5VGVtcG8iLCJnZXRCdWZmZXJzQnlJbnN0VGVtcG9TbmFwc2hvdCIsImdldE5vZGVTdGFydFRpbWVzIiwiZ2V0RGVmZXJyZWRRdWV1ZSIsImdldFBsYXlTdGF0ZSIsImdldFBhcnRzIiwic2NoZWR1bGVkVGVtcG9Td2l0Y2giLCJnZXRUcmFuc3BvcnRTdGFydFRpbWUiLCJnZXRUZW1wbyIsIm91dCIsIk1hcCIsImF1ZGlvU2VydmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/audio/AudioService.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/audio/audioUtils.ts":
/*!*************************************!*\
  !*** ./src/lib/audio/audioUtils.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyDecodeFades: () => (/* binding */ applyDecodeFades),\n/* harmony export */   computeCurrentBeatIndex: () => (/* binding */ computeCurrentBeatIndex),\n/* harmony export */   computeNextBeatScheduleTime: () => (/* binding */ computeNextBeatScheduleTime),\n/* harmony export */   computeTargetOffsetForBeat: () => (/* binding */ computeTargetOffsetForBeat),\n/* harmony export */   loopDuration: () => (/* binding */ loopDuration),\n/* harmony export */   secondsPerBeat: () => (/* binding */ secondsPerBeat)\n/* harmony export */ });\nfunction secondsPerBeat(tempo) {\n    return tempo === \"fast\" ? 60 / 160 : 60 / 80;\n}\nfunction loopDuration(tempo) {\n    return tempo === \"fast\" ? 10.5 : 21;\n}\nfunction computeCurrentBeatIndex(audioNow, transportStart, tempo) {\n    const spb = secondsPerBeat(tempo);\n    const elapsed = Math.max(0, audioNow - transportStart);\n    return Math.floor(elapsed / spb);\n}\nfunction computeNextBeatScheduleTime(audioNow, transportStart, tempo) {\n    const spb = secondsPerBeat(tempo);\n    const nowBeat = Math.floor((audioNow - transportStart) / spb);\n    const nextBeatIndex = nowBeat + 1;\n    const scheduleTime = transportStart + nextBeatIndex * spb;\n    return {\n        nextBeatIndex,\n        scheduleTime\n    };\n}\nfunction computeTargetOffsetForBeat(beatIndex, tempo, bufferDuration) {\n    const spb = secondsPerBeat(tempo);\n    const canonicalLoop = loopDuration(tempo);\n    const beatsPerLoop = Math.round(canonicalLoop / spb);\n    const beatInLoop = (beatIndex % beatsPerLoop + beatsPerLoop) % beatsPerLoop;\n    let offset = beatInLoop * spb;\n    // Avoid floating rounding hitting the exact buffer end; clamp to start\n    const epsilon = 1e-3;\n    if (offset >= bufferDuration - epsilon) offset = 0;\n    return offset;\n}\nfunction applyDecodeFades(buffer, fadeMs = 20) {\n    const sampleRate = buffer.sampleRate;\n    const fadeSamples = Math.max(1, Math.floor(fadeMs / 1000 * sampleRate));\n    for(let ch = 0; ch < buffer.numberOfChannels; ch++){\n        const data = buffer.getChannelData(ch);\n        // Fade in: ramp 0 -> 1 over fadeSamples, inclusive on end\n        const denomIn = Math.max(1, fadeSamples - 1);\n        for(let i = 0; i < fadeSamples && i < data.length; i++){\n            const gain = i / denomIn;\n            data[i] *= gain;\n        }\n        // Fade out: ramp 1 -> 0 over fadeSamples, making last sample 0\n        const denomOut = Math.max(1, fadeSamples - 1);\n        for(let i = 0; i < fadeSamples && i < data.length; i++){\n            const idx = data.length - 1 - i;\n            const gain = i / denomOut // last sample (i=0) => 0; deeper => ->1\n            ;\n            data[idx] *= gain;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL2F1ZGlvL2F1ZGlvVXRpbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRU8sU0FBU0EsZUFBZUMsS0FBWTtJQUN6QyxPQUFPQSxVQUFVLFNBQVMsS0FBSyxNQUFNLEtBQUs7QUFDNUM7QUFFTyxTQUFTQyxhQUFhRCxLQUFZO0lBQ3ZDLE9BQU9BLFVBQVUsU0FBUyxPQUFPO0FBQ25DO0FBRU8sU0FBU0Usd0JBQXdCQyxRQUFnQixFQUFFQyxjQUFzQixFQUFFSixLQUFZO0lBQzVGLE1BQU1LLE1BQU1OLGVBQWVDO0lBQzNCLE1BQU1NLFVBQVVDLEtBQUtDLEdBQUcsQ0FBQyxHQUFHTCxXQUFXQztJQUN2QyxPQUFPRyxLQUFLRSxLQUFLLENBQUNILFVBQVVEO0FBQzlCO0FBRU8sU0FBU0ssNEJBQTRCUCxRQUFnQixFQUFFQyxjQUFzQixFQUFFSixLQUFZO0lBQ2hHLE1BQU1LLE1BQU1OLGVBQWVDO0lBQzNCLE1BQU1XLFVBQVVKLEtBQUtFLEtBQUssQ0FBQyxDQUFDTixXQUFXQyxjQUFhLElBQUtDO0lBQ3pELE1BQU1PLGdCQUFnQkQsVUFBVTtJQUNoQyxNQUFNRSxlQUFlVCxpQkFBaUJRLGdCQUFnQlA7SUFDdEQsT0FBTztRQUFFTztRQUFlQztJQUFhO0FBQ3ZDO0FBRU8sU0FBU0MsMkJBQTJCQyxTQUFpQixFQUFFZixLQUFZLEVBQUVnQixjQUFzQjtJQUNoRyxNQUFNWCxNQUFNTixlQUFlQztJQUMzQixNQUFNaUIsZ0JBQWdCaEIsYUFBYUQ7SUFDbkMsTUFBTWtCLGVBQWVYLEtBQUtZLEtBQUssQ0FBQ0YsZ0JBQWdCWjtJQUNoRCxNQUFNZSxhQUFhLENBQUMsWUFBYUYsZUFBZ0JBLFlBQVcsSUFBS0E7SUFDakUsSUFBSUcsU0FBU0QsYUFBYWY7SUFDMUIsdUVBQXVFO0lBQ3ZFLE1BQU1pQixVQUFVO0lBQ2hCLElBQUlELFVBQVVMLGlCQUFpQk0sU0FBU0QsU0FBUztJQUNqRCxPQUFPQTtBQUNUO0FBRU8sU0FBU0UsaUJBQWlCQyxNQUFtQixFQUFFQyxTQUFTLEVBQUU7SUFDL0QsTUFBTUMsYUFBYUYsT0FBT0UsVUFBVTtJQUNwQyxNQUFNQyxjQUFjcEIsS0FBS0MsR0FBRyxDQUFDLEdBQUdELEtBQUtFLEtBQUssQ0FBQyxTQUFVLE9BQVFpQjtJQUM3RCxJQUFLLElBQUlFLEtBQUssR0FBR0EsS0FBS0osT0FBT0ssZ0JBQWdCLEVBQUVELEtBQU07UUFDbkQsTUFBTUUsT0FBT04sT0FBT08sY0FBYyxDQUFDSDtRQUNuQywwREFBMEQ7UUFDMUQsTUFBTUksVUFBVXpCLEtBQUtDLEdBQUcsQ0FBQyxHQUFHbUIsY0FBYztRQUMxQyxJQUFLLElBQUlNLElBQUksR0FBR0EsSUFBSU4sZUFBZU0sSUFBSUgsS0FBS0ksTUFBTSxFQUFFRCxJQUFLO1lBQ3ZELE1BQU1FLE9BQU9GLElBQUlEO1lBQ2pCRixJQUFJLENBQUNHLEVBQUUsSUFBSUU7UUFDYjtRQUNBLCtEQUErRDtRQUMvRCxNQUFNQyxXQUFXN0IsS0FBS0MsR0FBRyxDQUFDLEdBQUdtQixjQUFjO1FBQzNDLElBQUssSUFBSU0sSUFBSSxHQUFHQSxJQUFJTixlQUFlTSxJQUFJSCxLQUFLSSxNQUFNLEVBQUVELElBQUs7WUFDdkQsTUFBTUksTUFBTVAsS0FBS0ksTUFBTSxHQUFHLElBQUlEO1lBQzlCLE1BQU1FLE9BQU9GLElBQUlHLFNBQVMsd0NBQXdDOztZQUNsRU4sSUFBSSxDQUFDTyxJQUFJLElBQUlGO1FBQ2Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZmlyZWJpcmQtaW50ZXJhY3RpdmUvLi9zcmMvbGliL2F1ZGlvL2F1ZGlvVXRpbHMudHM/ZjFmYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFRlbXBvIH0gZnJvbSAnQC9saWIvdHlwZXMnXG5cbmV4cG9ydCBmdW5jdGlvbiBzZWNvbmRzUGVyQmVhdCh0ZW1wbzogVGVtcG8pOiBudW1iZXIge1xuICByZXR1cm4gdGVtcG8gPT09ICdmYXN0JyA/IDYwIC8gMTYwIDogNjAgLyA4MFxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9vcER1cmF0aW9uKHRlbXBvOiBUZW1wbyk6IG51bWJlciB7XG4gIHJldHVybiB0ZW1wbyA9PT0gJ2Zhc3QnID8gMTAuNSA6IDIxXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlQ3VycmVudEJlYXRJbmRleChhdWRpb05vdzogbnVtYmVyLCB0cmFuc3BvcnRTdGFydDogbnVtYmVyLCB0ZW1wbzogVGVtcG8pOiBudW1iZXIge1xuICBjb25zdCBzcGIgPSBzZWNvbmRzUGVyQmVhdCh0ZW1wbylcbiAgY29uc3QgZWxhcHNlZCA9IE1hdGgubWF4KDAsIGF1ZGlvTm93IC0gdHJhbnNwb3J0U3RhcnQpXG4gIHJldHVybiBNYXRoLmZsb29yKGVsYXBzZWQgLyBzcGIpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlTmV4dEJlYXRTY2hlZHVsZVRpbWUoYXVkaW9Ob3c6IG51bWJlciwgdHJhbnNwb3J0U3RhcnQ6IG51bWJlciwgdGVtcG86IFRlbXBvKSB7XG4gIGNvbnN0IHNwYiA9IHNlY29uZHNQZXJCZWF0KHRlbXBvKVxuICBjb25zdCBub3dCZWF0ID0gTWF0aC5mbG9vcigoYXVkaW9Ob3cgLSB0cmFuc3BvcnRTdGFydCkgLyBzcGIpXG4gIGNvbnN0IG5leHRCZWF0SW5kZXggPSBub3dCZWF0ICsgMVxuICBjb25zdCBzY2hlZHVsZVRpbWUgPSB0cmFuc3BvcnRTdGFydCArIG5leHRCZWF0SW5kZXggKiBzcGJcbiAgcmV0dXJuIHsgbmV4dEJlYXRJbmRleCwgc2NoZWR1bGVUaW1lIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVUYXJnZXRPZmZzZXRGb3JCZWF0KGJlYXRJbmRleDogbnVtYmVyLCB0ZW1wbzogVGVtcG8sIGJ1ZmZlckR1cmF0aW9uOiBudW1iZXIpOiBudW1iZXIge1xuICBjb25zdCBzcGIgPSBzZWNvbmRzUGVyQmVhdCh0ZW1wbylcbiAgY29uc3QgY2Fub25pY2FsTG9vcCA9IGxvb3BEdXJhdGlvbih0ZW1wbylcbiAgY29uc3QgYmVhdHNQZXJMb29wID0gTWF0aC5yb3VuZChjYW5vbmljYWxMb29wIC8gc3BiKVxuICBjb25zdCBiZWF0SW5Mb29wID0gKChiZWF0SW5kZXggJSBiZWF0c1Blckxvb3ApICsgYmVhdHNQZXJMb29wKSAlIGJlYXRzUGVyTG9vcFxuICBsZXQgb2Zmc2V0ID0gYmVhdEluTG9vcCAqIHNwYlxuICAvLyBBdm9pZCBmbG9hdGluZyByb3VuZGluZyBoaXR0aW5nIHRoZSBleGFjdCBidWZmZXIgZW5kOyBjbGFtcCB0byBzdGFydFxuICBjb25zdCBlcHNpbG9uID0gMWUtM1xuICBpZiAob2Zmc2V0ID49IGJ1ZmZlckR1cmF0aW9uIC0gZXBzaWxvbikgb2Zmc2V0ID0gMFxuICByZXR1cm4gb2Zmc2V0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseURlY29kZUZhZGVzKGJ1ZmZlcjogQXVkaW9CdWZmZXIsIGZhZGVNcyA9IDIwKSB7XG4gIGNvbnN0IHNhbXBsZVJhdGUgPSBidWZmZXIuc2FtcGxlUmF0ZVxuICBjb25zdCBmYWRlU2FtcGxlcyA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IoKGZhZGVNcyAvIDEwMDApICogc2FtcGxlUmF0ZSkpXG4gIGZvciAobGV0IGNoID0gMDsgY2ggPCBidWZmZXIubnVtYmVyT2ZDaGFubmVsczsgY2grKykge1xuICAgIGNvbnN0IGRhdGEgPSBidWZmZXIuZ2V0Q2hhbm5lbERhdGEoY2gpXG4gICAgLy8gRmFkZSBpbjogcmFtcCAwIC0+IDEgb3ZlciBmYWRlU2FtcGxlcywgaW5jbHVzaXZlIG9uIGVuZFxuICAgIGNvbnN0IGRlbm9tSW4gPSBNYXRoLm1heCgxLCBmYWRlU2FtcGxlcyAtIDEpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmYWRlU2FtcGxlcyAmJiBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZ2FpbiA9IGkgLyBkZW5vbUluXG4gICAgICBkYXRhW2ldICo9IGdhaW5cbiAgICB9XG4gICAgLy8gRmFkZSBvdXQ6IHJhbXAgMSAtPiAwIG92ZXIgZmFkZVNhbXBsZXMsIG1ha2luZyBsYXN0IHNhbXBsZSAwXG4gICAgY29uc3QgZGVub21PdXQgPSBNYXRoLm1heCgxLCBmYWRlU2FtcGxlcyAtIDEpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmYWRlU2FtcGxlcyAmJiBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgaWR4ID0gZGF0YS5sZW5ndGggLSAxIC0gaVxuICAgICAgY29uc3QgZ2FpbiA9IGkgLyBkZW5vbU91dCAvLyBsYXN0IHNhbXBsZSAoaT0wKSA9PiAwOyBkZWVwZXIgPT4gLT4xXG4gICAgICBkYXRhW2lkeF0gKj0gZ2FpblxuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbInNlY29uZHNQZXJCZWF0IiwidGVtcG8iLCJsb29wRHVyYXRpb24iLCJjb21wdXRlQ3VycmVudEJlYXRJbmRleCIsImF1ZGlvTm93IiwidHJhbnNwb3J0U3RhcnQiLCJzcGIiLCJlbGFwc2VkIiwiTWF0aCIsIm1heCIsImZsb29yIiwiY29tcHV0ZU5leHRCZWF0U2NoZWR1bGVUaW1lIiwibm93QmVhdCIsIm5leHRCZWF0SW5kZXgiLCJzY2hlZHVsZVRpbWUiLCJjb21wdXRlVGFyZ2V0T2Zmc2V0Rm9yQmVhdCIsImJlYXRJbmRleCIsImJ1ZmZlckR1cmF0aW9uIiwiY2Fub25pY2FsTG9vcCIsImJlYXRzUGVyTG9vcCIsInJvdW5kIiwiYmVhdEluTG9vcCIsIm9mZnNldCIsImVwc2lsb24iLCJhcHBseURlY29kZUZhZGVzIiwiYnVmZmVyIiwiZmFkZU1zIiwic2FtcGxlUmF0ZSIsImZhZGVTYW1wbGVzIiwiY2giLCJudW1iZXJPZkNoYW5uZWxzIiwiZGF0YSIsImdldENoYW5uZWxEYXRhIiwiZGVub21JbiIsImkiLCJsZW5ndGgiLCJnYWluIiwiZGVub21PdXQiLCJpZHgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/audio/audioUtils.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/instruments.ts":
/*!********************************!*\
  !*** ./src/lib/instruments.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   INSTRUMENTS_BY_PART: () => (/* binding */ INSTRUMENTS_BY_PART),\n/* harmony export */   PARTS: () => (/* binding */ PARTS)\n/* harmony export */ });\nconst PARTS = [\n    \"melody\",\n    \"harmony\",\n    \"rhythm\",\n    \"texture\"\n];\n// Exactly 4 instrument IDs per part to yield 64 files with 2 dynamics x 2 tempos\nconst INSTRUMENTS_BY_PART = {\n    melody: [\n        {\n            id: \"brass\",\n            name: \"Brass\",\n            family: \"melody\"\n        },\n        {\n            id: \"strings\",\n            name: \"Strings\",\n            family: \"melody\"\n        },\n        {\n            id: \"woodwind\",\n            name: \"Woodwind\",\n            family: \"melody\"\n        },\n        {\n            id: \"percussion\",\n            name: \"Percussion\",\n            family: \"melody\"\n        }\n    ],\n    harmony: [\n        {\n            id: \"brass\",\n            name: \"Brass\",\n            family: \"harmony\"\n        },\n        {\n            id: \"strings\",\n            name: \"Strings\",\n            family: \"harmony\"\n        },\n        {\n            id: \"woodwind\",\n            name: \"Woodwind\",\n            family: \"harmony\"\n        },\n        {\n            id: \"percussion\",\n            name: \"Percussion\",\n            family: \"harmony\"\n        }\n    ],\n    rhythm: [\n        {\n            id: \"brass\",\n            name: \"Brass\",\n            family: \"rhythm\"\n        },\n        {\n            id: \"strings\",\n            name: \"Strings\",\n            family: \"rhythm\"\n        },\n        {\n            id: \"woodwind\",\n            name: \"Woodwind\",\n            family: \"rhythm\"\n        },\n        {\n            id: \"percussion\",\n            name: \"Percussion\",\n            family: \"rhythm\"\n        }\n    ],\n    texture: [\n        {\n            id: \"brass\",\n            name: \"Brass\",\n            family: \"texture\"\n        },\n        {\n            id: \"strings\",\n            name: \"Strings\",\n            family: \"texture\"\n        },\n        {\n            id: \"woodwind\",\n            name: \"Woodwind\",\n            family: \"texture\"\n        },\n        {\n            id: \"percussion\",\n            name: \"Percussion\",\n            family: \"texture\"\n        }\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL2luc3RydW1lbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sTUFBTUEsUUFBUTtJQUFDO0lBQVU7SUFBVztJQUFVO0NBQVUsQ0FBUztBQUd4RSxpRkFBaUY7QUFDMUUsTUFBTUMsc0JBQTBGO0lBQ3JHQyxRQUFRO1FBQ047WUFBRUMsSUFBSTtZQUFTQyxNQUFNO1lBQVNDLFFBQVE7UUFBUztRQUMvQztZQUFFRixJQUFJO1lBQVdDLE1BQU07WUFBV0MsUUFBUTtRQUFTO1FBQ25EO1lBQUVGLElBQUk7WUFBWUMsTUFBTTtZQUFZQyxRQUFRO1FBQVM7UUFDckQ7WUFBRUYsSUFBSTtZQUFjQyxNQUFNO1lBQWNDLFFBQVE7UUFBUztLQUMxRDtJQUNEQyxTQUFTO1FBQ1A7WUFBRUgsSUFBSTtZQUFTQyxNQUFNO1lBQVNDLFFBQVE7UUFBVTtRQUNoRDtZQUFFRixJQUFJO1lBQVdDLE1BQU07WUFBV0MsUUFBUTtRQUFVO1FBQ3BEO1lBQUVGLElBQUk7WUFBWUMsTUFBTTtZQUFZQyxRQUFRO1FBQVU7UUFDdEQ7WUFBRUYsSUFBSTtZQUFjQyxNQUFNO1lBQWNDLFFBQVE7UUFBVTtLQUMzRDtJQUNERSxRQUFRO1FBQ047WUFBRUosSUFBSTtZQUFTQyxNQUFNO1lBQVNDLFFBQVE7UUFBUztRQUMvQztZQUFFRixJQUFJO1lBQVdDLE1BQU07WUFBV0MsUUFBUTtRQUFTO1FBQ25EO1lBQUVGLElBQUk7WUFBWUMsTUFBTTtZQUFZQyxRQUFRO1FBQVM7UUFDckQ7WUFBRUYsSUFBSTtZQUFjQyxNQUFNO1lBQWNDLFFBQVE7UUFBUztLQUMxRDtJQUNERyxTQUFTO1FBQ1A7WUFBRUwsSUFBSTtZQUFTQyxNQUFNO1lBQVNDLFFBQVE7UUFBVTtRQUNoRDtZQUFFRixJQUFJO1lBQVdDLE1BQU07WUFBV0MsUUFBUTtRQUFVO1FBQ3BEO1lBQUVGLElBQUk7WUFBWUMsTUFBTTtZQUFZQyxRQUFRO1FBQVU7UUFDdEQ7WUFBRUYsSUFBSTtZQUFjQyxNQUFNO1lBQWNDLFFBQVE7UUFBVTtLQUMzRDtBQUNILEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXJlYmlyZC1pbnRlcmFjdGl2ZS8uL3NyYy9saWIvaW5zdHJ1bWVudHMudHM/NmZhNiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgUEFSVFMgPSBbJ21lbG9keScsICdoYXJtb255JywgJ3JoeXRobScsICd0ZXh0dXJlJ10gYXMgY29uc3RcbmV4cG9ydCB0eXBlIFBhcnRDb25zdCA9IHR5cGVvZiBQQVJUU1tudW1iZXJdXG5cbi8vIEV4YWN0bHkgNCBpbnN0cnVtZW50IElEcyBwZXIgcGFydCB0byB5aWVsZCA2NCBmaWxlcyB3aXRoIDIgZHluYW1pY3MgeCAyIHRlbXBvc1xuZXhwb3J0IGNvbnN0IElOU1RSVU1FTlRTX0JZX1BBUlQ6IFJlY29yZDxQYXJ0Q29uc3QsIHsgaWQ6IHN0cmluZzsgbmFtZTogc3RyaW5nOyBmYW1pbHk/OiBzdHJpbmcgfVtdPiA9IHtcbiAgbWVsb2R5OiBbXG4gICAgeyBpZDogJ2JyYXNzJywgbmFtZTogJ0JyYXNzJywgZmFtaWx5OiAnbWVsb2R5JyB9LFxuICAgIHsgaWQ6ICdzdHJpbmdzJywgbmFtZTogJ1N0cmluZ3MnLCBmYW1pbHk6ICdtZWxvZHknIH0sXG4gICAgeyBpZDogJ3dvb2R3aW5kJywgbmFtZTogJ1dvb2R3aW5kJywgZmFtaWx5OiAnbWVsb2R5JyB9LFxuICAgIHsgaWQ6ICdwZXJjdXNzaW9uJywgbmFtZTogJ1BlcmN1c3Npb24nLCBmYW1pbHk6ICdtZWxvZHknIH1cbiAgXSxcbiAgaGFybW9ueTogW1xuICAgIHsgaWQ6ICdicmFzcycsIG5hbWU6ICdCcmFzcycsIGZhbWlseTogJ2hhcm1vbnknIH0sXG4gICAgeyBpZDogJ3N0cmluZ3MnLCBuYW1lOiAnU3RyaW5ncycsIGZhbWlseTogJ2hhcm1vbnknIH0sXG4gICAgeyBpZDogJ3dvb2R3aW5kJywgbmFtZTogJ1dvb2R3aW5kJywgZmFtaWx5OiAnaGFybW9ueScgfSxcbiAgICB7IGlkOiAncGVyY3Vzc2lvbicsIG5hbWU6ICdQZXJjdXNzaW9uJywgZmFtaWx5OiAnaGFybW9ueScgfVxuICBdLFxuICByaHl0aG06IFtcbiAgICB7IGlkOiAnYnJhc3MnLCBuYW1lOiAnQnJhc3MnLCBmYW1pbHk6ICdyaHl0aG0nIH0sXG4gICAgeyBpZDogJ3N0cmluZ3MnLCBuYW1lOiAnU3RyaW5ncycsIGZhbWlseTogJ3JoeXRobScgfSxcbiAgICB7IGlkOiAnd29vZHdpbmQnLCBuYW1lOiAnV29vZHdpbmQnLCBmYW1pbHk6ICdyaHl0aG0nIH0sXG4gICAgeyBpZDogJ3BlcmN1c3Npb24nLCBuYW1lOiAnUGVyY3Vzc2lvbicsIGZhbWlseTogJ3JoeXRobScgfVxuICBdLFxuICB0ZXh0dXJlOiBbXG4gICAgeyBpZDogJ2JyYXNzJywgbmFtZTogJ0JyYXNzJywgZmFtaWx5OiAndGV4dHVyZScgfSxcbiAgICB7IGlkOiAnc3RyaW5ncycsIG5hbWU6ICdTdHJpbmdzJywgZmFtaWx5OiAndGV4dHVyZScgfSxcbiAgICB7IGlkOiAnd29vZHdpbmQnLCBuYW1lOiAnV29vZHdpbmQnLCBmYW1pbHk6ICd0ZXh0dXJlJyB9LFxuICAgIHsgaWQ6ICdwZXJjdXNzaW9uJywgbmFtZTogJ1BlcmN1c3Npb24nLCBmYW1pbHk6ICd0ZXh0dXJlJyB9XG4gIF1cbn1cbiJdLCJuYW1lcyI6WyJQQVJUUyIsIklOU1RSVU1FTlRTX0JZX1BBUlQiLCJtZWxvZHkiLCJpZCIsIm5hbWUiLCJmYW1pbHkiLCJoYXJtb255Iiwicmh5dGhtIiwidGV4dHVyZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/instruments.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/layout.tsx":
/*!****************************!*\
  !*** ./src/app/layout.tsx ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst metadata = {\n    title: \"Interactive Listening Map\",\n    description: \"Beat-aligned multi-part playback with tempo switching\"\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            style: {\n                fontFamily: \"system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif\"\n            },\n            children: children\n        }, void 0, false, {\n            fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/app/layout.tsx\",\n            lineNumber: 10,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/app/layout.tsx\",\n        lineNumber: 9,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xheW91dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF5QjtBQUNsQixNQUFNQyxXQUFXO0lBQ3RCQyxPQUFPO0lBQ1BDLGFBQWE7QUFDZixFQUFDO0FBRWMsU0FBU0MsV0FBVyxFQUFFQyxRQUFRLEVBQWlDO0lBQzVFLHFCQUNFLDhEQUFDQztRQUFLQyxNQUFLO2tCQUNULDRFQUFDQztZQUFLQyxPQUFPO2dCQUFFQyxZQUFZO1lBQTJFO3NCQUFJTDs7Ozs7Ozs7Ozs7QUFHaEgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9maXJlYmlyZC1pbnRlcmFjdGl2ZS8uL3NyYy9hcHAvbGF5b3V0LnRzeD81N2E5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCdcbmV4cG9ydCBjb25zdCBtZXRhZGF0YSA9IHtcbiAgdGl0bGU6ICdJbnRlcmFjdGl2ZSBMaXN0ZW5pbmcgTWFwJyxcbiAgZGVzY3JpcHRpb246ICdCZWF0LWFsaWduZWQgbXVsdGktcGFydCBwbGF5YmFjayB3aXRoIHRlbXBvIHN3aXRjaGluZydcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm9vdExheW91dCh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSB7XG4gIHJldHVybiAoXG4gICAgPGh0bWwgbGFuZz1cImVuXCI+XG4gICAgICA8Ym9keSBzdHlsZT17eyBmb250RmFtaWx5OiAnc3lzdGVtLXVpLCAtYXBwbGUtc3lzdGVtLCBTZWdvZSBVSSwgUm9ib3RvLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmJyB9fT57Y2hpbGRyZW59PC9ib2R5PlxuICAgIDwvaHRtbD5cbiAgKVxufVxuIl0sIm5hbWVzIjpbIlJlYWN0IiwibWV0YWRhdGEiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiUm9vdExheW91dCIsImNoaWxkcmVuIiwiaHRtbCIsImxhbmciLCJib2R5Iiwic3R5bGUiLCJmb250RmFtaWx5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./src/app/page.tsx":
/*!**************************!*\
  !*** ./src/app/page.tsx ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Page)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_InteractiveListeningMap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/components/InteractiveListeningMap */ \"(rsc)/./src/components/InteractiveListeningMap.tsx\");\n\n\nfunction Page() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_InteractiveListeningMap__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {}, void 0, false, {\n        fileName: \"/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/app/page.tsx\",\n        lineNumber: 4,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTBFO0FBRTNELFNBQVNDO0lBQ3RCLHFCQUFPLDhEQUFDRCwyRUFBdUJBOzs7OztBQUNqQyIsInNvdXJjZXMiOlsid2VicGFjazovL2ZpcmViaXJkLWludGVyYWN0aXZlLy4vc3JjL2FwcC9wYWdlLnRzeD9mNjhhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBJbnRlcmFjdGl2ZUxpc3RlbmluZ01hcCBmcm9tICdAL2NvbXBvbmVudHMvSW50ZXJhY3RpdmVMaXN0ZW5pbmdNYXAnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBhZ2UoKSB7XG4gIHJldHVybiA8SW50ZXJhY3RpdmVMaXN0ZW5pbmdNYXAgLz5cbn1cbiJdLCJuYW1lcyI6WyJJbnRlcmFjdGl2ZUxpc3RlbmluZ01hcCIsIlBhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/page.tsx\n");

/***/ }),

/***/ "(rsc)/./src/components/InteractiveListeningMap.tsx":
/*!****************************************************!*\
  !*** ./src/components/InteractiveListeningMap.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $$typeof: () => (/* binding */ $$typeof),
/* harmony export */   __esModule: () => (/* binding */ __esModule),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InteractiveListeningMap.tsx`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/Users/milodavidson/Documents/GitHub/firebird-interactive-attempt2/src/components/InteractiveListeningMap.tsx#default`));


/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@swc","vendor-chunks/use-sync-external-store","vendor-chunks/zustand"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmilodavidson%2FDocuments%2FGitHub%2Ffirebird-interactive-attempt2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();